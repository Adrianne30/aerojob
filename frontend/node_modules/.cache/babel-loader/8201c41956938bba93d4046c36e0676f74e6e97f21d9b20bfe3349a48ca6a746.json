{"ast":null,"code":"import _objectSpread from\"/Users/macbookair/Desktop/AeroJobs/AeroJob/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// src/pages/Register.js\nimport React,{useEffect,useState}from'react';import{Link,useNavigate}from'react-router-dom';import{useForm}from'react-hook-form';import{User,Mail,Lock,Eye,EyeOff,BookOpen,GraduationCap,UserPlus,RotateCcw,CheckCircle2,XCircle}from'lucide-react';import LoadingSpinner from'../components/LoadingSpinner';import Logo from'../components/Logo';import{authAPI,logApiBase}from'../utils/api';/* ------------------------------- OTP Modal ------------------------------- */import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function OTPModal(_ref){let{email,open,onClose,onVerified}=_ref;const[code,setCode]=useState('');const[verifying,setVerifying]=useState(false);const[resending,setResending]=useState(false);const[cooldown,setCooldown]=useState(60);const[serverMsg,setServerMsg]=useState(null);useEffect(()=>{if(!open)return;setCode('');setServerMsg(null);setCooldown(60);const t=setInterval(()=>setCooldown(s=>s>0?s-1:0),1000);return()=>clearInterval(t);},[open]);const verify=async()=>{if(String(code).trim().length!==6){setServerMsg({type:'error',text:'Enter the 6-digit code.'});return;}try{setVerifying(true);setServerMsg(null);// ✅ New API: expects { email, otp }\nconst resp=await authAPI.verifyOTP({email:String(email||'').trim().toLowerCase(),otp:String(code).trim()});// If your backend returns token/user you can use resp here\nsetServerMsg({type:'success',text:'Email verified.'});onVerified===null||onVerified===void 0?void 0:onVerified(resp);}catch(e){setServerMsg({type:'error',text:e.message||'Verification failed'});}finally{setVerifying(false);}};const resend=async()=>{if(cooldown>0)return;try{setResending(true);setServerMsg(null);// ✅ New API: expects { email }\nawait authAPI.resendOTP({email:String(email||'').trim().toLowerCase()});setServerMsg({type:'success',text:'OTP resent. Check your email.'});setCooldown(60);}catch(e){setServerMsg({type:'error',text:e.message||'Resend failed'});}finally{setResending(false);}};if(!open)return null;return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 z-50 flex items-center justify-center bg-black/40\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-xl w-full max-w-sm p-5\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold\",children:\"Verify your email\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600 mt-1\",children:[\"We sent a 6-digit code to \",/*#__PURE__*/_jsx(\"b\",{children:email}),\". Enter it below.\"]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"text-gray-400 hover:text-gray-600\",children:\"\\u2715\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",inputMode:\"numeric\",maxLength:6,value:code,onChange:e=>setCode(e.target.value.replace(/\\D/g,'')),className:\"mt-4 w-full border rounded px-3 py-2 tracking-widest text-center text-xl\",placeholder:\"\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\"}),serverMsg&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 flex items-center gap-2 text-sm \".concat(serverMsg.type==='error'?'text-red-600':'text-green-600'),children:[serverMsg.type==='error'?/*#__PURE__*/_jsx(XCircle,{className:\"w-4 h-4\"}):/*#__PURE__*/_jsx(CheckCircle2,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsx(\"span\",{children:serverMsg.text})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"px-3 py-2 rounded border text-gray-700\",children:\"Cancel\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:resend,className:\"px-3 py-2 rounded border flex items-center gap-1 disabled:opacity-50\",disabled:cooldown>0||resending,title:cooldown>0?\"Wait \".concat(cooldown,\"s\"):'Resend code',children:[/*#__PURE__*/_jsx(RotateCcw,{className:\"w-4 h-4\"}),cooldown>0?\"Resend in \".concat(cooldown,\"s\"):resending?'Resending…':'Resend OTP']}),/*#__PURE__*/_jsx(\"button\",{onClick:verify,className:\"px-4 py-2 rounded bg-blue-600 text-white disabled:opacity-50\",disabled:verifying,children:verifying?'Verifying…':'Verify'})]})]})]})});}/* -------------------------------- Register -------------------------------- */const Register=()=>{var _errors$root;const[showPassword,setShowPassword]=useState(false);const[showConfirmPassword,setShowConfirmPassword]=useState(false);const[isLoading,setIsLoading]=useState(false);const[otpOpen,setOtpOpen]=useState(false);const[formError,setFormError]=useState(null);const navigate=useNavigate();const{register,handleSubmit,formState:{errors},watch,setError}=useForm({defaultValues:{userType:'student'}});useEffect(()=>{logApiBase();// will log resolved API base/root\n},[]);const password=watch('password');const userType=watch('userType');const emailValue=(watch('email')||'').trim().toLowerCase();const onSubmit=async data=>{setIsLoading(true);setFormError(null);try{const payload={firstName:(data.firstName||'').trim(),lastName:(data.lastName||'').trim(),email:emailValue,password:data.password,userType:data.userType||'student',course:(data.course||'').trim(),yearLevel:data.yearLevel||'',studentId:data.userType==='student'?(data.studentId||'').trim():undefined};// remove empty keys\nObject.keys(payload).forEach(k=>{if(payload[k]===''||payload[k]==null)delete payload[k];});const reg=await authAPI.register(payload);// If email send failed server-side, transparently resend now\nif(reg!==null&&reg!==void 0&&reg.mailError){try{await authAPI.resendOTP({email:payload.email});}catch(_){}}if((reg===null||reg===void 0?void 0:reg.requiresVerification)!==false){// Normal path: open modal for user to enter code\nsetOtpOpen(true);}else{// (Fallback) If verification is somehow not required\nnavigate('/login',{replace:true,state:{justRegistered:true}});}}catch(error){console.error('Registration failed:',error);setError('root',{type:'manual',message:(error===null||error===void 0?void 0:error.message)||'Registration failed'});setFormError((error===null||error===void 0?void 0:error.message)||'Registration failed');}finally{setIsLoading(false);}};// Called after OTP verified successfully\nconst afterVerified=()=>{setOtpOpen(false);navigate('/login',{replace:true,state:{justVerified:true}});};const userTypes=[{value:'student',label:'Student',icon:BookOpen},{value:'alumni',label:'Alumni',icon:GraduationCap}];return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"sm:mx-auto sm:w-full sm:max-w-md\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center\",children:/*#__PURE__*/_jsx(Logo,{size:100})}),/*#__PURE__*/_jsx(\"h2\",{className:\"mt-6 text-center text-3xl font-heading font-bold text-gray-900\",children:\"Create your account\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"mt-2 text-center text-sm text-gray-600\",children:[\"Or\",' ',/*#__PURE__*/_jsx(Link,{to:\"/login\",className:\"font-medium text-primary-600 hover:text-primary-500\",children:\"sign in to your existing account\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-8 sm:mx-auto sm:w-full sm:max-w-md\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"space-y-6\",onSubmit:handleSubmit(onSubmit),noValidate:true,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"I am a\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 gap-3 mt-2\",children:userTypes.map(type=>{const Icon=type.icon;return/*#__PURE__*/_jsxs(\"label\",{className:\"relative flex cursor-pointer rounded-lg border border-gray-300 bg-white p-4 focus:outline-none hover:border-primary-500 has-[:checked]:border-primary-600 has-[:checked]:ring-2 has-[:checked]:ring-primary-600\",children:[/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"radio\",value:type.value,className:\"sr-only\"},register('userType',{required:'Please select your user type'})),{},{defaultChecked:type.value==='student'})),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center\",children:[/*#__PURE__*/_jsx(Icon,{className:\"h-6 w-6 text-gray-400\"}),/*#__PURE__*/_jsx(\"span\",{className:\"mt-2 text-sm font-medium text-gray-900\",children:type.label})]})]},type.value);})}),errors.userType&&/*#__PURE__*/_jsx(\"p\",{className:\"form-error\",children:errors.userType.message})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"firstName\",className:\"form-label\",children:\"First Name\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative mt-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\",children:/*#__PURE__*/_jsx(User,{className:\"h-5 w-5 text-gray-400\"})}),/*#__PURE__*/_jsx(\"input\",_objectSpread({id:\"firstName\",type:\"text\",className:\"input pl-10\",placeholder:\"Enter your first name\"},register('firstName',{required:'First name is required',minLength:{value:2,message:'First name must be at least 2 characters'},maxLength:{value:50,message:'First name must be less than 50 characters'}})))]}),errors.firstName&&/*#__PURE__*/_jsx(\"p\",{className:\"form-error\",children:errors.firstName.message})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"lastName\",className:\"form-label\",children:\"Last Name\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative mt-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-y-0 left-0 left pl-3 flex items-center pointer-events-none\",children:/*#__PURE__*/_jsx(User,{className:\"h-5 w-5 text-gray-400\"})}),/*#__PURE__*/_jsx(\"input\",_objectSpread({id:\"lastName\",type:\"text\",className:\"input pl-10\",placeholder:\"Enter your last name\"},register('lastName',{required:'Last name is required',minLength:{value:2,message:'Last name must be at least 2 characters'},maxLength:{value:50,message:'Last name must be less than 50 characters'}})))]}),errors.lastName&&/*#__PURE__*/_jsx(\"p\",{className:\"form-error\",children:errors.lastName.message})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",className:\"form-label\",children:\"Email address\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative mt-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\",children:/*#__PURE__*/_jsx(Mail,{className:\"h-5 w-5 text-gray-400\"})}),/*#__PURE__*/_jsx(\"input\",_objectSpread({id:\"email\",type:\"email\",autoComplete:\"email\",className:\"input pl-10\",placeholder:\"Enter your email (must be @philsca.edu.ph)\"},register('email',{required:'Email is required',pattern:{value:/^[A-Za-z0-9._%+-]+@philsca\\.edu\\.ph$/,message:'Only @philsca.edu.ph emails are allowed'}})))]}),errors.email&&/*#__PURE__*/_jsx(\"p\",{className:\"form-error\",children:errors.email.message})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"studentId\",className:\"form-label\",children:\"Student ID (for students only)\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread({id:\"studentId\",type:\"text\",className:\"input\",placeholder:\"Enter your student ID\"},register('studentId',{required:userType==='student'?'Student ID is required for students':false}))),errors.studentId&&/*#__PURE__*/_jsx(\"p\",{className:\"form-error\",children:errors.studentId.message})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"course\",className:\"form-label\",children:\"Course\"}),/*#__PURE__*/_jsxs(\"select\",_objectSpread(_objectSpread({id:\"course\",className:\"input\"},register('course',{required:userType==='student'?'Course is required for students':false})),{},{children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select your course\"}),/*#__PURE__*/_jsxs(\"optgroup\",{label:\"INSTITUTE OF ENGINEERING AND TECHNOLOGY\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"BS in Aeronautical Engineering\",children:\"BS in Aeronautical Engineering\"}),/*#__PURE__*/_jsx(\"option\",{value:\"BS in Air Transportation Major in Advance Flying\",children:\"BS in Air Transportation Major in Advance Flying\"}),/*#__PURE__*/_jsx(\"option\",{value:\"BS in Aircraft Maintenance Technology\",children:\"BS in Aircraft Maintenance Technology\"}),/*#__PURE__*/_jsx(\"option\",{value:\"BS in Aviation Electronics Technology\",children:\"BS in Aviation Electronics Technology\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Associate in Aircraft Maintenance Technology\",children:\"Associate in Aircraft Maintenance Technology\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Associate in Aviation Electronics Technology\",children:\"Associate in Aviation Electronics Technology\"})]}),/*#__PURE__*/_jsxs(\"optgroup\",{label:\"INSTITUTE OF LIBERAL ARTS AND SCIENCES\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"BS in Aviation Communication Major in Flight Operations\",children:\"BS in Aviation Communication Major in Flight Operations\"}),/*#__PURE__*/_jsx(\"option\",{value:\"BS in Aviation Tourism Major in Travel Management\",children:\"BS in Aviation Tourism Major in Travel Management\"}),/*#__PURE__*/_jsx(\"option\",{value:\"BS in Supply Management with Specialization in Aviation Logistics\",children:\"BS in Supply Management with Specialization in Aviation Logistics\"}),/*#__PURE__*/_jsx(\"option\",{value:\"BS in Aviation Safety and Security Management\",children:\"BS in Aviation Safety and Security Management\"})]}),/*#__PURE__*/_jsxs(\"optgroup\",{label:\"INSTITUTE OF COMPUTER STUDIES\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"BS in Information Technology with Specialization in Aviation Information Technology\",children:\"BS in Information Technology with Specialization in Aviation Information Technology\"}),/*#__PURE__*/_jsx(\"option\",{value:\"BS in Information System with Specialization in Aviation Information System\",children:\"BS in Information System with Specialization in Aviation Information System\"})]}),/*#__PURE__*/_jsxs(\"optgroup\",{label:\"INSTITUTE OF GRADUATE STUDIES\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"Master of Education in Aeronautical Management\",children:\"Master of Education in Aeronautical Management\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Master in Public Administration Major in Government and Airport Administration\",children:\"Master in Public Administration Major in Government and Airport Administration\"})]})]})),errors.course&&/*#__PURE__*/_jsx(\"p\",{className:\"form-error\",children:errors.course.message})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"yearLevel\",className:\"form-label\",children:\"Year Level\"}),/*#__PURE__*/_jsxs(\"select\",_objectSpread(_objectSpread({id:\"yearLevel\",className:\"input\"},register('yearLevel',{required:userType==='student'?'Year level is required for students':false})),{},{children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select year level\"}),/*#__PURE__*/_jsx(\"option\",{value:\"4th Year\",children:\"4th Year\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Graduate\",children:\"Graduate\"})]})),errors.yearLevel&&/*#__PURE__*/_jsx(\"p\",{className:\"form-error\",children:errors.yearLevel.message})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",className:\"form-label\",children:\"Password\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative mt-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\",children:/*#__PURE__*/_jsx(Lock,{className:\"h-5 w-5 text-gray-400\"})}),/*#__PURE__*/_jsx(\"input\",_objectSpread({id:\"password\",type:showPassword?'text':'password',className:\"input pl-10 pr-10\",placeholder:\"Create a password\"},register('password',{required:'Password is required',minLength:{value:6,message:'Password must be at least 6 characters'}}))),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"absolute inset-y-0 right-0 pr-3 flex items-center\",onClick:()=>setShowPassword(s=>!s),children:showPassword?/*#__PURE__*/_jsx(EyeOff,{className:\"h-5 w-5 text-gray-400\"}):/*#__PURE__*/_jsx(Eye,{className:\"h-5 w-5 text-gray-400\"})})]}),errors.password&&/*#__PURE__*/_jsx(\"p\",{className:\"form-error\",children:errors.password.message})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"confirmPassword\",className:\"form-label\",children:\"Confirm Password\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative mt-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\",children:/*#__PURE__*/_jsx(Lock,{className:\"h-5 w-5 text-gray-400\"})}),/*#__PURE__*/_jsx(\"input\",_objectSpread({id:\"confirmPassword\",type:showConfirmPassword?'text':'password',className:\"input pl-10 pr-10\",placeholder:\"Confirm your password\"},register('confirmPassword',{required:'Please confirm your password',validate:value=>value===password||'Passwords do not match'}))),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"absolute inset-y-0 right-0 pr-3 flex items-center\",onClick:()=>setShowConfirmPassword(s=>!s),children:showConfirmPassword?/*#__PURE__*/_jsx(EyeOff,{className:\"h-5 w-5 text-gray-400\"}):/*#__PURE__*/_jsx(Eye,{className:\"h-5 w-5 text-gray-400\"})})]}),errors.confirmPassword&&/*#__PURE__*/_jsx(\"p\",{className:\"form-error\",children:errors.confirmPassword.message})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",_objectSpread({id:\"terms\",type:\"checkbox\",className:\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"},register('terms',{required:'You must accept the terms and conditions'}))),/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"terms\",className:\"ml-2 block text-sm text-gray-900\",children:[\"I agree to the\",' ',/*#__PURE__*/_jsx(Link,{to:\"/terms\",className:\"text-primary-600 hover:text-primary-500\",children:\"Terms and Conditions\"}),\" and\",' ',/*#__PURE__*/_jsx(Link,{to:\"/privacy\",className:\"text-primary-600 hover:text-primary-500\",children:\"Privacy Policy\"})]})]}),errors.terms&&/*#__PURE__*/_jsx(\"p\",{className:\"form-error\",children:errors.terms.message}),(errors.root||formError)&&/*#__PURE__*/_jsx(\"div\",{className:\"rounded-md bg-red-50 p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(Lock,{className:\"h-5 w-5 text-red-400\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-3\",children:/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-medium text-red-800\",children:((_errors$root=errors.root)===null||_errors$root===void 0?void 0:_errors$root.message)||formError})})]})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:isLoading,className:\"w-full btn btn-primary btn-lg flex items-center justify-center space-x-2\",children:isLoading?/*#__PURE__*/_jsx(LoadingSpinner,{size:\"small\",text:\"\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(UserPlus,{className:\"w-5 h-5\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Create Account\"})]})})})]})})}),/*#__PURE__*/_jsx(OTPModal,{email:emailValue,open:otpOpen,onClose:()=>setOtpOpen(false),onVerified:afterVerified})]});};export default Register;","map":{"version":3,"names":["React","useEffect","useState","Link","useNavigate","useForm","User","Mail","Lock","Eye","EyeOff","BookOpen","GraduationCap","UserPlus","RotateCcw","CheckCircle2","XCircle","LoadingSpinner","Logo","authAPI","logApiBase","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","OTPModal","_ref","email","open","onClose","onVerified","code","setCode","verifying","setVerifying","resending","setResending","cooldown","setCooldown","serverMsg","setServerMsg","t","setInterval","s","clearInterval","verify","String","trim","length","type","text","resp","verifyOTP","toLowerCase","otp","e","message","resend","resendOTP","className","children","onClick","inputMode","maxLength","value","onChange","target","replace","placeholder","concat","disabled","title","Register","_errors$root","showPassword","setShowPassword","showConfirmPassword","setShowConfirmPassword","isLoading","setIsLoading","otpOpen","setOtpOpen","formError","setFormError","navigate","register","handleSubmit","formState","errors","watch","setError","defaultValues","userType","password","emailValue","onSubmit","data","payload","firstName","lastName","course","yearLevel","studentId","undefined","Object","keys","forEach","k","reg","mailError","_","requiresVerification","state","justRegistered","error","console","afterVerified","justVerified","userTypes","label","icon","size","to","noValidate","map","Icon","_objectSpread","required","defaultChecked","htmlFor","id","minLength","autoComplete","pattern","validate","confirmPassword","terms","root"],"sources":["/Users/macbookair/Desktop/AeroJobs/AeroJob/frontend/src/pages/Register.js"],"sourcesContent":["// src/pages/Register.js\r\nimport React, { useEffect, useState } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport { useForm } from 'react-hook-form';\r\nimport {\r\n  User,\r\n  Mail,\r\n  Lock,\r\n  Eye,\r\n  EyeOff,\r\n  BookOpen,\r\n  GraduationCap,\r\n  UserPlus,\r\n  RotateCcw,\r\n  CheckCircle2,\r\n  XCircle\r\n} from 'lucide-react';\r\nimport LoadingSpinner from '../components/LoadingSpinner';\r\nimport Logo from '../components/Logo';\r\nimport { authAPI, logApiBase } from '../utils/api';\r\n\r\n/* ------------------------------- OTP Modal ------------------------------- */\r\nfunction OTPModal({ email, open, onClose, onVerified }) {\r\n  const [code, setCode] = useState('');\r\n  const [verifying, setVerifying] = useState(false);\r\n  const [resending, setResending] = useState(false);\r\n  const [cooldown, setCooldown] = useState(60);\r\n  const [serverMsg, setServerMsg] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (!open) return;\r\n    setCode('');\r\n    setServerMsg(null);\r\n    setCooldown(60);\r\n    const t = setInterval(() => setCooldown((s) => (s > 0 ? s - 1 : 0)), 1000);\r\n    return () => clearInterval(t);\r\n  }, [open]);\r\n\r\n  const verify = async () => {\r\n    if (String(code).trim().length !== 6) {\r\n      setServerMsg({ type: 'error', text: 'Enter the 6-digit code.' });\r\n      return;\r\n    }\r\n    try {\r\n      setVerifying(true);\r\n      setServerMsg(null);\r\n      // ✅ New API: expects { email, otp }\r\n      const resp = await authAPI.verifyOTP({\r\n        email: String(email || '').trim().toLowerCase(),\r\n        otp: String(code).trim(),\r\n      });\r\n      // If your backend returns token/user you can use resp here\r\n      setServerMsg({ type: 'success', text: 'Email verified.' });\r\n      onVerified?.(resp);\r\n    } catch (e) {\r\n      setServerMsg({ type: 'error', text: e.message || 'Verification failed' });\r\n    } finally {\r\n      setVerifying(false);\r\n    }\r\n  };\r\n\r\n  const resend = async () => {\r\n    if (cooldown > 0) return;\r\n    try {\r\n      setResending(true);\r\n      setServerMsg(null);\r\n      // ✅ New API: expects { email }\r\n      await authAPI.resendOTP({ email: String(email || '').trim().toLowerCase() });\r\n      setServerMsg({ type: 'success', text: 'OTP resent. Check your email.' });\r\n      setCooldown(60);\r\n    } catch (e) {\r\n      setServerMsg({ type: 'error', text: e.message || 'Resend failed' });\r\n    } finally {\r\n      setResending(false);\r\n    }\r\n  };\r\n\r\n  if (!open) return null;\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/40\">\r\n      <div className=\"bg-white rounded-lg shadow-xl w-full max-w-sm p-5\">\r\n        <div className=\"flex items-start justify-between\">\r\n          <div>\r\n            <h3 className=\"text-lg font-semibold\">Verify your email</h3>\r\n            <p className=\"text-sm text-gray-600 mt-1\">\r\n              We sent a 6-digit code to <b>{email}</b>. Enter it below.\r\n            </p>\r\n          </div>\r\n          <button onClick={onClose} className=\"text-gray-400 hover:text-gray-600\">✕</button>\r\n        </div>\r\n\r\n        <input\r\n          type=\"text\"\r\n          inputMode=\"numeric\"\r\n          maxLength={6}\r\n          value={code}\r\n          onChange={(e) => setCode(e.target.value.replace(/\\D/g, ''))}\r\n          className=\"mt-4 w-full border rounded px-3 py-2 tracking-widest text-center text-xl\"\r\n          placeholder=\"••••••\"\r\n        />\r\n\r\n        {serverMsg && (\r\n          <div\r\n            className={`mt-3 flex items-center gap-2 text-sm ${\r\n              serverMsg.type === 'error' ? 'text-red-600' : 'text-green-600'\r\n            }`}\r\n          >\r\n            {serverMsg.type === 'error'\r\n              ? <XCircle className=\"w-4 h-4\" />\r\n              : <CheckCircle2 className=\"w-4 h-4\" />}\r\n            <span>{serverMsg.text}</span>\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"mt-4 flex items-center justify-between\">\r\n          <button onClick={onClose} className=\"px-3 py-2 rounded border text-gray-700\">\r\n            Cancel\r\n          </button>\r\n\r\n          <div className=\"flex items-center gap-2\">\r\n            <button\r\n              onClick={resend}\r\n              className=\"px-3 py-2 rounded border flex items-center gap-1 disabled:opacity-50\"\r\n              disabled={cooldown > 0 || resending}\r\n              title={cooldown > 0 ? `Wait ${cooldown}s` : 'Resend code'}\r\n            >\r\n              <RotateCcw className=\"w-4 h-4\" />\r\n              {cooldown > 0 ? `Resend in ${cooldown}s` : resending ? 'Resending…' : 'Resend OTP'}\r\n            </button>\r\n\r\n            <button\r\n              onClick={verify}\r\n              className=\"px-4 py-2 rounded bg-blue-600 text-white disabled:opacity-50\"\r\n              disabled={verifying}\r\n            >\r\n              {verifying ? 'Verifying…' : 'Verify'}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n/* -------------------------------- Register -------------------------------- */\r\nconst Register = () => {\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [showConfirmPassword, setShowConfirmPassword] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [otpOpen, setOtpOpen] = useState(false);\r\n  const [formError, setFormError] = useState(null);\r\n\r\n  const navigate = useNavigate();\r\n\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    formState: { errors },\r\n    watch,\r\n    setError,\r\n  } = useForm({ defaultValues: { userType: 'student' } });\r\n\r\n  useEffect(() => {\r\n    logApiBase(); // will log resolved API base/root\r\n  }, []);\r\n\r\n  const password = watch('password');\r\n  const userType = watch('userType');\r\n  const emailValue = (watch('email') || '').trim().toLowerCase();\r\n\r\n  const onSubmit = async (data) => {\r\n    setIsLoading(true);\r\n    setFormError(null);\r\n    try {\r\n      const payload = {\r\n        firstName: (data.firstName || '').trim(),\r\n        lastName: (data.lastName || '').trim(),\r\n        email: emailValue,\r\n        password: data.password,\r\n        userType: data.userType || 'student',\r\n        course: (data.course || '').trim(),\r\n        yearLevel: data.yearLevel || '',\r\n        studentId: data.userType === 'student' ? (data.studentId || '').trim() : undefined,\r\n      };\r\n      // remove empty keys\r\n      Object.keys(payload).forEach((k) => {\r\n        if (payload[k] === '' || payload[k] == null) delete payload[k];\r\n      });\r\n\r\n      const reg = await authAPI.register(payload);\r\n      // If email send failed server-side, transparently resend now\r\n      if (reg?.mailError) {\r\n        try { await authAPI.resendOTP({ email: payload.email }); } catch (_) {}\r\n      }\r\n      if (reg?.requiresVerification !== false) {\r\n        // Normal path: open modal for user to enter code\r\n        setOtpOpen(true);\r\n      } else {\r\n        // (Fallback) If verification is somehow not required\r\n        navigate('/login', { replace: true, state: { justRegistered: true } });\r\n      }\r\n    } catch (error) {\r\n      console.error('Registration failed:', error);\r\n      setError('root', { type: 'manual', message: error?.message || 'Registration failed' });\r\n      setFormError(error?.message || 'Registration failed');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  // Called after OTP verified successfully\r\n  const afterVerified = () => {\r\n    setOtpOpen(false);\r\n    navigate('/login', { replace: true, state: { justVerified: true } });\r\n  };\r\n\r\n  const userTypes = [\r\n    { value: 'student', label: 'Student', icon: BookOpen },\r\n    { value: 'alumni', label: 'Alumni', icon: GraduationCap },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8\">\r\n      <div className=\"sm:mx-auto sm:w-full sm:max-w-md\">\r\n        <div className=\"flex justify-center\">\r\n          <Logo size={100} />\r\n        </div>\r\n        <h2 className=\"mt-6 text-center text-3xl font-heading font-bold text-gray-900\">\r\n          Create your account\r\n        </h2>\r\n        <p className=\"mt-2 text-center text-sm text-gray-600\">\r\n          Or{' '}\r\n          <Link to=\"/login\" className=\"font-medium text-primary-600 hover:text-primary-500\">\r\n            sign in to your existing account\r\n          </Link>\r\n        </p>\r\n      </div>\r\n\r\n      <div className=\"mt-8 sm:mx-auto sm:w-full sm:max-w-md\">\r\n        <div className=\"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10\">\r\n          <form className=\"space-y-6\" onSubmit={handleSubmit(onSubmit)} noValidate>\r\n            {/* User Type */}\r\n            <div>\r\n              <label className=\"form-label\">I am a</label>\r\n              <div className=\"grid grid-cols-2 gap-3 mt-2\">\r\n                {userTypes.map((type) => {\r\n                  const Icon = type.icon;\r\n                  return (\r\n                    <label\r\n                      key={type.value}\r\n                      className=\"relative flex cursor-pointer rounded-lg border border-gray-300 bg-white p-4 focus:outline-none hover:border-primary-500 has-[:checked]:border-primary-600 has-[:checked]:ring-2 has-[:checked]:ring-primary-600\"\r\n                    >\r\n                      <input\r\n                        type=\"radio\"\r\n                        value={type.value}\r\n                        className=\"sr-only\"\r\n                        {...register('userType', { required: 'Please select your user type' })}\r\n                        defaultChecked={type.value === 'student'}\r\n                      />\r\n                      <div className=\"flex flex-col items-center\">\r\n                        <Icon className=\"h-6 w-6 text-gray-400\" />\r\n                        <span className=\"mt-2 text-sm font-medium text-gray-900\">{type.label}</span>\r\n                      </div>\r\n                    </label>\r\n                  );\r\n                })}\r\n              </div>\r\n              {errors.userType && <p className=\"form-error\">{errors.userType.message}</p>}\r\n            </div>\r\n\r\n            {/* First Name */}\r\n            <div>\r\n              <label htmlFor=\"firstName\" className=\"form-label\">First Name</label>\r\n              <div className=\"relative mt-1\">\r\n                <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\r\n                  <User className=\"h-5 w-5 text-gray-400\" />\r\n                </div>\r\n                <input\r\n                  id=\"firstName\"\r\n                  type=\"text\"\r\n                  className=\"input pl-10\"\r\n                  placeholder=\"Enter your first name\"\r\n                  {...register('firstName', {\r\n                    required: 'First name is required',\r\n                    minLength: { value: 2, message: 'First name must be at least 2 characters' },\r\n                    maxLength: { value: 50, message: 'First name must be less than 50 characters' },\r\n                  })}\r\n                />\r\n              </div>\r\n              {errors.firstName && <p className=\"form-error\">{errors.firstName.message}</p>}\r\n            </div>\r\n\r\n            {/* Last Name */}\r\n            <div>\r\n              <label htmlFor=\"lastName\" className=\"form-label\">Last Name</label>\r\n              <div className=\"relative mt-1\">\r\n                <div className=\"absolute inset-y-0 left-0 left pl-3 flex items-center pointer-events-none\">\r\n                  <User className=\"h-5 w-5 text-gray-400\" />\r\n                </div>\r\n                <input\r\n                  id=\"lastName\"\r\n                  type=\"text\"\r\n                  className=\"input pl-10\"\r\n                  placeholder=\"Enter your last name\"\r\n                  {...register('lastName', {\r\n                    required: 'Last name is required',\r\n                    minLength: { value: 2, message: 'Last name must be at least 2 characters' },\r\n                    maxLength: { value: 50, message: 'Last name must be less than 50 characters' },\r\n                  })}\r\n                />\r\n              </div>\r\n              {errors.lastName && <p className=\"form-error\">{errors.lastName.message}</p>}\r\n            </div>\r\n\r\n            {/* Email */}\r\n            <div>\r\n              <label htmlFor=\"email\" className=\"form-label\">Email address</label>\r\n              <div className=\"relative mt-1\">\r\n                <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\r\n                  <Mail className=\"h-5 w-5 text-gray-400\" />\r\n                </div>\r\n                <input\r\n                  id=\"email\"\r\n                  type=\"email\"\r\n                  autoComplete=\"email\"\r\n                  className=\"input pl-10\"\r\n                  placeholder=\"Enter your email (must be @philsca.edu.ph)\"\r\n                  {...register('email', {\r\n                    required: 'Email is required',\r\n                    pattern: {\r\n                      value: /^[A-Za-z0-9._%+-]+@philsca\\.edu\\.ph$/,\r\n                      message: 'Only @philsca.edu.ph emails are allowed',\r\n                    },\r\n                  })}\r\n                />\r\n              </div>\r\n              {errors.email && <p className=\"form-error\">{errors.email.message}</p>}\r\n            </div>\r\n\r\n            {/* Student ID (students only) */}\r\n            <div>\r\n              <label htmlFor=\"studentId\" className=\"form-label\">Student ID (for students only)</label>\r\n              <input\r\n                id=\"studentId\"\r\n                type=\"text\"\r\n                className=\"input\"\r\n                placeholder=\"Enter your student ID\"\r\n                {...register('studentId', {\r\n                  required: userType === 'student' ? 'Student ID is required for students' : false,\r\n                })}\r\n              />\r\n              {errors.studentId && <p className=\"form-error\">{errors.studentId.message}</p>}\r\n            </div>\r\n\r\n            {/* Course */}\r\n            <div>\r\n              <label htmlFor=\"course\" className=\"form-label\">Course</label>\r\n              <select\r\n                id=\"course\"\r\n                className=\"input\"\r\n                {...register('course', {\r\n                  required: userType === 'student' ? 'Course is required for students' : false,\r\n                })}\r\n              >\r\n                <option value=\"\">Select your course</option>\r\n                <optgroup label=\"INSTITUTE OF ENGINEERING AND TECHNOLOGY\">\r\n                  <option value=\"BS in Aeronautical Engineering\">BS in Aeronautical Engineering</option>\r\n                  <option value=\"BS in Air Transportation Major in Advance Flying\">BS in Air Transportation Major in Advance Flying</option>\r\n                  <option value=\"BS in Aircraft Maintenance Technology\">BS in Aircraft Maintenance Technology</option>\r\n                  <option value=\"BS in Aviation Electronics Technology\">BS in Aviation Electronics Technology</option>\r\n                  <option value=\"Associate in Aircraft Maintenance Technology\">Associate in Aircraft Maintenance Technology</option>\r\n                  <option value=\"Associate in Aviation Electronics Technology\">Associate in Aviation Electronics Technology</option>\r\n                </optgroup>\r\n                <optgroup label=\"INSTITUTE OF LIBERAL ARTS AND SCIENCES\">\r\n                  <option value=\"BS in Aviation Communication Major in Flight Operations\">BS in Aviation Communication Major in Flight Operations</option>\r\n                  <option value=\"BS in Aviation Tourism Major in Travel Management\">BS in Aviation Tourism Major in Travel Management</option>\r\n                  <option value=\"BS in Supply Management with Specialization in Aviation Logistics\">BS in Supply Management with Specialization in Aviation Logistics</option>\r\n                  <option value=\"BS in Aviation Safety and Security Management\">BS in Aviation Safety and Security Management</option>\r\n                </optgroup>\r\n                <optgroup label=\"INSTITUTE OF COMPUTER STUDIES\">\r\n                  <option value=\"BS in Information Technology with Specialization in Aviation Information Technology\">BS in Information Technology with Specialization in Aviation Information Technology</option>\r\n                  <option value=\"BS in Information System with Specialization in Aviation Information System\">BS in Information System with Specialization in Aviation Information System</option>\r\n                </optgroup>\r\n                <optgroup label=\"INSTITUTE OF GRADUATE STUDIES\">\r\n                  <option value=\"Master of Education in Aeronautical Management\">Master of Education in Aeronautical Management</option>\r\n                  <option value=\"Master in Public Administration Major in Government and Airport Administration\">Master in Public Administration Major in Government and Airport Administration</option>\r\n                </optgroup>\r\n              </select>\r\n              {errors.course && <p className=\"form-error\">{errors.course.message}</p>}\r\n            </div>\r\n\r\n            {/* Year Level */}\r\n            <div>\r\n              <label htmlFor=\"yearLevel\" className=\"form-label\">Year Level</label>\r\n              <select\r\n                id=\"yearLevel\"\r\n                className=\"input\"\r\n                {...register('yearLevel', {\r\n                  required: userType === 'student' ? 'Year level is required for students' : false,\r\n                })}\r\n              >\r\n                <option value=\"\">Select year level</option>\r\n                <option value=\"4th Year\">4th Year</option>\r\n                <option value=\"Graduate\">Graduate</option>\r\n              </select>\r\n              {errors.yearLevel && <p className=\"form-error\">{errors.yearLevel.message}</p>}\r\n            </div>\r\n\r\n            {/* Password */}\r\n            <div>\r\n              <label htmlFor=\"password\" className=\"form-label\">Password</label>\r\n              <div className=\"relative mt-1\">\r\n                <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\r\n                  <Lock className=\"h-5 w-5 text-gray-400\" />\r\n                </div>\r\n                <input\r\n                  id=\"password\"\r\n                  type={showPassword ? 'text' : 'password'}\r\n                  className=\"input pl-10 pr-10\"\r\n                  placeholder=\"Create a password\"\r\n                  {...register('password', {\r\n                    required: 'Password is required',\r\n                    minLength: { value: 6, message: 'Password must be at least 6 characters' },\r\n                  })}\r\n                />\r\n                <button\r\n                  type=\"button\"\r\n                  className=\"absolute inset-y-0 right-0 pr-3 flex items-center\"\r\n                  onClick={() => setShowPassword((s) => !s)}\r\n                >\r\n                  {showPassword ? <EyeOff className=\"h-5 w-5 text-gray-400\" /> : <Eye className=\"h-5 w-5 text-gray-400\" />}\r\n                </button>\r\n              </div>\r\n              {errors.password && <p className=\"form-error\">{errors.password.message}</p>}\r\n            </div>\r\n\r\n            {/* Confirm Password */}\r\n            <div>\r\n              <label htmlFor=\"confirmPassword\" className=\"form-label\">Confirm Password</label>\r\n              <div className=\"relative mt-1\">\r\n                <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\r\n                  <Lock className=\"h-5 w-5 text-gray-400\" />\r\n                </div>\r\n                <input\r\n                  id=\"confirmPassword\"\r\n                  type={showConfirmPassword ? 'text' : 'password'}\r\n                  className=\"input pl-10 pr-10\"\r\n                  placeholder=\"Confirm your password\"\r\n                  {...register('confirmPassword', {\r\n                    required: 'Please confirm your password',\r\n                    validate: (value) => value === password || 'Passwords do not match',\r\n                  })}\r\n                />\r\n                <button\r\n                  type=\"button\"\r\n                  className=\"absolute inset-y-0 right-0 pr-3 flex items-center\"\r\n                  onClick={() => setShowConfirmPassword((s) => !s)}\r\n                >\r\n                  {showConfirmPassword ? <EyeOff className=\"h-5 w-5 text-gray-400\" /> : <Eye className=\"h-5 w-5 text-gray-400\" />}\r\n                </button>\r\n              </div>\r\n              {errors.confirmPassword && <p className=\"form-error\">{errors.confirmPassword.message}</p>}\r\n            </div>\r\n\r\n            {/* Terms */}\r\n            <div className=\"flex items-center\">\r\n              <input\r\n                id=\"terms\"\r\n                type=\"checkbox\"\r\n                className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"\r\n                {...register('terms', { required: 'You must accept the terms and conditions' })}\r\n              />\r\n              <label htmlFor=\"terms\" className=\"ml-2 block text-sm text-gray-900\">\r\n                I agree to the{' '}\r\n                <Link to=\"/terms\" className=\"text-primary-600 hover:text-primary-500\">Terms and Conditions</Link> and{' '}\r\n                <Link to=\"/privacy\" className=\"text-primary-600 hover:text-primary-500\">Privacy Policy</Link>\r\n              </label>\r\n            </div>\r\n            {errors.terms && <p className=\"form-error\">{errors.terms.message}</p>}\r\n\r\n            {/* Error Message */}\r\n            {(errors.root || formError) && (\r\n              <div className=\"rounded-md bg-red-50 p-4\">\r\n                <div className=\"flex\">\r\n                  <div className=\"flex-shrink-0\">\r\n                    <Lock className=\"h-5 w-5 text-red-400\" />\r\n                  </div>\r\n                  <div className=\"ml-3\">\r\n                    <h3 className=\"text-sm font-medium text-red-800\">\r\n                      {errors.root?.message || formError}\r\n                    </h3>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* Submit */}\r\n            <div>\r\n              <button\r\n                type=\"submit\"\r\n                disabled={isLoading}\r\n                className=\"w-full btn btn-primary btn-lg flex items-center justify-center space-x-2\"\r\n              >\r\n                {isLoading ? (\r\n                  <LoadingSpinner size=\"small\" text=\"\" />\r\n                ) : (\r\n                  <>\r\n                    <UserPlus className=\"w-5 h-5\" />\r\n                    <span>Create Account</span>\r\n                  </>\r\n                )}\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n\r\n      {/* OTP Modal */}\r\n      <OTPModal\r\n        email={emailValue}\r\n        open={otpOpen}\r\n        onClose={() => setOtpOpen(false)}\r\n        onVerified={afterVerified}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Register;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}