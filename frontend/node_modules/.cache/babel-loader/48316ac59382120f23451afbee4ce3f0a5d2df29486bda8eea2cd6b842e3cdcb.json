{"ast":null,"code":"import _objectSpread from\"/Users/macbookair/Desktop/AeroJobs/AeroJob/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// src/pages/Dashboard.js\nimport React,{useEffect,useRef,useState}from'react';import{Link}from'react-router-dom';import{Briefcase,Users,Building2,BarChart3,TrendingUp,FileText,UserCheck,Paintbrush,ClipboardList,Eye,ListChecks,X}from'lucide-react';import{useAuth}from'../contexts/AuthContext';import{adminAPI,usersAPI,surveysAPI}from'../utils/api';import toast from'react-hot-toast';import LoadingSpinner from'../components/LoadingSpinner';// Charts\nimport{Bar}from'react-chartjs-2';import{Chart as ChartJS,CategoryScale,LinearScale,BarElement,Title,Tooltip,Legend}from'chart.js';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";ChartJS.register(CategoryScale,LinearScale,BarElement,Title,Tooltip,Legend);/* -------------------- Theme colors for charts -------------------- */const THEME_COLORS={default:{primary:'rgba(37, 99, 235, 0.72)',secondary:'rgba(96, 165, 250, 0.62)'},emerald:{primary:'rgba(5, 150, 105, 0.72)',secondary:'rgba(52, 211, 153, 0.62)'},rose:{primary:'rgba(225, 29, 72, 0.72)',secondary:'rgba(251, 113, 133, 0.62)'},philsca:{primary:'rgba(217, 119, 6, 0.72)',secondary:'rgba(251, 191, 36, 0.62)'}};const THEMES=[{id:'default',name:'Default (Blue)',className:'theme-default'},{id:'emerald',name:'Emerald',className:'theme-emerald'},{id:'rose',name:'Rose',className:'theme-rose'},{id:'philsca',name:'PhilSCA (Gold)',className:'theme-philsca'}];const initialStats={totalJobs:0,totalCompanies:0,totalUsers:0,pendingApproval:0,newUsers:0,// Optional analytics\nroleCounts:{students:0,alumni:0,admins:0},topSearches:[],studentsByCourse:[]};export default function Dashboard(){var _THEMES$find,_stats$roleCounts,_stats$roleCounts2,_stats$roleCounts3;const{user,isAdmin,isStudentOrAlumni}=useAuth();const[stats,setStats]=useState(initialStats);const[loading,setLoading]=useState(true);// === Student Surveys modal state (no impact to admin) ===\nconst[surveyModalOpen,setSurveyModalOpen]=useState(false);const[pendingSurveys,setPendingSurveys]=useState([]);const[pendingLoading,setPendingLoading]=useState(false);const[pendingError,setPendingError]=useState(null);const openBtnRef=useRef(null);// Theme state (admins can switch; stored locally)\nconst[adminTheme,setAdminTheme]=useState(()=>typeof window!=='undefined'&&localStorage.getItem('admin_theme')||'default');const themeClass=((_THEMES$find=THEMES.find(t=>t.id===adminTheme))===null||_THEMES$find===void 0?void 0:_THEMES$find.className)||'theme-default';const themeColors=THEME_COLORS[adminTheme]||THEME_COLORS.default;useEffect(()=>{if(isAdmin())localStorage.setItem('admin_theme',adminTheme);},[adminTheme,isAdmin]);/* -------------------- Fetch counts + users (build charts client-side) -------------------- */useEffect(()=>{let mounted=true;(async()=>{try{setLoading(true);const[s,users]=await Promise.all([adminAPI.getStats().catch(()=>null),usersAPI.list().catch(()=>[])]);if(!mounted)return;// Base stats from /admin/stats (if available)\nconst nextStats={totalJobs:Number((s===null||s===void 0?void 0:s.totalJobs)||0),totalCompanies:Number((s===null||s===void 0?void 0:s.totalCompanies)||0),totalUsers:Number((s===null||s===void 0?void 0:s.totalUsers)||0),pendingApproval:Number((s===null||s===void 0?void 0:s.pendingApproval)||0),newUsers:Number((s===null||s===void 0?void 0:s.newUsers)||0),roleCounts:(s===null||s===void 0?void 0:s.roleCounts)||{students:0,alumni:0,admins:0},topSearches:Array.isArray(s===null||s===void 0?void 0:s.topSearches)?s.topSearches:[],studentsByCourse:Array.isArray(s===null||s===void 0?void 0:s.studentsByCourse)?s.studentsByCourse:[]// ✅\n};// If roleCounts missing/zero, compute from /users\nconst computedRoleCounts=(()=>{const counts={admins:0,students:0,alumni:0};if(Array.isArray(users)){for(const u of users){const role=((u===null||u===void 0?void 0:u.role)||(u===null||u===void 0?void 0:u.userType)||(u===null||u===void 0?void 0:u.type)||'').toLowerCase();if(role==='admin')counts.admins+=1;else if(role==='student')counts.students+=1;else if(role==='alumni')counts.alumni+=1;}}return counts;})();// If studentsByCourse missing, compute from /users (students only)\nconst computedStudentsByCourse=(()=>{const map={};if(Array.isArray(users)){for(const u of users){const role=((u===null||u===void 0?void 0:u.role)||(u===null||u===void 0?void 0:u.userType)||'').toLowerCase();if(role!=='student')continue;const course=(u===null||u===void 0?void 0:u.course)||(u===null||u===void 0?void 0:u.program)||(u===null||u===void 0?void 0:u.degree)||'Unknown'||'Unknown';map[course]=(map[course]||0)+1;}}return Object.entries(map).map(_ref=>{let[course,total]=_ref;return{course,total};}).sort((a,b)=>b.total-a.total).slice(0,15);})();const hasServerRoleData=Object.values(nextStats.roleCounts||{}).some(v=>Number(v)>0);nextStats.roleCounts=hasServerRoleData?nextStats.roleCounts:computedRoleCounts;const hasServerCourseData=Array.isArray(nextStats.studentsByCourse)&&nextStats.studentsByCourse.length>0;nextStats.studentsByCourse=hasServerCourseData?nextStats.studentsByCourse:computedStudentsByCourse;if(!nextStats.totalUsers&&Array.isArray(users)){nextStats.totalUsers=users.length;}setStats(nextStats);}catch(e){console.error('Failed to load dashboard:',(e===null||e===void 0?void 0:e.message)||e);setStats(initialStats);}finally{if(mounted)setLoading(false);}})();return()=>{mounted=false;};},[]);/* -------------------- Helpers: open/close surveys modal -------------------- */const openSurveysModal=async()=>{setSurveyModalOpen(true);setPendingLoading(true);setPendingError(null);try{const list=await surveysAPI.forMe();setPendingSurveys(Array.isArray(list)?list:[]);}catch(e){const msg=(e===null||e===void 0?void 0:e.message)||'Failed to load surveys';setPendingError(msg);toast.error(msg);}finally{setPendingLoading(false);}};const closeSurveysModal=()=>{setSurveyModalOpen(false);// return focus to opener for accessibility\nif(openBtnRef.current){openBtnRef.current.focus();}};if(loading)return/*#__PURE__*/_jsx(LoadingSpinner,{text:\"Loading dashboard...\"});/* -------------------- Small UI helpers -------------------- */const StatCard=_ref2=>{let{icon:Icon,title,value}=_ref2;return/*#__PURE__*/_jsxs(\"div\",{className:\"stats-card p-4 text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-9 h-9 bg-primary-100 text-primary-600 rounded-md flex items-center justify-center mb-2 mx-auto\",children:/*#__PURE__*/_jsx(Icon,{className:\"w-5 h-5\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xl font-semibold text-gray-900\",children:value!==null&&value!==void 0?value:0}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-600\",children:title})]});};const hasRoleData=Object.values(stats.roleCounts||{}).some(v=>Number(v)>0);const hasSearchData=Array.isArray(stats.topSearches)&&stats.topSearches.length>0;const hasCourseData=Array.isArray(stats.studentsByCourse)&&stats.studentsByCourse.length>0;// ✅\nconst roleData={labels:['Students','Alumni','Admins'],datasets:[{label:'Users',data:[Number(((_stats$roleCounts=stats.roleCounts)===null||_stats$roleCounts===void 0?void 0:_stats$roleCounts.students)||0),Number(((_stats$roleCounts2=stats.roleCounts)===null||_stats$roleCounts2===void 0?void 0:_stats$roleCounts2.alumni)||0),Number(((_stats$roleCounts3=stats.roleCounts)===null||_stats$roleCounts3===void 0?void 0:_stats$roleCounts3.admins)||0)],backgroundColor:themeColors.primary,borderRadius:6}]};const searchesData={labels:stats.topSearches.map(s=>s.term),datasets:[{label:'Searches',data:stats.topSearches.map(s=>Number(s.total||s.count||0)),backgroundColor:themeColors.secondary,borderRadius:6}]};// ✅ Students per Course dataset\nconst coursesData={labels:stats.studentsByCourse.map(c=>c.course||'Unknown'),datasets:[{label:'Students',data:stats.studentsByCourse.map(c=>Number(c.total||c.count||0)),backgroundColor:themeColors.primary,borderRadius:6}]};const baseOptions={responsive:true,maintainAspectRatio:false,plugins:{legend:{display:false},tooltip:{titleFont:{size:12},bodyFont:{size:11}}},scales:{x:{ticks:{font:{size:11},color:'#4B5563'},grid:{display:false}},y:{beginAtZero:true,ticks:{font:{size:11},color:'#4B5563',stepSize:1},grid:{color:'#E5E7EB'}}},elements:{bar:{borderSkipped:false}}};const verticalOptions=baseOptions;const horizontalOptions=_objectSpread(_objectSpread({},baseOptions),{},{indexAxis:'y'});/* -------------------- Admin wrapper adds CSS variables per theme -------------------- */const AdminWrapper=_ref3=>{let{children}=_ref3;return/*#__PURE__*/_jsxs(\"div\",{className:\"admin-portal \".concat(themeClass),children:[/*#__PURE__*/_jsx(\"style\",{children:\"\\n        .admin-portal.theme-default { --primary-100: 219 234 254; --primary-400: 96 165 250; --primary-600: 37 99 235; --primary-700: 29 78 216; }\\n        .admin-portal.theme-emerald { --primary-100: 209 250 229; --primary-400: 52 211 153; --primary-600: 5 150 105; --primary-700: 4 120 87; }\\n        .admin-portal.theme-rose    { --primary-100: 255 228 230; --primary-400: 251 113 133; --primary-600: 225 29 72;  --primary-700: 190 18 60; }\\n        .admin-portal.theme-philsca { --primary-100: 254 243 199; --primary-400: 251 191 36;  --primary-600: 217 119 6;  --primary-700: 180 83 9; }\\n        .admin-portal .text-primary-600 { color: rgb(var(--primary-600)) !important; }\\n        .admin-portal .bg-primary-100 { background-color: rgb(var(--primary-100)) !important; }\\n        .admin-portal .btn-primary { background-color: rgb(var(--primary-600)) !important; }\\n        .admin-portal .btn-primary:hover { background-color: rgb(var(--primary-700)) !important; }\\n      \"}),children]});};/* -------------------- Admin page -------------------- */const adminPage=/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6 flex items-start justify-between gap-3\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-2xl font-heading font-bold text-gray-900\",children:[\"Welcome back, \",(user===null||user===void 0?void 0:user.firstName)||'Admin',\"!\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mt-1\",children:\"Manage the AeroJob platform and monitor system activity.\"})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"inline-flex items-center gap-2 text-xs text-gray-700\",children:[/*#__PURE__*/_jsx(Paintbrush,{className:\"w-4 h-4 text-primary-600\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Theme\"}),/*#__PURE__*/_jsx(\"select\",{value:adminTheme,onChange:e=>setAdminTheme(e.target.value),className:\"input w-auto py-1 px-2 text-xs\",children:THEMES.map(t=>/*#__PURE__*/_jsx(\"option\",{value:t.id,children:t.name},t.id))})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 md:grid-cols-4 gap-3 mb-6\",children:[/*#__PURE__*/_jsx(StatCard,{icon:Briefcase,title:\"Total Jobs\",value:stats.totalJobs}),/*#__PURE__*/_jsx(StatCard,{icon:FileText,title:\"Pending Approval\",value:stats.pendingApproval}),/*#__PURE__*/_jsx(StatCard,{icon:Users,title:\"Total Users\",value:stats.totalUsers}),/*#__PURE__*/_jsx(StatCard,{icon:UserCheck,title:\"New Users (30d)\",value:stats.newUsers})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-4 py-3 border-b\",children:/*#__PURE__*/_jsxs(\"h3\",{className:\"text-sm font-semibold text-gray-900 flex items-center\",children:[/*#__PURE__*/_jsx(BarChart3,{className:\"w-4 h-4 mr-2 text-primary-600\"}),\"Total Users by Role\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"p-4 h-48\",children:hasRoleData?/*#__PURE__*/_jsx(Bar,{data:roleData,options:verticalOptions}):/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500 text-center py-8\",children:\"No data available\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"px-4 py-2 text-[11px] text-gray-500 border-t\",children:\"Shows current totals per role.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-4 py-3 border-b\",children:/*#__PURE__*/_jsxs(\"h3\",{className:\"text-sm font-semibold text-gray-900 flex items-center\",children:[/*#__PURE__*/_jsx(TrendingUp,{className:\"w-4 h-4 mr-2 text-primary-600\"}),\"Most Searched Jobs\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"p-4 h-48\",children:hasSearchData?/*#__PURE__*/_jsx(Bar,{data:searchesData,options:_objectSpread(_objectSpread({},horizontalOptions),{},{indexAxis:'y'})}):/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500 text-center py-8\",children:\"No data available\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"px-4 py-2 text-[11px] text-gray-500 border-t\",children:\"Aggregated searches by users & alumni.\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-6 mt-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-4 py-3 border-b\",children:/*#__PURE__*/_jsxs(\"h3\",{className:\"text-sm font-semibold text-gray-900 flex items-center\",children:[/*#__PURE__*/_jsx(BarChart3,{className:\"w-4 h-4 mr-2 text-primary-600\"}),\"Students per Course\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"p-4 h-56\",children:hasCourseData?/*#__PURE__*/_jsx(Bar,{data:coursesData,options:_objectSpread(_objectSpread({},horizontalOptions),{},{indexAxis:'y'})}):/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500 text-center py-8\",children:\"No data available\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"px-4 py-2 text-[11px] text-gray-500 border-t\",children:\"Counts include users with the Student role. \\u201CUnknown\\u201D means no course set.\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-semibold text-gray-900 mb-3\",children:\"Quick Actions\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-3\",children:[/*#__PURE__*/_jsxs(Link,{to:\"/admin/jobs\",className:\"card p-5 text-center hover:shadow-sm transition-shadow\",children:[/*#__PURE__*/_jsx(Briefcase,{className:\"w-7 h-7 text-primary-600 mx-auto mb-2\"}),/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold text-gray-900 text-sm mb-1\",children:\"Manage Jobs\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-xs\",children:\"Approve and manage job postings\"})]}),/*#__PURE__*/_jsxs(Link,{to:\"/admin/companies\",className:\"card p-5 text-center hover:shadow-sm transition-shadow\",children:[/*#__PURE__*/_jsx(Building2,{className:\"w-7 h-7 text-primary-600 mx-auto mb-2\"}),/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold text-gray-900 text-sm mb-1\",children:\"Manage Companies\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-xs\",children:\"View and manage company profiles\"})]}),/*#__PURE__*/_jsxs(Link,{to:\"/admin/users\",className:\"card p-5 text-center hover:shadow-sm transition-shadow\",children:[/*#__PURE__*/_jsx(Users,{className:\"w-7 h-7 text-primary-600 mx-auto mb-2\"}),/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold text-gray-900 text-sm mb-1\",children:\"View Users\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-xs\",children:\"Monitor user activity and statistics\"})]}),/*#__PURE__*/_jsx(Link,{to:\"/admin/surveys\",className:\"card hover:shadow-md transition\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body flex items-center gap-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-3 rounded-xl bg-gray-100\",children:/*#__PURE__*/_jsx(ClipboardList,{className:\"w-6 h-6\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-semibold\",children:\"Survey\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs opacity-70\",children:\"Create questions & view responses\"})]})]})})]})]})]});/* -------------------- Student/Alumni page with Surveys modal button -------------------- */const userPage=/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6 flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-2xl font-heading font-bold text-gray-900\",children:[\"Welcome back, \",(user===null||user===void 0?void 0:user.firstName)||(user===null||user===void 0?void 0:user.name)||'there',\"!\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mt-1\",children:\"Discover new opportunities and track your job search progress.\"})]}),isStudentOrAlumni()&&/*#__PURE__*/_jsxs(\"button\",{ref:openBtnRef,onClick:openSurveysModal,className:\"inline-flex items-center gap-2 rounded-md border px-3 py-2 text-sm hover:shadow-sm\",\"aria-haspopup\":\"dialog\",\"aria-expanded\":surveyModalOpen,children:[/*#__PURE__*/_jsx(ListChecks,{className:\"w-4 h-4 text-primary-600\"}),\"Surveys\",(pendingSurveys===null||pendingSurveys===void 0?void 0:pendingSurveys.length)>0&&/*#__PURE__*/_jsx(\"span\",{className:\"ml-1 inline-flex items-center justify-center min-w-5 h-5 px-1 rounded-full bg-primary-100 text-primary-600 text-[11px]\",children:pendingSurveys.length})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 md:grid-cols-4 gap-3 mb-6\",children:[/*#__PURE__*/_jsx(StatCard,{icon:Briefcase,title:\"Available Jobs\",value:stats.totalJobs}),/*#__PURE__*/_jsx(StatCard,{icon:Eye,title:\"Jobs Viewed\",value:0}),/*#__PURE__*/_jsx(StatCard,{icon:FileText,title:\"Applications\",value:0}),/*#__PURE__*/_jsx(StatCard,{icon:Building2,title:\"Companies\",value:stats.totalCompanies})]}),surveyModalOpen&&/*#__PURE__*/_jsxs(\"div\",{className:\"fixed inset-0 z-[100] flex items-end sm:items-center justify-center\",role:\"dialog\",\"aria-modal\":\"true\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 bg-black/30\",onClick:closeSurveysModal}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative z-[101] w-full sm:max-w-md mx-3 sm:mx-0 rounded-lg bg-white shadow-xl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between px-4 py-3 border-b\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(ListChecks,{className:\"w-4 h-4 text-primary-600\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-semibold text-gray-900\",children:\"Available Surveys\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:closeSurveysModal,className:\"p-1 text-gray-500 hover:text-gray-700\",\"aria-label\":\"Close\",children:/*#__PURE__*/_jsx(X,{className:\"w-5 h-5\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 max-h-[70vh] overflow-auto\",children:[pendingLoading&&/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-600\",children:\"Loading surveys\\u2026\"}),!pendingLoading&&pendingError&&/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-red-600\",children:pendingError}),!pendingLoading&&!pendingError&&/*#__PURE__*/_jsx(_Fragment,{children:pendingSurveys.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-600\",children:\"No surveys to answer \\uD83C\\uDF89\"}):/*#__PURE__*/_jsx(\"ul\",{className:\"space-y-2\",children:pendingSurveys.map(s=>/*#__PURE__*/_jsxs(\"li\",{className:\"border rounded-md p-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-gray-900\",children:s.title||'Untitled survey'}),s.description&&/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-600 mt-1 line-clamp-2\",children:s.description}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-2\",children:/*#__PURE__*/_jsx(Link,{to:\"/surveys/\".concat(s._id),className:\"inline-flex items-center gap-1 text-sm text-blue-600 hover:underline\",onClick:closeSurveysModal,children:\"Take survey\"})})]},s._id))})})]})]})]})]});return isAdmin()?/*#__PURE__*/_jsx(AdminWrapper,{children:adminPage}):userPage;}","map":{"version":3,"names":["React","useEffect","useRef","useState","Link","Briefcase","Users","Building2","BarChart3","TrendingUp","FileText","UserCheck","Paintbrush","ClipboardList","Eye","ListChecks","X","useAuth","adminAPI","usersAPI","surveysAPI","toast","LoadingSpinner","Bar","Chart","ChartJS","CategoryScale","LinearScale","BarElement","Title","Tooltip","Legend","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","register","THEME_COLORS","default","primary","secondary","emerald","rose","philsca","THEMES","id","name","className","initialStats","totalJobs","totalCompanies","totalUsers","pendingApproval","newUsers","roleCounts","students","alumni","admins","topSearches","studentsByCourse","Dashboard","_THEMES$find","_stats$roleCounts","_stats$roleCounts2","_stats$roleCounts3","user","isAdmin","isStudentOrAlumni","stats","setStats","loading","setLoading","surveyModalOpen","setSurveyModalOpen","pendingSurveys","setPendingSurveys","pendingLoading","setPendingLoading","pendingError","setPendingError","openBtnRef","adminTheme","setAdminTheme","window","localStorage","getItem","themeClass","find","t","themeColors","setItem","mounted","s","users","Promise","all","getStats","catch","list","nextStats","Number","Array","isArray","computedRoleCounts","counts","u","role","userType","type","toLowerCase","computedStudentsByCourse","map","course","program","degree","Object","entries","_ref","total","sort","a","b","slice","hasServerRoleData","values","some","v","hasServerCourseData","length","e","console","error","message","openSurveysModal","forMe","msg","closeSurveysModal","current","focus","text","StatCard","_ref2","icon","Icon","title","value","children","hasRoleData","hasSearchData","hasCourseData","roleData","labels","datasets","label","data","backgroundColor","borderRadius","searchesData","term","count","coursesData","c","baseOptions","responsive","maintainAspectRatio","plugins","legend","display","tooltip","titleFont","size","bodyFont","scales","x","ticks","font","color","grid","y","beginAtZero","stepSize","elements","bar","borderSkipped","verticalOptions","horizontalOptions","_objectSpread","indexAxis","AdminWrapper","_ref3","concat","adminPage","firstName","onChange","target","options","to","userPage","ref","onClick","description","_id"],"sources":["/Users/macbookair/Desktop/AeroJobs/AeroJob/frontend/src/pages/Dashboard.js"],"sourcesContent":["// src/pages/Dashboard.js\r\nimport React, { useEffect, useRef, useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport {\r\n  Briefcase,\r\n  Users,\r\n  Building2,\r\n  BarChart3,\r\n  TrendingUp,\r\n  FileText,\r\n  UserCheck,\r\n  Paintbrush,\r\n  ClipboardList,\r\n  Eye,\r\n  ListChecks,\r\n  X,\r\n} from 'lucide-react';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { adminAPI, usersAPI, surveysAPI } from '../utils/api';\r\nimport toast from 'react-hot-toast';\r\nimport LoadingSpinner from '../components/LoadingSpinner';\r\n\r\n// Charts\r\nimport { Bar } from 'react-chartjs-2';\r\nimport {\r\n  Chart as ChartJS,\r\n  CategoryScale,\r\n  LinearScale,\r\n  BarElement,\r\n  Title,\r\n  Tooltip,\r\n  Legend,\r\n} from 'chart.js';\r\nChartJS.register(CategoryScale, LinearScale, BarElement, Title, Tooltip, Legend);\r\n\r\n/* -------------------- Theme colors for charts -------------------- */\r\nconst THEME_COLORS = {\r\n  default: { primary: 'rgba(37, 99, 235, 0.72)', secondary: 'rgba(96, 165, 250, 0.62)' },\r\n  emerald: { primary: 'rgba(5, 150, 105, 0.72)', secondary: 'rgba(52, 211, 153, 0.62)' },\r\n  rose: { primary: 'rgba(225, 29, 72, 0.72)', secondary: 'rgba(251, 113, 133, 0.62)' },\r\n  philsca: { primary: 'rgba(217, 119, 6, 0.72)', secondary: 'rgba(251, 191, 36, 0.62)' },\r\n};\r\n\r\nconst THEMES = [\r\n  { id: 'default', name: 'Default (Blue)', className: 'theme-default' },\r\n  { id: 'emerald', name: 'Emerald', className: 'theme-emerald' },\r\n  { id: 'rose', name: 'Rose', className: 'theme-rose' },\r\n  { id: 'philsca', name: 'PhilSCA (Gold)', className: 'theme-philsca' },\r\n];\r\n\r\nconst initialStats = {\r\n  totalJobs: 0,\r\n  totalCompanies: 0,\r\n  totalUsers: 0,\r\n  pendingApproval: 0,\r\n  newUsers: 0,\r\n  // Optional analytics\r\n  roleCounts: { students: 0, alumni: 0, admins: 0 },\r\n  topSearches: [],\r\n  studentsByCourse: [], \r\n};\r\n\r\nexport default function Dashboard() {\r\n  const { user, isAdmin, isStudentOrAlumni } = useAuth();\r\n  const [stats, setStats] = useState(initialStats);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  // === Student Surveys modal state (no impact to admin) ===\r\n  const [surveyModalOpen, setSurveyModalOpen] = useState(false);\r\n  const [pendingSurveys, setPendingSurveys] = useState([]);\r\n  const [pendingLoading, setPendingLoading] = useState(false);\r\n  const [pendingError, setPendingError] = useState(null);\r\n  const openBtnRef = useRef(null);\r\n\r\n  // Theme state (admins can switch; stored locally)\r\n  const [adminTheme, setAdminTheme] = useState(\r\n    () => (typeof window !== 'undefined' && localStorage.getItem('admin_theme')) || 'default'\r\n  );\r\n  const themeClass = THEMES.find(t => t.id === adminTheme)?.className || 'theme-default';\r\n  const themeColors = THEME_COLORS[adminTheme] || THEME_COLORS.default;\r\n\r\n  useEffect(() => {\r\n    if (isAdmin()) localStorage.setItem('admin_theme', adminTheme);\r\n  }, [adminTheme, isAdmin]);\r\n\r\n  /* -------------------- Fetch counts + users (build charts client-side) -------------------- */\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    (async () => {\r\n      try {\r\n        setLoading(true);\r\n        const [s, users] = await Promise.all([\r\n          adminAPI.getStats().catch(() => null),\r\n          usersAPI.list().catch(() => []),\r\n        ]);\r\n        if (!mounted) return;\r\n\r\n        // Base stats from /admin/stats (if available)\r\n        const nextStats = {\r\n          totalJobs: Number(s?.totalJobs || 0),\r\n          totalCompanies: Number(s?.totalCompanies || 0),\r\n          totalUsers: Number(s?.totalUsers || 0),\r\n          pendingApproval: Number(s?.pendingApproval || 0),\r\n          newUsers: Number(s?.newUsers || 0),\r\n          roleCounts: s?.roleCounts || { students: 0, alumni: 0, admins: 0 },\r\n          topSearches: Array.isArray(s?.topSearches) ? s.topSearches : [],\r\n          studentsByCourse: Array.isArray(s?.studentsByCourse) ? s.studentsByCourse : [], // ✅\r\n        };\r\n\r\n        // If roleCounts missing/zero, compute from /users\r\n        const computedRoleCounts = (() => {\r\n          const counts = { admins: 0, students: 0, alumni: 0 };\r\n          if (Array.isArray(users)) {\r\n            for (const u of users) {\r\n              const role = (u?.role || u?.userType || u?.type || '').toLowerCase();\r\n              if (role === 'admin') counts.admins += 1;\r\n              else if (role === 'student') counts.students += 1;\r\n              else if (role === 'alumni') counts.alumni += 1;\r\n            }\r\n          }\r\n          return counts;\r\n        })();\r\n\r\n        // If studentsByCourse missing, compute from /users (students only)\r\n        const computedStudentsByCourse = (() => {\r\n          const map = {};\r\n          if (Array.isArray(users)) {\r\n            for (const u of users) {\r\n              const role = (u?.role || u?.userType || '').toLowerCase();\r\n              if (role !== 'student') continue;\r\n              const course =\r\n                (u?.course || u?.program || u?.degree || 'Unknown') || 'Unknown';\r\n              map[course] = (map[course] || 0) + 1;\r\n            }\r\n          }\r\n          return Object.entries(map)\r\n            .map(([course, total]) => ({ course, total }))\r\n            .sort((a, b) => b.total - a.total)\r\n            .slice(0, 15);\r\n        })();\r\n\r\n        const hasServerRoleData = Object.values(nextStats.roleCounts || {}).some(v => Number(v) > 0);\r\n        nextStats.roleCounts = hasServerRoleData ? nextStats.roleCounts : computedRoleCounts;\r\n\r\n        const hasServerCourseData = Array.isArray(nextStats.studentsByCourse) && nextStats.studentsByCourse.length > 0;\r\n        nextStats.studentsByCourse = hasServerCourseData ? nextStats.studentsByCourse : computedStudentsByCourse;\r\n\r\n        if (!nextStats.totalUsers && Array.isArray(users)) {\r\n          nextStats.totalUsers = users.length;\r\n        }\r\n\r\n        setStats(nextStats);\r\n      } catch (e) {\r\n        console.error('Failed to load dashboard:', e?.message || e);\r\n        setStats(initialStats);\r\n      } finally {\r\n        if (mounted) setLoading(false);\r\n      }\r\n    })();\r\n    return () => { mounted = false; };\r\n  }, []);\r\n\r\n  /* -------------------- Helpers: open/close surveys modal -------------------- */\r\n  const openSurveysModal = async () => {\r\n    setSurveyModalOpen(true);\r\n    setPendingLoading(true);\r\n    setPendingError(null);\r\n    try {\r\n      const list = await surveysAPI.forMe();\r\n      setPendingSurveys(Array.isArray(list) ? list : []);\r\n    } catch (e) {\r\n      const msg = e?.message || 'Failed to load surveys';\r\n      setPendingError(msg);\r\n      toast.error(msg);\r\n    } finally {\r\n      setPendingLoading(false);\r\n    }\r\n  };\r\n\r\n  const closeSurveysModal = () => {\r\n    setSurveyModalOpen(false);\r\n    // return focus to opener for accessibility\r\n    if (openBtnRef.current) {\r\n      openBtnRef.current.focus();\r\n    }\r\n  };\r\n\r\n  if (loading) return <LoadingSpinner text=\"Loading dashboard...\" />;\r\n\r\n  /* -------------------- Small UI helpers -------------------- */\r\n  const StatCard = ({ icon: Icon, title, value }) => (\r\n    <div className=\"stats-card p-4 text-center\">\r\n      <div className=\"w-9 h-9 bg-primary-100 text-primary-600 rounded-md flex items-center justify-center mb-2 mx-auto\">\r\n        <Icon className=\"w-5 h-5\" />\r\n      </div>\r\n      <div className=\"text-xl font-semibold text-gray-900\">{value ?? 0}</div>\r\n      <div className=\"text-xs text-gray-600\">{title}</div>\r\n    </div>\r\n  );\r\n\r\n  const hasRoleData = Object.values(stats.roleCounts || {}).some(v => Number(v) > 0);\r\n  const hasSearchData = Array.isArray(stats.topSearches) && stats.topSearches.length > 0;\r\n  const hasCourseData = Array.isArray(stats.studentsByCourse) && stats.studentsByCourse.length > 0; // ✅\r\n\r\n  const roleData = {\r\n    labels: ['Students', 'Alumni', 'Admins'],\r\n    datasets: [\r\n      {\r\n        label: 'Users',\r\n        data: [\r\n          Number(stats.roleCounts?.students || 0),\r\n          Number(stats.roleCounts?.alumni || 0),\r\n          Number(stats.roleCounts?.admins || 0),\r\n        ],\r\n        backgroundColor: themeColors.primary,\r\n        borderRadius: 6,\r\n      },\r\n    ],\r\n  };\r\n\r\n  const searchesData = {\r\n    labels: stats.topSearches.map(s => s.term),\r\n    datasets: [\r\n      {\r\n        label: 'Searches',\r\n        data: stats.topSearches.map(s => Number(s.total || s.count || 0)),\r\n        backgroundColor: themeColors.secondary,\r\n        borderRadius: 6,\r\n      },\r\n    ],\r\n  };\r\n\r\n  // ✅ Students per Course dataset\r\n  const coursesData = {\r\n    labels: stats.studentsByCourse.map(c => c.course || 'Unknown'),\r\n    datasets: [\r\n      {\r\n        label: 'Students',\r\n        data: stats.studentsByCourse.map(c => Number(c.total || c.count || 0)),\r\n        backgroundColor: themeColors.primary,\r\n        borderRadius: 6,\r\n      },\r\n    ],\r\n  };\r\n\r\n  const baseOptions = {\r\n    responsive: true,\r\n    maintainAspectRatio: false,\r\n    plugins: { legend: { display: false }, tooltip: { titleFont: { size: 12 }, bodyFont: { size: 11 } } },\r\n    scales: {\r\n      x: { ticks: { font: { size: 11 }, color: '#4B5563' }, grid: { display: false } },\r\n      y: { beginAtZero: true, ticks: { font: { size: 11 }, color: '#4B5563', stepSize: 1 }, grid: { color: '#E5E7EB' } },\r\n    },\r\n    elements: { bar: { borderSkipped: false } },\r\n  };\r\n\r\n  const verticalOptions = baseOptions;\r\n  const horizontalOptions = { ...baseOptions, indexAxis: 'y' };\r\n\r\n  /* -------------------- Admin wrapper adds CSS variables per theme -------------------- */\r\n  const AdminWrapper = ({ children }) => (\r\n    <div className={`admin-portal ${themeClass}`}>\r\n      <style>{`\r\n        .admin-portal.theme-default { --primary-100: 219 234 254; --primary-400: 96 165 250; --primary-600: 37 99 235; --primary-700: 29 78 216; }\r\n        .admin-portal.theme-emerald { --primary-100: 209 250 229; --primary-400: 52 211 153; --primary-600: 5 150 105; --primary-700: 4 120 87; }\r\n        .admin-portal.theme-rose    { --primary-100: 255 228 230; --primary-400: 251 113 133; --primary-600: 225 29 72;  --primary-700: 190 18 60; }\r\n        .admin-portal.theme-philsca { --primary-100: 254 243 199; --primary-400: 251 191 36;  --primary-600: 217 119 6;  --primary-700: 180 83 9; }\r\n        .admin-portal .text-primary-600 { color: rgb(var(--primary-600)) !important; }\r\n        .admin-portal .bg-primary-100 { background-color: rgb(var(--primary-100)) !important; }\r\n        .admin-portal .btn-primary { background-color: rgb(var(--primary-600)) !important; }\r\n        .admin-portal .btn-primary:hover { background-color: rgb(var(--primary-700)) !important; }\r\n      `}</style>\r\n      {children}\r\n    </div>\r\n  );\r\n  /* -------------------- Admin page -------------------- */\r\n  const adminPage = (\r\n    <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\">\r\n      {/* Header */}\r\n      <div className=\"mb-6 flex items-start justify-between gap-3\">\r\n        <div>\r\n          <h1 className=\"text-2xl font-heading font-bold text-gray-900\">\r\n            Welcome back, {user?.firstName || 'Admin'}!\r\n          </h1>\r\n          <p className=\"text-sm text-gray-600 mt-1\">\r\n            Manage the AeroJob platform and monitor system activity.\r\n          </p>\r\n        </div>\r\n        <label className=\"inline-flex items-center gap-2 text-xs text-gray-700\">\r\n          <Paintbrush className=\"w-4 h-4 text-primary-600\" />\r\n          <span>Theme</span>\r\n          <select\r\n            value={adminTheme}\r\n            onChange={(e) => setAdminTheme(e.target.value)}\r\n            className=\"input w-auto py-1 px-2 text-xs\"\r\n          >\r\n            {THEMES.map(t => <option key={t.id} value={t.id}>{t.name}</option>)}\r\n          </select>\r\n        </label>\r\n      </div>\r\n\r\n      {/* Summary cards */}\r\n      <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3 mb-6\">\r\n        <StatCard icon={Briefcase} title=\"Total Jobs\" value={stats.totalJobs} />\r\n        <StatCard icon={FileText} title=\"Pending Approval\" value={stats.pendingApproval} />\r\n        <StatCard icon={Users} title=\"Total Users\" value={stats.totalUsers} />\r\n        <StatCard icon={UserCheck} title=\"New Users (30d)\" value={stats.newUsers} />\r\n      </div>\r\n\r\n      {/* Charts Row 1 */}\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n        <div className=\"card\">\r\n          <div className=\"px-4 py-3 border-b\">\r\n            <h3 className=\"text-sm font-semibold text-gray-900 flex items-center\">\r\n              <BarChart3 className=\"w-4 h-4 mr-2 text-primary-600\" />\r\n              Total Users by Role\r\n            </h3>\r\n          </div>\r\n          <div className=\"p-4 h-48\">\r\n            {hasRoleData ? (\r\n              <Bar data={roleData} options={verticalOptions} />\r\n            ) : (\r\n              <div className=\"text-sm text-gray-500 text-center py-8\">No data available</div>\r\n            )}\r\n          </div>\r\n          <div className=\"px-4 py-2 text-[11px] text-gray-500 border-t\">\r\n            Shows current totals per role.\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"card\">\r\n          <div className=\"px-4 py-3 border-b\">\r\n            <h3 className=\"text-sm font-semibold text-gray-900 flex items-center\">\r\n              <TrendingUp className=\"w-4 h-4 mr-2 text-primary-600\" />\r\n              Most Searched Jobs\r\n            </h3>\r\n          </div>\r\n          <div className=\"p-4 h-48\">\r\n            {hasSearchData ? (\r\n              <Bar data={searchesData} options={{ ...horizontalOptions, indexAxis: 'y' }} />\r\n            ) : (\r\n              <div className=\"text-sm text-gray-500 text-center py-8\">No data available</div>\r\n            )}\r\n          </div>\r\n          <div className=\"px-4 py-2 text-[11px] text-gray-500 border-t\">\r\n            Aggregated searches by users & alumni.\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Charts Row 2 - Students per Course */}\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6 mt-6\">\r\n        <div className=\"card\">\r\n          <div className=\"px-4 py-3 border-b\">\r\n            <h3 className=\"text-sm font-semibold text-gray-900 flex items-center\">\r\n              <BarChart3 className=\"w-4 h-4 mr-2 text-primary-600\" />\r\n              Students per Course\r\n            </h3>\r\n          </div>\r\n          <div className=\"p-4 h-56\">\r\n            {hasCourseData ? (\r\n              <Bar data={coursesData} options={{ ...horizontalOptions, indexAxis: 'y' }} />\r\n            ) : (\r\n              <div className=\"text-sm text-gray-500 text-center py-8\">No data available</div>\r\n            )}\r\n          </div>\r\n          <div className=\"px-4 py-2 text-[11px] text-gray-500 border-t\">\r\n            Counts include users with the Student role. “Unknown” means no course set.\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Quick Actions */}\r\n      <div className=\"mt-6\">\r\n        <h3 className=\"text-sm font-semibold text-gray-900 mb-3\">Quick Actions</h3>\r\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-3\">\r\n          <Link to=\"/admin/jobs\" className=\"card p-5 text-center hover:shadow-sm transition-shadow\">\r\n            <Briefcase className=\"w-7 h-7 text-primary-600 mx-auto mb-2\" />\r\n            <h4 className=\"font-semibold text-gray-900 text-sm mb-1\">Manage Jobs</h4>\r\n            <p className=\"text-gray-600 text-xs\">Approve and manage job postings</p>\r\n          </Link>\r\n          <Link to=\"/admin/companies\" className=\"card p-5 text-center hover:shadow-sm transition-shadow\">\r\n            <Building2 className=\"w-7 h-7 text-primary-600 mx-auto mb-2\" />\r\n            <h4 className=\"font-semibold text-gray-900 text-sm mb-1\">Manage Companies</h4>\r\n            <p className=\"text-gray-600 text-xs\">View and manage company profiles</p>\r\n          </Link>\r\n          <Link to=\"/admin/users\" className=\"card p-5 text-center hover:shadow-sm transition-shadow\">\r\n            <Users className=\"w-7 h-7 text-primary-600 mx-auto mb-2\" />\r\n            <h4 className=\"font-semibold text-gray-900 text-sm mb-1\">View Users</h4>\r\n            <p className=\"text-gray-600 text-xs\">Monitor user activity and statistics</p>\r\n          </Link>\r\n          <Link to=\"/admin/surveys\" className=\"card hover:shadow-md transition\">\r\n            <div className=\"card-body flex items-center gap-3\">\r\n              <div className=\"p-3 rounded-xl bg-gray-100\">\r\n                <ClipboardList className=\"w-6 h-6\" />\r\n              </div>\r\n              <div>\r\n                <div className=\"font-semibold\">Survey</div>\r\n                <div className=\"text-xs opacity-70\">Create questions & view responses</div>\r\n              </div>\r\n            </div>\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  /* -------------------- Student/Alumni page with Surveys modal button -------------------- */\r\n  const userPage = (\r\n    <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\">\r\n      <div className=\"mb-6 flex items-center justify-between\">\r\n        <div>\r\n          <h1 className=\"text-2xl font-heading font-bold text-gray-900\">\r\n            Welcome back, {user?.firstName || user?.name || 'there'}!\r\n          </h1>\r\n          <p className=\"text-sm text-gray-600 mt-1\">\r\n            Discover new opportunities and track your job search progress.\r\n          </p>\r\n        </div>\r\n\r\n        {/* Surveys trigger (students/alumni only) */}\r\n        {isStudentOrAlumni() && (\r\n          <button\r\n            ref={openBtnRef}\r\n            onClick={openSurveysModal}\r\n            className=\"inline-flex items-center gap-2 rounded-md border px-3 py-2 text-sm hover:shadow-sm\"\r\n            aria-haspopup=\"dialog\"\r\n            aria-expanded={surveyModalOpen}\r\n          >\r\n            <ListChecks className=\"w-4 h-4 text-primary-600\" />\r\n            Surveys\r\n            {pendingSurveys?.length > 0 && (\r\n              <span className=\"ml-1 inline-flex items-center justify-center min-w-5 h-5 px-1 rounded-full bg-primary-100 text-primary-600 text-[11px]\">\r\n                {pendingSurveys.length}\r\n              </span>\r\n            )}\r\n          </button>\r\n        )}\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3 mb-6\">\r\n        <StatCard icon={Briefcase} title=\"Available Jobs\" value={stats.totalJobs} />\r\n        <StatCard icon={Eye} title=\"Jobs Viewed\" value={0} />\r\n        <StatCard icon={FileText} title=\"Applications\" value={0} />\r\n        <StatCard icon={Building2} title=\"Companies\" value={stats.totalCompanies} />\r\n      </div>\r\n\r\n      {/* Modal */}\r\n      {surveyModalOpen && (\r\n        <div\r\n          className=\"fixed inset-0 z-[100] flex items-end sm:items-center justify-center\"\r\n          role=\"dialog\"\r\n          aria-modal=\"true\"\r\n        >\r\n          {/* overlay */}\r\n          <div\r\n            className=\"absolute inset-0 bg-black/30\"\r\n            onClick={closeSurveysModal}\r\n          />\r\n          {/* modal panel */}\r\n          <div className=\"relative z-[101] w-full sm:max-w-md mx-3 sm:mx-0 rounded-lg bg-white shadow-xl\">\r\n            <div className=\"flex items-center justify-between px-4 py-3 border-b\">\r\n              <div className=\"flex items-center gap-2\">\r\n                <ListChecks className=\"w-4 h-4 text-primary-600\" />\r\n                <h3 className=\"text-sm font-semibold text-gray-900\">Available Surveys</h3>\r\n              </div>\r\n              <button\r\n                onClick={closeSurveysModal}\r\n                className=\"p-1 text-gray-500 hover:text-gray-700\"\r\n                aria-label=\"Close\"\r\n              >\r\n                <X className=\"w-5 h-5\" />\r\n              </button>\r\n            </div>\r\n\r\n            <div className=\"p-4 max-h-[70vh] overflow-auto\">\r\n              {pendingLoading && (\r\n                <div className=\"text-sm text-gray-600\">Loading surveys…</div>\r\n              )}\r\n\r\n              {!pendingLoading && pendingError && (\r\n                <div className=\"text-sm text-red-600\">{pendingError}</div>\r\n              )}\r\n\r\n              {!pendingLoading && !pendingError && (\r\n                <>\r\n                  {pendingSurveys.length === 0 ? (\r\n                    <div className=\"text-sm text-gray-600\">No surveys to answer 🎉</div>\r\n                  ) : (\r\n                    <ul className=\"space-y-2\">\r\n                      {pendingSurveys.map((s) => (\r\n                        <li key={s._id} className=\"border rounded-md p-3\">\r\n                          <div className=\"font-medium text-gray-900\">\r\n                            {s.title || 'Untitled survey'}\r\n                          </div>\r\n                          {s.description && (\r\n                            <div className=\"text-xs text-gray-600 mt-1 line-clamp-2\">\r\n                              {s.description}\r\n                            </div>\r\n                          )}\r\n                          <div className=\"mt-2\">\r\n                            <Link\r\n                              to={`/surveys/${s._id}`}\r\n                              className=\"inline-flex items-center gap-1 text-sm text-blue-600 hover:underline\"\r\n                              onClick={closeSurveysModal}\r\n                            >\r\n                              Take survey\r\n                            </Link>\r\n                          </div>\r\n                        </li>\r\n                      ))}\r\n                    </ul>\r\n                  )}\r\n                </>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n\r\n  return isAdmin() ? <AdminWrapper>{adminPage}</AdminWrapper> : userPage;\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}