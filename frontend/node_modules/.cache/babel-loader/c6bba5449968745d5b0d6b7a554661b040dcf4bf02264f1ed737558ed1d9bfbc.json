{"ast":null,"code":"import _objectSpread from\"/Users/macbookair/Desktop/AeroJobs/AeroJob/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState,useCallback}from'react';import{useParams,useNavigate,Link}from'react-router-dom';import{ArrowLeft}from'lucide-react';import LoadingSpinner from'../../components/LoadingSpinner';import{surveysAPI}from'../../utils/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function SurveyResponses(){const{id}=useParams();const navigate=useNavigate();const[survey,setSurvey]=useState(null);const[responses,setResponses]=useState([]);const[loading,setLoading]=useState(true);const[filters,setFilters]=useState({role:''});const load=useCallback(async()=>{setLoading(true);try{const s=await surveysAPI.get(id);setSurvey(s);const data=await surveysAPI.responses(id,{role:filters.role||undefined});setResponses(data);}finally{setLoading(false);}},[id,filters.role]);useEffect(()=>{load();},[load]);if(loading)return/*#__PURE__*/_jsx(LoadingSpinner,{});return/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto px-4 py-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3 mb-6\",children:[/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:()=>navigate(-1),className:\"inline-flex items-center gap-2 px-2 py-1 rounded-md text-sm text-gray-600 hover:text-gray-900 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-primary-500\",\"aria-label\":\"Go back\",children:[/*#__PURE__*/_jsx(ArrowLeft,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsx(\"span\",{className:\"hidden sm:inline\",children:\"Back\"})]}),/*#__PURE__*/_jsxs(\"h1\",{className:\"text-xl font-semibold\",children:[\"Responses \\u2014 \",(survey===null||survey===void 0?void 0:survey.title)||'Survey']}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-auto flex items-center gap-2\",children:[/*#__PURE__*/_jsxs(\"select\",{className:\"input\",value:filters.role,onChange:e=>setFilters(f=>_objectSpread(_objectSpread({},f),{},{role:e.target.value})),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"All Roles\"}),/*#__PURE__*/_jsx(\"option\",{value:\"student\",children:\"Students\"}),/*#__PURE__*/_jsx(\"option\",{value:\"alumni\",children:\"Alumni\"})]}),/*#__PURE__*/_jsx(Link,{to:\"/admin/surveys\",className:\"text-sm text-primary-600 hover:underline\",children:\"All Surveys\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid gap-4\",children:[responses.map(r=>{var _r$userId,_r$userId2,_survey$questions;return/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm opacity-70 mb-2\",children:[/*#__PURE__*/_jsx(\"b\",{children:((_r$userId=r.userId)===null||_r$userId===void 0?void 0:_r$userId.name)||((_r$userId2=r.userId)===null||_r$userId2===void 0?void 0:_r$userId2.email)||'Anonymous'}),\" \\u2022\",' ',r.role,\" \\u2022 \",new Date(r.createdAt).toLocaleString()]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid gap-3\",children:survey===null||survey===void 0?void 0:(_survey$questions=survey.questions)===null||_survey$questions===void 0?void 0:_survey$questions.map(q=>{var _ans$value;const ans=r.answers.find(a=>String(a.questionId)===String(q._id));return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"font-medium\",children:[\"Q: \",q.text,' ',q.required&&/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"opacity-80\",children:Array.isArray(ans===null||ans===void 0?void 0:ans.value)?ans.value.join(', '):(_ans$value=ans===null||ans===void 0?void 0:ans.value)!==null&&_ans$value!==void 0?_ans$value:/*#__PURE__*/_jsx(\"i\",{className:\"opacity-50\",children:\"\\u2014\"})})]},q._id);})})]})},r._id);}),!responses.length&&/*#__PURE__*/_jsx(\"div\",{className:\"text-center opacity-70\",children:\"No responses yet.\"})]})]});}","map":{"version":3,"names":["React","useEffect","useState","useCallback","useParams","useNavigate","Link","ArrowLeft","LoadingSpinner","surveysAPI","jsx","_jsx","jsxs","_jsxs","SurveyResponses","id","navigate","survey","setSurvey","responses","setResponses","loading","setLoading","filters","setFilters","role","load","s","get","data","undefined","className","children","type","onClick","title","value","onChange","e","f","_objectSpread","target","to","map","r","_r$userId","_r$userId2","_survey$questions","userId","name","email","Date","createdAt","toLocaleString","questions","q","_ans$value","ans","answers","find","a","String","questionId","_id","text","required","Array","isArray","join","length"],"sources":["/Users/macbookair/Desktop/AeroJobs/AeroJob/frontend/src/pages/admin/SurveyResponses.js"],"sourcesContent":["import React, { useEffect, useState, useCallback } from 'react';\nimport { useParams, useNavigate, Link } from 'react-router-dom';\nimport { ArrowLeft } from 'lucide-react';\nimport LoadingSpinner from '../../components/LoadingSpinner';\nimport { surveysAPI } from '../../utils/api';\n\nexport default function SurveyResponses() {\n  const { id } = useParams();\n  const navigate = useNavigate();\n\n  const [survey, setSurvey] = useState(null);\n  const [responses, setResponses] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [filters, setFilters] = useState({ role: '' });\n\n  const load = useCallback(async () => {\n    setLoading(true);\n    try {\n      const s = await surveysAPI.get(id);\n      setSurvey(s);\n      const data = await surveysAPI.responses(id, {\n        role: filters.role || undefined,\n      });\n      setResponses(data);\n    } finally {\n      setLoading(false);\n    }\n  }, [id, filters.role]);\n\n  useEffect(() => {\n    load();\n  }, [load]);\n\n  if (loading) return <LoadingSpinner />;\n\n  return (\n    <div className=\"max-w-7xl mx-auto px-4 py-6\">\n      {/* Header with Back button */}\n      <div className=\"flex items-center gap-3 mb-6\">\n        <button\n          type=\"button\"\n          onClick={() => navigate(-1)}\n          className=\"inline-flex items-center gap-2 px-2 py-1 rounded-md text-sm text-gray-600 hover:text-gray-900 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-primary-500\"\n          aria-label=\"Go back\"\n        >\n          <ArrowLeft className=\"w-4 h-4\" />\n          <span className=\"hidden sm:inline\">Back</span>\n        </button>\n\n        <h1 className=\"text-xl font-semibold\">\n          Responses — {survey?.title || 'Survey'}\n        </h1>\n\n        <div className=\"ml-auto flex items-center gap-2\">\n          <select\n            className=\"input\"\n            value={filters.role}\n            onChange={(e) =>\n              setFilters((f) => ({ ...f, role: e.target.value }))\n            }\n          >\n            <option value=\"\">All Roles</option>\n            <option value=\"student\">Students</option>\n            <option value=\"alumni\">Alumni</option>\n          </select>\n\n          <Link\n            to=\"/admin/surveys\"\n            className=\"text-sm text-primary-600 hover:underline\"\n          >\n            All Surveys\n          </Link>\n        </div>\n      </div>\n\n      {/* Responses list */}\n      <div className=\"grid gap-4\">\n        {responses.map((r) => (\n          <div key={r._id} className=\"card\">\n            <div className=\"card-body\">\n              <div className=\"text-sm opacity-70 mb-2\">\n                <b>{r.userId?.name || r.userId?.email || 'Anonymous'}</b> •{' '}\n                {r.role} • {new Date(r.createdAt).toLocaleString()}\n              </div>\n\n              <div className=\"grid gap-3\">\n                {survey?.questions?.map((q) => {\n                  const ans = r.answers.find(\n                    (a) => String(a.questionId) === String(q._id)\n                  );\n                  return (\n                    <div key={q._id}>\n                      <div className=\"font-medium\">\n                        Q: {q.text}{' '}\n                        {q.required && <span className=\"text-red-500\">*</span>}\n                      </div>\n                      <div className=\"opacity-80\">\n                        {Array.isArray(ans?.value)\n                          ? ans.value.join(', ')\n                          : ans?.value ?? <i className=\"opacity-50\">—</i>}\n                      </div>\n                    </div>\n                  );\n                })}\n              </div>\n            </div>\n          </div>\n        ))}\n\n        {!responses.length && (\n          <div className=\"text-center opacity-70\">No responses yet.</div>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}