{"ast":null,"code":"import _objectSpread from\"/Users/macbookair/Desktop/AeroJobs/AeroJob/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// src/pages/JobManagement.js\nimport React,{useEffect,useMemo,useState}from'react';import{Plus,Search,RefreshCw,Filter,Trash2,CheckCircle2,Pencil,PauseCircle,PlayCircle,ArchiveRestore}from'lucide-react';import toast from'react-hot-toast';import LoadingSpinner from'../components/LoadingSpinner';import{jobsAPI,companiesAPI}from'../utils/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const PAGE_SIZES=[10,25,50];// Use lowercase values (match Mongoose enum); keep nice labels for UI\nconst JOB_TYPES=[{value:'internship',label:'Internship'},{value:'ojt',label:'OJT'},{value:'part-time',label:'Part-time'},{value:'full-time',label:'Full-time'},{value:'contract',label:'Contract'}];const jobTypeLabel=val=>{var _JOB_TYPES$find;return((_JOB_TYPES$find=JOB_TYPES.find(t=>t.value===(val||'')))===null||_JOB_TYPES$find===void 0?void 0:_JOB_TYPES$find.label)||val||'—';};// Match your model enum exactly (no \"archived\")\nconst STATUS_STATES=['active','inactive','closed','draft'];const Badge=_ref=>{let{children,className=''}=_ref;return/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium \".concat(className),children:children});};export default function JobManagement(){// Data\nconst[loading,setLoading]=useState(true);const[jobs,setJobs]=useState([]);const[categories,setCategories]=useState([]);const[companies,setCompanies]=useState([]);// Filters & table state\nconst[q,setQ]=useState('');const[status,setStatus]=useState('all');const[type,setType]=useState('all');// holds lowercase values or 'all'\nconst[category,setCategory]=useState('all');const[sortKey,setSortKey]=useState('createdAt');const[sortDir,setSortDir]=useState('desc');const[pageSize,setPageSize]=useState(10);const[page,setPage]=useState(1);// Modal / form\nconst[showForm,setShowForm]=useState(false);const[editing,setEditing]=useState(null);const[form,setForm]=useState({title:'',company:'',jobType:'internship',// lowercase value\nlocation:'',category:'',// UI single-select; we’ll map to categories[]\nshortDescription:'',description:'',status:'active',approvalStatus:'pending'// UI only; maps to isApproved\n});const resetForm=()=>{setEditing(null);setForm({title:'',company:'',jobType:'internship',location:'',category:'',shortDescription:'',description:'',status:'active',approvalStatus:'pending'});};const openCreate=()=>{resetForm();setShowForm(true);};const openEdit=job=>{var _job$company;setEditing(job);setForm({title:job.title||'',company:((_job$company=job.company)===null||_job$company===void 0?void 0:_job$company._id)||job.company||'',jobType:String(job.jobType||'internship').toLowerCase(),location:job.location||'',category:Array.isArray(job.categories)?job.categories[0]||'':'',shortDescription:job.shortDescription||'',description:job.description||'',status:job.status||'active',approvalStatus:job.isApproved?'approved':'pending'});setShowForm(true);};// Fetch data\nuseEffect(()=>{(async()=>{try{var _jobsAPI$list,_companiesAPI$list,_companiesAPI$list$ca,_companiesAPI$list$ca2;setLoading(true);const[jobsRaw,catsRaw,compsRaw]=await Promise.all([(_jobsAPI$list=jobsAPI.list)===null||_jobsAPI$list===void 0?void 0:_jobsAPI$list.call(jobsAPI,{includeCompany:true}).catch(()=>[]),jobsAPI.get('/jobs/categories').then(r=>Array.isArray(r===null||r===void 0?void 0:r.data)?r.data:[]).catch(()=>[]),((_companiesAPI$list=companiesAPI.list)===null||_companiesAPI$list===void 0?void 0:(_companiesAPI$list$ca=(_companiesAPI$list$ca2=_companiesAPI$list.call(companiesAPI)).catch)===null||_companiesAPI$list$ca===void 0?void 0:_companiesAPI$list$ca.call(_companiesAPI$list$ca2,()=>[]))||Promise.resolve([])]);setJobs(Array.isArray(jobsRaw)?jobsRaw:(jobsRaw===null||jobsRaw===void 0?void 0:jobsRaw.jobs)||[]);setCategories(Array.isArray(catsRaw)?catsRaw:[]);setCompanies(Array.isArray(compsRaw)?compsRaw:(compsRaw===null||compsRaw===void 0?void 0:compsRaw.companies)||[]);}catch(e){console.error(e);toast.error('Failed to load jobs');}finally{setLoading(false);}})();},[]);const refresh=async()=>{try{var _jobsAPI$list2,_jobsAPI$list3;setLoading(true);const jobsRaw=await((_jobsAPI$list2=(_jobsAPI$list3=jobsAPI.list)===null||_jobsAPI$list3===void 0?void 0:_jobsAPI$list3.call(jobsAPI,{includeCompany:true}))!==null&&_jobsAPI$list2!==void 0?_jobsAPI$list2:jobsAPI.get('/jobs').then(r=>r.data));setJobs(Array.isArray(jobsRaw)?jobsRaw:(jobsRaw===null||jobsRaw===void 0?void 0:jobsRaw.jobs)||[]);toast.success('Refreshed');}catch(e){console.error(e);toast.error('Refresh failed');}finally{setLoading(false);}};// Derived rows\nconst filtered=useMemo(()=>{const k=q.trim().toLowerCase();return jobs.filter(j=>{var _j$company;if(status!=='all'&&(j.status||'active')!==status)return false;if(type!=='all'&&String(j.jobType||'').toLowerCase()!==type)return false;if(category!=='all'){const arr=Array.isArray(j.categories)?j.categories:[];if(!arr.includes(category))return false;}if(!k)return true;const hay=[j.title,j.shortDescription,j.description,j.location,...(Array.isArray(j.categories)?j.categories:[]),j.jobType,(_j$company=j.company)===null||_j$company===void 0?void 0:_j$company.name].filter(Boolean).join(' ').toLowerCase();return hay.includes(k);}).sort((a,b)=>{var _av,_bv;const dir=sortDir==='asc'?1:-1;let av=a[sortKey];let bv=b[sortKey];if(sortKey==='company'){var _a$company,_b$company;av=((_a$company=a.company)===null||_a$company===void 0?void 0:_a$company.name)||'';bv=((_b$company=b.company)===null||_b$company===void 0?void 0:_b$company.name)||'';}if(sortKey==='createdAt'||sortKey==='updatedAt'){return(new Date(av||0)-new Date(bv||0))*dir;}return String((_av=av)!==null&&_av!==void 0?_av:'').localeCompare(String((_bv=bv)!==null&&_bv!==void 0?_bv:''))*dir;});},[jobs,q,status,type,category,sortKey,sortDir]);// Pagination\nconst totalPages=Math.max(1,Math.ceil(filtered.length/pageSize));const pageSafe=Math.min(page,totalPages);const rows=filtered.slice((pageSafe-1)*pageSize,pageSafe*pageSize);const onHeaderClick=key=>{if(sortKey===key)setSortDir(sortDir==='asc'?'desc':'asc');else{setSortKey(key);setSortDir('asc');}};// Actions\nconst confirm=msg=>new Promise(res=>window.confirm(msg)?res(true):res(false));const setApproval=async function(job){let approved=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;try{await jobsAPI.update(job._id,{isApproved:approved});setJobs(prev=>prev.map(j=>j._id===job._id?_objectSpread(_objectSpread({},j),{},{isApproved:approved}):j));toast.success(approved?'Job approved':'Approval removed');}catch(e){console.error(e);toast.error('Failed to update approval');}};const toggleActive=async job=>{const next=(job.status||'active')==='active'?'inactive':'active';try{await jobsAPI.update(job._id,{status:next});toast.success(next==='active'?'Job reactivated':'Job set to inactive');setJobs(prev=>prev.map(j=>j._id===job._id?_objectSpread(_objectSpread({},j),{},{status:next}):j));}catch(e){console.error(e);toast.error('Failed to toggle status');}};const removeJob=async job=>{const ok=await confirm(\"Delete \\u201C\".concat(job.title,\"\\u201D? This cannot be undone.\"));if(!ok)return;try{await jobsAPI.remove(job._id);setJobs(prev=>prev.filter(j=>j._id!==job._id));toast.success('Job deleted');}catch(e){console.error(e);toast.error('Failed to delete');}};const submitForm=async e=>{e.preventDefault();// Normalize payload to match your model (keep optional fields optional)\nconst payload={title:form.title,company:form.company,jobType:String(form.jobType).toLowerCase(),// lowercase\nlocation:form.location||undefined,categories:form.category?[form.category]:undefined,// array if chosen\nshortDescription:form.shortDescription||undefined,description:form.description||undefined,status:form.status,isApproved:form.approvalStatus==='approved'};// remove undefined keys\nObject.keys(payload).forEach(k=>payload[k]===undefined&&delete payload[k]);try{if(editing){const updated=await jobsAPI.update(editing._id,payload);const job=(updated===null||updated===void 0?void 0:updated.job)||updated;setJobs(prev=>prev.map(j=>j._id===editing._id?_objectSpread(_objectSpread(_objectSpread({},j),job),{},{// trust server echo\ncompany:companies.find(c=>c._id===(job.company||payload.company))||j.company}):j));toast.success('Job updated');}else{const created=await jobsAPI.create(payload);const newJob=(created===null||created===void 0?void 0:created.job)||created;setJobs(prev=>[_objectSpread(_objectSpread({},newJob),{},{company:companies.find(c=>c._id===(newJob.company||payload.company))||null}),...prev]);toast.success('Job created');}setShowForm(false);resetForm();}catch(e){var _e$response,_e$response$data;console.error(e);toast.error((e===null||e===void 0?void 0:(_e$response=e.response)===null||_e$response===void 0?void 0:(_e$response$data=_e$response.data)===null||_e$response$data===void 0?void 0:_e$response$data.message)||'Save failed (check enum values & required fields)');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 sm:p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-xl sm:text-2xl font-semibold\",children:\"Job Management\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:\"Create, approve, and manage all job postings.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:refresh,className:\"inline-flex items-center gap-2 px-3 py-2 text-sm rounded-lg border bg-white hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(RefreshCw,{className:\"w-4 h-4\"}),\" Refresh\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:openCreate,className:\"inline-flex items-center gap-2 px-3 py-2 text-sm rounded-lg bg-blue-600 text-white hover:bg-blue-700\",children:[/*#__PURE__*/_jsx(Plus,{className:\"w-4 h-4\"}),\" New Job\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-6 gap-2 md:gap-3 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-2 relative\",children:[/*#__PURE__*/_jsx(Search,{className:\"w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400\"}),/*#__PURE__*/_jsx(\"input\",{value:q,onChange:e=>{setQ(e.target.value);setPage(1);},placeholder:\"Search title, company, location\\u2026\",className:\"w-full pl-9 pr-3 py-2 border rounded-lg text-sm\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 text-gray-500 md:col-span-1\",children:[/*#__PURE__*/_jsx(Filter,{className:\"w-4 h-4\"}),\"Filters\"]}),/*#__PURE__*/_jsxs(\"select\",{value:status,onChange:e=>{setStatus(e.target.value);setPage(1);},className:\"border rounded-lg px-2 py-2 text-sm\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"All Status\"}),STATUS_STATES.map(s=>/*#__PURE__*/_jsx(\"option\",{value:s,children:s},s))]}),/*#__PURE__*/_jsxs(\"select\",{value:type,onChange:e=>{setType(e.target.value);setPage(1);},className:\"border rounded-lg px-2 py-2 text-sm\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"All Types\"}),JOB_TYPES.map(t=>/*#__PURE__*/_jsx(\"option\",{value:t.value,children:t.label},t.value))]}),/*#__PURE__*/_jsxs(\"select\",{value:category,onChange:e=>{setCategory(e.target.value);setPage(1);},className:\"border rounded-lg px-2 py-2 text-sm md:col-span-2\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"All Categories\"}),categories===null||categories===void 0?void 0:categories.map(c=>/*#__PURE__*/_jsx(\"option\",{value:c,children:c},c))]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center gap-2 md:justify-end md:col-span-1\",children:/*#__PURE__*/_jsx(\"select\",{value:pageSize,onChange:e=>{setPageSize(Number(e.target.value));setPage(1);},className:\"border rounded-lg px-2 py-2 text-sm\",children:PAGE_SIZES.map(s=>/*#__PURE__*/_jsxs(\"option\",{value:s,children:[s,\"/page\"]},s))})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white border rounded-xl overflow-hidden\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full text-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50 text-gray-600\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[[['title','Title'],['company','Company'],['jobType','Type'],['location','Location'],['categories','Category'],['createdAt','Posted'],['status','Status'],['isApproved','Approval']].map(_ref2=>{let[key,label]=_ref2;return/*#__PURE__*/_jsx(\"th\",{onClick:()=>onHeaderClick(key),className:\"px-3 py-2 font-medium text-left cursor-pointer select-none\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"inline-flex items-center gap-1\",children:[label,sortKey===key&&/*#__PURE__*/_jsx(\"span\",{className:\"text-xs\",children:sortDir==='asc'?'▲':'▼'})]})},key);}),/*#__PURE__*/_jsx(\"th\",{className:\"px-3 py-2 text-right\",children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:loading?/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:10,className:\"py-10\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center\",children:/*#__PURE__*/_jsx(LoadingSpinner,{})})})}):rows.length===0?/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:10,className:\"py-10 text-center text-gray-500\",children:\"No jobs found.\"})}):rows.map(j=>{var _j$company2;return/*#__PURE__*/_jsxs(\"tr\",{className:\"border-t hover:bg-gray-50/60\",children:[/*#__PURE__*/_jsxs(\"td\",{className:\"px-3 py-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-gray-900 line-clamp-1\",children:j.title}),j.shortDescription&&/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-500 line-clamp-1\",children:j.shortDescription})]}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2\",children:((_j$company2=j.company)===null||_j$company2===void 0?void 0:_j$company2.name)||'—'}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2\",children:jobTypeLabel(j.jobType)}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2\",children:j.location||'—'}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2\",children:Array.isArray(j.categories)&&j.categories.length>0?j.categories.join(', '):'—'}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2\",children:j.createdAt?new Date(j.createdAt).toLocaleDateString():'—'}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2\",children:(j.status||'active')==='active'?/*#__PURE__*/_jsx(Badge,{className:\"bg-green-100 text-green-700\",children:\"active\"}):j.status==='draft'?/*#__PURE__*/_jsx(Badge,{className:\"bg-amber-100 text-amber-700\",children:\"draft\"}):j.status==='inactive'?/*#__PURE__*/_jsx(Badge,{className:\"bg-gray-100 text-gray-700\",children:\"inactive\"}):/*#__PURE__*/_jsx(Badge,{className:\"bg-gray-100 text-gray-700\",children:j.status})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2\",children:j.isApproved?/*#__PURE__*/_jsx(Badge,{className:\"bg-blue-100 text-blue-700\",children:\"approved\"}):/*#__PURE__*/_jsx(Badge,{className:\"bg-amber-100 text-amber-700\",children:\"pending\"})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-3 py-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-end gap-1\",children:[/*#__PURE__*/_jsx(\"button\",{title:\"Edit\",onClick:()=>openEdit(j),className:\"p-2 hover:bg-gray-100 rounded-lg\",children:/*#__PURE__*/_jsx(Pencil,{className:\"w-4 h-4\"})}),!j.isApproved?/*#__PURE__*/_jsx(\"button\",{title:\"Approve\",onClick:()=>setApproval(j,true),className:\"p-2 hover:bg-gray-100 rounded-lg text-green-700\",children:/*#__PURE__*/_jsx(CheckCircle2,{className:\"w-4 h-4\"})}):/*#__PURE__*/_jsx(\"button\",{title:\"Remove approval\",onClick:()=>setApproval(j,false),className:\"p-2 hover:bg-gray-100 rounded-lg\",children:/*#__PURE__*/_jsx(ArchiveRestore,{className:\"w-4 h-4\"})}),/*#__PURE__*/_jsx(\"button\",{title:(j.status||'active')==='active'?'Set inactive':'Activate',onClick:()=>toggleActive(j),className:\"p-2 hover:bg-gray-100 rounded-lg\",children:(j.status||'active')==='active'?/*#__PURE__*/_jsx(PauseCircle,{className:\"w-4 h-4\"}):/*#__PURE__*/_jsx(PlayCircle,{className:\"w-4 h-4\"})}),/*#__PURE__*/_jsx(\"button\",{title:\"Delete\",onClick:()=>removeJob(j),className:\"p-2 hover:bg-gray-100 rounded-lg text-rose-700\",children:/*#__PURE__*/_jsx(Trash2,{className:\"w-4 h-4\"})})]})})]},j._id);})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between px-3 py-2 border-t text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-gray-500\",children:[\"Page \",/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:pageSafe}),\" of\",' ',/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:totalPages}),\" \\xB7 Showing\",' ',/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:rows.length}),\" of\",' ',/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:filtered.length})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{disabled:pageSafe===1,onClick:()=>setPage(1),className:\"px-2 py-1 rounded border disabled:opacity-50\",children:\"\\u27EA\"}),/*#__PURE__*/_jsx(\"button\",{disabled:pageSafe===1,onClick:()=>setPage(p=>Math.max(1,p-1)),className:\"px-2 py-1 rounded border disabled:opacity-50\",children:\"\\u2039\"}),/*#__PURE__*/_jsx(\"button\",{disabled:pageSafe===totalPages,onClick:()=>setPage(p=>Math.min(totalPages,p+1)),className:\"px-2 py-1 rounded border disabled:opacity-50\",children:\"\\u203A\"}),/*#__PURE__*/_jsx(\"button\",{disabled:pageSafe===totalPages,onClick:()=>setPage(totalPages),className:\"px-2 py-1 rounded border disabled:opacity-50\",children:\"\\u27EB\"})]})]})]}),showForm&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-full max-w-2xl bg-white rounded-xl shadow-xl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between px-4 py-3 border-b\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold\",children:editing?'Edit Job':'New Job'}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowForm(false),className:\"text-gray-500 hover:text-gray-700\",children:\"\\u2715\"})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:submitForm,className:\"p-4 grid grid-cols-1 md:grid-cols-2 gap-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"Title\"}),/*#__PURE__*/_jsx(\"input\",{required:true,value:form.title,onChange:e=>setForm(f=>_objectSpread(_objectSpread({},f),{},{title:e.target.value})),className:\"w-full border rounded-lg px-3 py-2\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"Company\"}),/*#__PURE__*/_jsxs(\"select\",{required:true,value:form.company,onChange:e=>setForm(f=>_objectSpread(_objectSpread({},f),{},{company:e.target.value})),className:\"w-full border rounded-lg px-3 py-2\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select company\"}),companies===null||companies===void 0?void 0:companies.map(c=>/*#__PURE__*/_jsx(\"option\",{value:c._id,children:c.name},c._id))]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"Type\"}),/*#__PURE__*/_jsx(\"select\",{value:form.jobType,onChange:e=>setForm(f=>_objectSpread(_objectSpread({},f),{},{jobType:e.target.value})),className:\"w-full border rounded-lg px-3 py-2\",children:JOB_TYPES.map(t=>/*#__PURE__*/_jsx(\"option\",{value:t.value,children:t.label},t.value))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"Location\"}),/*#__PURE__*/_jsx(\"input\",{value:form.location,onChange:e=>setForm(f=>_objectSpread(_objectSpread({},f),{},{location:e.target.value})),className:\"w-full border rounded-lg px-3 py-2\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"Category\"}),/*#__PURE__*/_jsxs(\"select\",{value:form.category,onChange:e=>setForm(f=>_objectSpread(_objectSpread({},f),{},{category:e.target.value})),className:\"w-full border rounded-lg px-3 py-2\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select category\"}),categories===null||categories===void 0?void 0:categories.map(c=>/*#__PURE__*/_jsx(\"option\",{value:c,children:c},c))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"Short Description\"}),/*#__PURE__*/_jsx(\"input\",{value:form.shortDescription,onChange:e=>setForm(f=>_objectSpread(_objectSpread({},f),{},{shortDescription:e.target.value})),className:\"w-full border rounded-lg px-3 py-2\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{value:form.description,onChange:e=>setForm(f=>_objectSpread(_objectSpread({},f),{},{description:e.target.value})),rows:5,className:\"w-full border rounded-lg px-3 py-2\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"Status\"}),/*#__PURE__*/_jsx(\"select\",{value:form.status,onChange:e=>setForm(f=>_objectSpread(_objectSpread({},f),{},{status:e.target.value})),className:\"w-full border rounded-lg px-3 py-2\",children:STATUS_STATES.map(s=>/*#__PURE__*/_jsx(\"option\",{value:s,children:s},s))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"Approval\"}),/*#__PURE__*/_jsxs(\"select\",{value:form.approvalStatus,onChange:e=>setForm(f=>_objectSpread(_objectSpread({},f),{},{approvalStatus:e.target.value})),className:\"w-full border rounded-lg px-3 py-2\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"pending\",children:\"pending\"}),/*#__PURE__*/_jsx(\"option\",{value:\"approved\",children:\"approved\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-2 flex items-center justify-end gap-2 pt-2\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowForm(false),className:\"px-3 py-2 rounded-lg border\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"px-3 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700\",children:editing?'Save changes':'Create job'})]})]})]})})]});}","map":{"version":3,"names":["React","useEffect","useMemo","useState","Plus","Search","RefreshCw","Filter","Trash2","CheckCircle2","Pencil","PauseCircle","PlayCircle","ArchiveRestore","toast","LoadingSpinner","jobsAPI","companiesAPI","jsx","_jsx","jsxs","_jsxs","PAGE_SIZES","JOB_TYPES","value","label","jobTypeLabel","val","_JOB_TYPES$find","find","t","STATUS_STATES","Badge","_ref","children","className","concat","JobManagement","loading","setLoading","jobs","setJobs","categories","setCategories","companies","setCompanies","q","setQ","status","setStatus","type","setType","category","setCategory","sortKey","setSortKey","sortDir","setSortDir","pageSize","setPageSize","page","setPage","showForm","setShowForm","editing","setEditing","form","setForm","title","company","jobType","location","shortDescription","description","approvalStatus","resetForm","openCreate","openEdit","job","_job$company","_id","String","toLowerCase","Array","isArray","isApproved","_jobsAPI$list","_companiesAPI$list","_companiesAPI$list$ca","_companiesAPI$list$ca2","jobsRaw","catsRaw","compsRaw","Promise","all","list","call","includeCompany","catch","get","then","r","data","resolve","e","console","error","refresh","_jobsAPI$list2","_jobsAPI$list3","success","filtered","k","trim","filter","j","_j$company","arr","includes","hay","name","Boolean","join","sort","a","b","_av","_bv","dir","av","bv","_a$company","_b$company","Date","localeCompare","totalPages","Math","max","ceil","length","pageSafe","min","rows","slice","onHeaderClick","key","confirm","msg","res","window","setApproval","approved","arguments","undefined","update","prev","map","_objectSpread","toggleActive","next","removeJob","ok","remove","submitForm","preventDefault","payload","Object","keys","forEach","updated","c","created","create","newJob","_e$response","_e$response$data","response","message","onClick","onChange","target","placeholder","s","Number","_ref2","colSpan","_j$company2","createdAt","toLocaleDateString","disabled","p","onSubmit","required","f"],"sources":["/Users/macbookair/Desktop/AeroJobs/AeroJob/frontend/src/pages/JobManagement.js"],"sourcesContent":["// src/pages/JobManagement.js\r\nimport React, { useEffect, useMemo, useState } from 'react';\r\nimport {\r\n  Plus,\r\n  Search,\r\n  RefreshCw,\r\n  Filter,\r\n  Trash2,\r\n  CheckCircle2,\r\n  Pencil,\r\n  PauseCircle,\r\n  PlayCircle,\r\n  ArchiveRestore\r\n} from 'lucide-react';\r\nimport toast from 'react-hot-toast';\r\nimport LoadingSpinner from '../components/LoadingSpinner';\r\nimport { jobsAPI, companiesAPI } from '../utils/api';\r\n\r\nconst PAGE_SIZES = [10, 25, 50];\r\n\r\n// Use lowercase values (match Mongoose enum); keep nice labels for UI\r\nconst JOB_TYPES = [\r\n  { value: 'internship', label: 'Internship' },\r\n  { value: 'ojt', label: 'OJT' },\r\n  { value: 'part-time', label: 'Part-time' },\r\n  { value: 'full-time', label: 'Full-time' },\r\n  { value: 'contract', label: 'Contract' }\r\n];\r\nconst jobTypeLabel = (val) => JOB_TYPES.find(t => t.value === (val || ''))?.label || (val || '—');\r\n\r\n// Match your model enum exactly (no \"archived\")\r\nconst STATUS_STATES = ['active', 'inactive', 'closed', 'draft'];\r\n\r\nconst Badge = ({ children, className = '' }) => (\r\n  <span className={`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${className}`}>\r\n    {children}\r\n  </span>\r\n);\r\n\r\nexport default function JobManagement() {\r\n  // Data\r\n  const [loading, setLoading] = useState(true);\r\n  const [jobs, setJobs] = useState([]);\r\n  const [categories, setCategories] = useState([]);\r\n  const [companies, setCompanies] = useState([]);\r\n\r\n  // Filters & table state\r\n  const [q, setQ] = useState('');\r\n  const [status, setStatus] = useState('all');\r\n  const [type, setType] = useState('all');       // holds lowercase values or 'all'\r\n  const [category, setCategory] = useState('all');\r\n\r\n  const [sortKey, setSortKey] = useState('createdAt');\r\n  const [sortDir, setSortDir] = useState('desc');\r\n\r\n  const [pageSize, setPageSize] = useState(10);\r\n  const [page, setPage] = useState(1);\r\n\r\n  // Modal / form\r\n  const [showForm, setShowForm] = useState(false);\r\n  const [editing, setEditing] = useState(null);\r\n  const [form, setForm] = useState({\r\n    title: '',\r\n    company: '',\r\n    jobType: 'internship', // lowercase value\r\n    location: '',\r\n    category: '',          // UI single-select; we’ll map to categories[]\r\n    shortDescription: '',\r\n    description: '',\r\n    status: 'active',\r\n    approvalStatus: 'pending', // UI only; maps to isApproved\r\n  });\r\n\r\n  const resetForm = () => {\r\n    setEditing(null);\r\n    setForm({\r\n      title: '',\r\n      company: '',\r\n      jobType: 'internship',\r\n      location: '',\r\n      category: '',\r\n      shortDescription: '',\r\n      description: '',\r\n      status: 'active',\r\n      approvalStatus: 'pending',\r\n    });\r\n  };\r\n\r\n  const openCreate = () => {\r\n    resetForm();\r\n    setShowForm(true);\r\n  };\r\n\r\n  const openEdit = (job) => {\r\n    setEditing(job);\r\n    setForm({\r\n      title: job.title || '',\r\n      company: job.company?._id || job.company || '',\r\n      jobType: String(job.jobType || 'internship').toLowerCase(),\r\n      location: job.location || '',\r\n      category: Array.isArray(job.categories) ? (job.categories[0] || '') : '',\r\n      shortDescription: job.shortDescription || '',\r\n      description: job.description || '',\r\n      status: job.status || 'active',\r\n      approvalStatus: job.isApproved ? 'approved' : 'pending',\r\n    });\r\n    setShowForm(true);\r\n  };\r\n\r\n  // Fetch data\r\n  useEffect(() => {\r\n    (async () => {\r\n      try {\r\n        setLoading(true);\r\n        const [jobsRaw, catsRaw, compsRaw] = await Promise.all([\r\n          jobsAPI.list?.({ includeCompany: true }).catch(() => []),\r\n          jobsAPI.get('/jobs/categories').then(r => Array.isArray(r?.data) ? r.data : []).catch(() => []),\r\n          companiesAPI.list?.().catch?.(() => []) || Promise.resolve([]),\r\n        ]);\r\n        setJobs(Array.isArray(jobsRaw) ? jobsRaw : jobsRaw?.jobs || []);\r\n        setCategories(Array.isArray(catsRaw) ? catsRaw : []);\r\n        setCompanies(Array.isArray(compsRaw) ? compsRaw : compsRaw?.companies || []);\r\n      } catch (e) {\r\n        console.error(e);\r\n        toast.error('Failed to load jobs');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    })();\r\n  }, []);\r\n\r\n  const refresh = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const jobsRaw = await (jobsAPI.list?.({ includeCompany: true }) ?? jobsAPI.get('/jobs').then(r => r.data));\r\n      setJobs(Array.isArray(jobsRaw) ? jobsRaw : jobsRaw?.jobs || []);\r\n      toast.success('Refreshed');\r\n    } catch (e) {\r\n      console.error(e);\r\n      toast.error('Refresh failed');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Derived rows\r\n  const filtered = useMemo(() => {\r\n    const k = q.trim().toLowerCase();\r\n    return jobs\r\n      .filter(j => {\r\n        if (status !== 'all' && (j.status || 'active') !== status) return false;\r\n        if (type !== 'all' && String(j.jobType || '').toLowerCase() !== type) return false;\r\n        if (category !== 'all') {\r\n          const arr = Array.isArray(j.categories) ? j.categories : [];\r\n          if (!arr.includes(category)) return false;\r\n        }\r\n        if (!k) return true;\r\n        const hay = [\r\n          j.title,\r\n          j.shortDescription,\r\n          j.description,\r\n          j.location,\r\n          ...(Array.isArray(j.categories) ? j.categories : []),\r\n          j.jobType,\r\n          j.company?.name\r\n        ]\r\n          .filter(Boolean)\r\n          .join(' ')\r\n          .toLowerCase();\r\n        return hay.includes(k);\r\n      })\r\n      .sort((a, b) => {\r\n        const dir = sortDir === 'asc' ? 1 : -1;\r\n        let av = a[sortKey];\r\n        let bv = b[sortKey];\r\n        if (sortKey === 'company') {\r\n          av = a.company?.name || '';\r\n          bv = b.company?.name || '';\r\n        }\r\n        if (sortKey === 'createdAt' || sortKey === 'updatedAt') {\r\n          return (new Date(av || 0) - new Date(bv || 0)) * dir;\r\n        }\r\n        return String(av ?? '').localeCompare(String(bv ?? '')) * dir;\r\n      });\r\n  }, [jobs, q, status, type, category, sortKey, sortDir]);\r\n\r\n  // Pagination\r\n  const totalPages = Math.max(1, Math.ceil(filtered.length / pageSize));\r\n  const pageSafe = Math.min(page, totalPages);\r\n  const rows = filtered.slice((pageSafe - 1) * pageSize, pageSafe * pageSize);\r\n\r\n  const onHeaderClick = (key) => {\r\n    if (sortKey === key) setSortDir(sortDir === 'asc' ? 'desc' : 'asc');\r\n    else {\r\n      setSortKey(key);\r\n      setSortDir('asc');\r\n    }\r\n  };\r\n\r\n  // Actions\r\n  const confirm = (msg) =>\r\n    new Promise((res) => (window.confirm(msg) ? res(true) : res(false)));\r\n\r\n  const setApproval = async (job, approved = true) => {\r\n    try {\r\n      await jobsAPI.update(job._id, { isApproved: approved });\r\n      setJobs((prev) =>\r\n        prev.map((j) => (j._id === job._id ? { ...j, isApproved: approved } : j))\r\n      );\r\n      toast.success(approved ? 'Job approved' : 'Approval removed');\r\n    } catch (e) {\r\n      console.error(e);\r\n      toast.error('Failed to update approval');\r\n    }\r\n  };\r\n\r\n  const toggleActive = async (job) => {\r\n    const next = (job.status || 'active') === 'active' ? 'inactive' : 'active';\r\n    try {\r\n      await jobsAPI.update(job._id, { status: next });\r\n      toast.success(next === 'active' ? 'Job reactivated' : 'Job set to inactive');\r\n      setJobs((prev) => prev.map((j) => (j._id === job._id ? { ...j, status: next } : j)));\r\n    } catch (e) {\r\n      console.error(e);\r\n      toast.error('Failed to toggle status');\r\n    }\r\n  };\r\n\r\n  const removeJob = async (job) => {\r\n    const ok = await confirm(`Delete “${job.title}”? This cannot be undone.`);\r\n    if (!ok) return;\r\n    try {\r\n      await jobsAPI.remove(job._id);\r\n      setJobs((prev) => prev.filter((j) => j._id !== job._id));\r\n      toast.success('Job deleted');\r\n    } catch (e) {\r\n      console.error(e);\r\n      toast.error('Failed to delete');\r\n    }\r\n  };\r\n\r\n  const submitForm = async (e) => {\r\n    e.preventDefault();\r\n\r\n    // Normalize payload to match your model (keep optional fields optional)\r\n    const payload = {\r\n      title: form.title,\r\n      company: form.company,\r\n      jobType: String(form.jobType).toLowerCase(),     // lowercase\r\n      location: form.location || undefined,\r\n      categories: form.category ? [form.category] : undefined, // array if chosen\r\n      shortDescription: form.shortDescription || undefined,\r\n      description: form.description || undefined,\r\n      status: form.status,\r\n      isApproved: form.approvalStatus === 'approved',\r\n    };\r\n\r\n    // remove undefined keys\r\n    Object.keys(payload).forEach(k => payload[k] === undefined && delete payload[k]);\r\n\r\n    try {\r\n      if (editing) {\r\n        const updated = await jobsAPI.update(editing._id, payload);\r\n        const job = updated?.job || updated;\r\n        setJobs((prev) =>\r\n          prev.map((j) =>\r\n            j._id === editing._id\r\n              ? {\r\n                  ...j,\r\n                  ...job, // trust server echo\r\n                  company:\r\n                    companies.find((c) => c._id === (job.company || payload.company)) ||\r\n                    j.company,\r\n                }\r\n              : j\r\n          )\r\n        );\r\n        toast.success('Job updated');\r\n      } else {\r\n        const created = await jobsAPI.create(payload);\r\n        const newJob = created?.job || created;\r\n        setJobs((prev) => [\r\n          {\r\n            ...newJob,\r\n            company:\r\n              companies.find((c) => c._id === (newJob.company || payload.company)) ||\r\n              null,\r\n          },\r\n          ...prev,\r\n        ]);\r\n        toast.success('Job created');\r\n      }\r\n      setShowForm(false);\r\n      resetForm();\r\n    } catch (e) {\r\n      console.error(e);\r\n      toast.error(\r\n        e?.response?.data?.message || 'Save failed (check enum values & required fields)'\r\n      );\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-4 sm:p-6\">\r\n      {/* Header */}\r\n      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-4\">\r\n        <div>\r\n          <h1 className=\"text-xl sm:text-2xl font-semibold\">Job Management</h1>\r\n          <p className=\"text-sm text-gray-500\">Create, approve, and manage all job postings.</p>\r\n        </div>\r\n        <div className=\"flex items-center gap-2\">\r\n          <button\r\n            onClick={refresh}\r\n            className=\"inline-flex items-center gap-2 px-3 py-2 text-sm rounded-lg border bg-white hover:bg-gray-50\"\r\n          >\r\n            <RefreshCw className=\"w-4 h-4\" /> Refresh\r\n          </button>\r\n          <button\r\n            onClick={openCreate}\r\n            className=\"inline-flex items-center gap-2 px-3 py-2 text-sm rounded-lg bg-blue-600 text-white hover:bg-blue-700\"\r\n          >\r\n            <Plus className=\"w-4 h-4\" /> New Job\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Filters */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-6 gap-2 md:gap-3 mb-4\">\r\n        <div className=\"md:col-span-2 relative\">\r\n          <Search className=\"w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400\" />\r\n          <input\r\n            value={q}\r\n            onChange={(e) => {\r\n              setQ(e.target.value);\r\n              setPage(1);\r\n            }}\r\n            placeholder=\"Search title, company, location…\"\r\n            className=\"w-full pl-9 pr-3 py-2 border rounded-lg text-sm\"\r\n          />\r\n        </div>\r\n        <div className=\"flex items-center gap-2 text-gray-500 md:col-span-1\">\r\n          <Filter className=\"w-4 h-4\" />\r\n          Filters\r\n        </div>\r\n        <select\r\n          value={status}\r\n          onChange={(e) => {\r\n            setStatus(e.target.value);\r\n            setPage(1);\r\n          }}\r\n          className=\"border rounded-lg px-2 py-2 text-sm\"\r\n        >\r\n          <option value=\"all\">All Status</option>\r\n          {STATUS_STATES.map((s) => (\r\n            <option key={s} value={s}>\r\n              {s}\r\n            </option>\r\n          ))}\r\n        </select>\r\n        <select\r\n          value={type}\r\n          onChange={(e) => {\r\n            setType(e.target.value);\r\n            setPage(1);\r\n          }}\r\n          className=\"border rounded-lg px-2 py-2 text-sm\"\r\n        >\r\n          <option value=\"all\">All Types</option>\r\n          {JOB_TYPES.map((t) => (\r\n            <option key={t.value} value={t.value}>\r\n              {t.label}\r\n            </option>\r\n          ))}\r\n        </select>\r\n        <select\r\n          value={category}\r\n          onChange={(e) => {\r\n            setCategory(e.target.value);\r\n            setPage(1);\r\n          }}\r\n          className=\"border rounded-lg px-2 py-2 text-sm md:col-span-2\"\r\n        >\r\n          <option value=\"all\">All Categories</option>\r\n          {categories?.map((c) => (\r\n            <option key={c} value={c}>\r\n              {c}\r\n            </option>\r\n          ))}\r\n        </select>\r\n        <div className=\"flex items-center gap-2 md:justify-end md:col-span-1\">\r\n          <select\r\n            value={pageSize}\r\n            onChange={(e) => {\r\n              setPageSize(Number(e.target.value));\r\n              setPage(1);\r\n            }}\r\n            className=\"border rounded-lg px-2 py-2 text-sm\"\r\n          >\r\n            {PAGE_SIZES.map((s) => (\r\n              <option key={s} value={s}>\r\n                {s}/page\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Table */}\r\n      <div className=\"bg-white border rounded-xl overflow-hidden\">\r\n        <div className=\"overflow-x-auto\">\r\n          <table className=\"min-w-full text-sm\">\r\n            <thead className=\"bg-gray-50 text-gray-600\">\r\n              <tr>\r\n                {[\r\n                  ['title', 'Title'],\r\n                  ['company', 'Company'],\r\n                  ['jobType', 'Type'],\r\n                  ['location', 'Location'],\r\n                  ['categories', 'Category'],\r\n                  ['createdAt', 'Posted'],\r\n                  ['status', 'Status'],\r\n                  ['isApproved', 'Approval'],\r\n                ].map(([key, label]) => (\r\n                  <th\r\n                    key={key}\r\n                    onClick={() => onHeaderClick(key)}\r\n                    className=\"px-3 py-2 font-medium text-left cursor-pointer select-none\"\r\n                  >\r\n                    <div className=\"inline-flex items-center gap-1\">\r\n                      {label}\r\n                      {sortKey === key && (\r\n                        <span className=\"text-xs\">{sortDir === 'asc' ? '▲' : '▼'}</span>\r\n                      )}\r\n                    </div>\r\n                  </th>\r\n                ))}\r\n                <th className=\"px-3 py-2 text-right\">Actions</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {loading ? (\r\n                <tr>\r\n                  <td colSpan={10} className=\"py-10\">\r\n                    <div className=\"flex justify-center\">\r\n                      <LoadingSpinner />\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              ) : rows.length === 0 ? (\r\n                <tr>\r\n                  <td colSpan={10} className=\"py-10 text-center text-gray-500\">\r\n                    No jobs found.\r\n                  </td>\r\n                </tr>\r\n              ) : (\r\n                rows.map((j) => (\r\n                  <tr key={j._id} className=\"border-t hover:bg-gray-50/60\">\r\n                    <td className=\"px-3 py-2\">\r\n                      <div className=\"font-medium text-gray-900 line-clamp-1\">{j.title}</div>\r\n                      {j.shortDescription && (\r\n                        <div className=\"text-gray-500 line-clamp-1\">{j.shortDescription}</div>\r\n                      )}\r\n                    </td>\r\n                    <td className=\"px-3 py-2\">{j.company?.name || '—'}</td>\r\n                    <td className=\"px-3 py-2\">{jobTypeLabel(j.jobType)}</td>\r\n                    <td className=\"px-3 py-2\">{j.location || '—'}</td>\r\n                    <td className=\"px-3 py-2\">\r\n                      {Array.isArray(j.categories) && j.categories.length > 0\r\n                        ? j.categories.join(', ')\r\n                        : '—'}\r\n                    </td>\r\n                    <td className=\"px-3 py-2\">\r\n                      {j.createdAt ? new Date(j.createdAt).toLocaleDateString() : '—'}\r\n                    </td>\r\n                    <td className=\"px-3 py-2\">\r\n                      {(j.status || 'active') === 'active' ? (\r\n                        <Badge className=\"bg-green-100 text-green-700\">active</Badge>\r\n                      ) : j.status === 'draft' ? (\r\n                        <Badge className=\"bg-amber-100 text-amber-700\">draft</Badge>\r\n                      ) : j.status === 'inactive' ? (\r\n                        <Badge className=\"bg-gray-100 text-gray-700\">inactive</Badge>\r\n                      ) : (\r\n                        <Badge className=\"bg-gray-100 text-gray-700\">{j.status}</Badge>\r\n                      )}\r\n                    </td>\r\n                    <td className=\"px-3 py-2\">\r\n                      {j.isApproved ? (\r\n                        <Badge className=\"bg-blue-100 text-blue-700\">approved</Badge>\r\n                      ) : (\r\n                        <Badge className=\"bg-amber-100 text-amber-700\">pending</Badge>\r\n                      )}\r\n                    </td>\r\n                    <td className=\"px-3 py-2\">\r\n                      <div className=\"flex items-center justify-end gap-1\">\r\n                        <button\r\n                          title=\"Edit\"\r\n                          onClick={() => openEdit(j)}\r\n                          className=\"p-2 hover:bg-gray-100 rounded-lg\"\r\n                        >\r\n                          <Pencil className=\"w-4 h-4\" />\r\n                        </button>\r\n\r\n                        {!j.isApproved ? (\r\n                          <button\r\n                            title=\"Approve\"\r\n                            onClick={() => setApproval(j, true)}\r\n                            className=\"p-2 hover:bg-gray-100 rounded-lg text-green-700\"\r\n                          >\r\n                            <CheckCircle2 className=\"w-4 h-4\" />\r\n                          </button>\r\n                        ) : (\r\n                          <button\r\n                            title=\"Remove approval\"\r\n                            onClick={() => setApproval(j, false)}\r\n                            className=\"p-2 hover:bg-gray-100 rounded-lg\"\r\n                          >\r\n                            <ArchiveRestore className=\"w-4 h-4\" />\r\n                          </button>\r\n                        )}\r\n\r\n                        <button\r\n                          title={(j.status || 'active') === 'active' ? 'Set inactive' : 'Activate'}\r\n                          onClick={() => toggleActive(j)}\r\n                          className=\"p-2 hover:bg-gray-100 rounded-lg\"\r\n                        >\r\n                          {(j.status || 'active') === 'active' ? (\r\n                            <PauseCircle className=\"w-4 h-4\" />\r\n                          ) : (\r\n                            <PlayCircle className=\"w-4 h-4\" />\r\n                          )}\r\n                        </button>\r\n\r\n                        <button\r\n                          title=\"Delete\"\r\n                          onClick={() => removeJob(j)}\r\n                          className=\"p-2 hover:bg-gray-100 rounded-lg text-rose-700\"\r\n                        >\r\n                          <Trash2 className=\"w-4 h-4\" />\r\n                        </button>\r\n                      </div>\r\n                    </td>\r\n                  </tr>\r\n                ))\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n\r\n        {/* Pagination */}\r\n        <div className=\"flex items-center justify-between px-3 py-2 border-t text-sm\">\r\n          <div className=\"text-gray-500\">\r\n            Page <span className=\"font-medium\">{pageSafe}</span> of{' '}\r\n            <span className=\"font-medium\">{totalPages}</span> · Showing{' '}\r\n            <span className=\"font-medium\">{rows.length}</span> of{' '}\r\n            <span className=\"font-medium\">{filtered.length}</span>\r\n          </div>\r\n          <div className=\"flex items-center gap-2\">\r\n            <button\r\n              disabled={pageSafe === 1}\r\n              onClick={() => setPage(1)}\r\n              className=\"px-2 py-1 rounded border disabled:opacity-50\"\r\n            >\r\n              ⟪\r\n            </button>\r\n            <button\r\n              disabled={pageSafe === 1}\r\n              onClick={() => setPage((p) => Math.max(1, p - 1))}\r\n              className=\"px-2 py-1 rounded border disabled:opacity-50\"\r\n            >\r\n              ‹\r\n            </button>\r\n            <button\r\n              disabled={pageSafe === totalPages}\r\n              onClick={() => setPage((p) => Math.min(totalPages, p + 1))}\r\n              className=\"px-2 py-1 rounded border disabled:opacity-50\"\r\n            >\r\n              ›\r\n            </button>\r\n            <button\r\n              disabled={pageSafe === totalPages}\r\n              onClick={() => setPage(totalPages)}\r\n              className=\"px-2 py-1 rounded border disabled:opacity-50\"\r\n            >\r\n              ⟫\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Create/Edit Modal */}\r\n      {showForm && (\r\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40\">\r\n          <div className=\"w-full max-w-2xl bg-white rounded-xl shadow-xl\">\r\n            <div className=\"flex items-center justify-between px-4 py-3 border-b\">\r\n              <h2 className=\"text-lg font-semibold\">{editing ? 'Edit Job' : 'New Job'}</h2>\r\n              <button onClick={() => setShowForm(false)} className=\"text-gray-500 hover:text-gray-700\">\r\n                ✕\r\n              </button>\r\n            </div>\r\n\r\n            <form onSubmit={submitForm} className=\"p-4 grid grid-cols-1 md:grid-cols-2 gap-3\">\r\n              <div className=\"md:col-span-2\">\r\n                <label className=\"block text-sm font-medium mb-1\">Title</label>\r\n                <input\r\n                  required\r\n                  value={form.title}\r\n                  onChange={(e) => setForm((f) => ({ ...f, title: e.target.value }))}\r\n                  className=\"w-full border rounded-lg px-3 py-2\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium mb-1\">Company</label>\r\n                <select\r\n                  required\r\n                  value={form.company}\r\n                  onChange={(e) => setForm((f) => ({ ...f, company: e.target.value }))}\r\n                  className=\"w-full border rounded-lg px-3 py-2\"\r\n                >\r\n                  <option value=\"\">Select company</option>\r\n                  {companies?.map((c) => (\r\n                    <option key={c._id} value={c._id}>\r\n                      {c.name}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium mb-1\">Type</label>\r\n                <select\r\n                  value={form.jobType}\r\n                  onChange={(e) => setForm((f) => ({ ...f, jobType: e.target.value }))}\r\n                  className=\"w-full border rounded-lg px-3 py-2\"\r\n                >\r\n                  {JOB_TYPES.map((t) => (\r\n                    <option key={t.value} value={t.value}>\r\n                      {t.label}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium mb-1\">Location</label>\r\n                <input\r\n                  value={form.location}\r\n                  onChange={(e) => setForm((f) => ({ ...f, location: e.target.value }))}\r\n                  className=\"w-full border rounded-lg px-3 py-2\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium mb-1\">Category</label>\r\n                <select\r\n                  value={form.category}\r\n                  onChange={(e) => setForm((f) => ({ ...f, category: e.target.value }))}\r\n                  className=\"w-full border rounded-lg px-3 py-2\"\r\n                >\r\n                  <option value=\"\">Select category</option>\r\n                  {categories?.map((c) => (\r\n                    <option key={c} value={c}>\r\n                      {c}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n\r\n              <div className=\"md:col-span-2\">\r\n                <label className=\"block text-sm font-medium mb-1\">Short Description</label>\r\n                <input\r\n                  value={form.shortDescription}\r\n                  onChange={(e) => setForm((f) => ({ ...f, shortDescription: e.target.value }))}\r\n                  className=\"w-full border rounded-lg px-3 py-2\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"md:col-span-2\">\r\n                <label className=\"block text-sm font-medium mb-1\">Description</label>\r\n                <textarea\r\n                  value={form.description}\r\n                  onChange={(e) => setForm((f) => ({ ...f, description: e.target.value }))}\r\n                  rows={5}\r\n                  className=\"w-full border rounded-lg px-3 py-2\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium mb-1\">Status</label>\r\n                <select\r\n                  value={form.status}\r\n                  onChange={(e) => setForm((f) => ({ ...f, status: e.target.value }))}\r\n                  className=\"w-full border rounded-lg px-3 py-2\"\r\n                >\r\n                  {STATUS_STATES.map((s) => (\r\n                    <option key={s} value={s}>\r\n                      {s}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium mb-1\">Approval</label>\r\n                <select\r\n                  value={form.approvalStatus}\r\n                  onChange={(e) => setForm((f) => ({ ...f, approvalStatus: e.target.value }))}\r\n                  className=\"w-full border rounded-lg px-3 py-2\"\r\n                >\r\n                  <option value=\"pending\">pending</option>\r\n                  <option value=\"approved\">approved</option>\r\n                </select>\r\n              </div>\r\n\r\n              <div className=\"md:col-span-2 flex items-center justify-end gap-2 pt-2\">\r\n                <button type=\"button\" onClick={() => setShowForm(false)} className=\"px-3 py-2 rounded-lg border\">\r\n                  Cancel\r\n                </button>\r\n                <button type=\"submit\" className=\"px-3 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700\">\r\n                  {editing ? 'Save changes' : 'Create job'}\r\n                </button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}