{"ast":null,"code":"import _objectSpread from\"/Users/macbookair/Desktop/AeroJobs/AeroJob/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useRef}from'react';import{useForm}from'react-hook-form';import{User,Mail,Phone,MapPin,BookOpen,GraduationCap,Camera,Save,Edit3,X}from'lucide-react';import{useAuth}from'../contexts/AuthContext';import http,{profileAPI}from'../utils/api';import LoadingSpinner from'../components/LoadingSpinner';import toast from'react-hot-toast';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Profile=()=>{const[loading,setLoading]=useState(true);const[saving,setSaving]=useState(false);const[editing,setEditing]=useState(false);const[profile,setProfile]=useState(null);const{updateUser}=useAuth()||{};const photoInputRef=useRef(null);const{register,handleSubmit,formState:{errors},reset}=useForm();const splitName=function(){let fullName=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';const parts=fullName.trim().split(/\\s+/);if(!parts.length)return{firstName:'',lastName:''};if(parts.length===1)return{firstName:parts[0],lastName:''};return{firstName:parts[0],lastName:parts.slice(1).join(' ')};};const normalizeProfile=p=>{if(!p)return p;const{firstName,lastName}=splitName(p.fullName||'');return _objectSpread(_objectSpread({},p),{},{firstName,lastName});};const formatForSubmit=data=>{const payload=_objectSpread({},data);// combine first/last into fullName (your schema)\npayload.fullName=\"\".concat(data.firstName||'',\" \").concat(data.lastName||'').trim();// only send fields your Profile schema supports\nconst allowed=['fullName','email','role','avatarUrl','bio','course','yearLevel','contactNumber','address','studentId'];Object.keys(payload).forEach(k=>{if(!allowed.includes(k))delete payload[k];});return payload;};useEffect(()=>{let isMounted=true;(async()=>{try{var _data$profile;setLoading(true);const data=await profileAPI.getMe();// { user, profile } or profile\nconst serverProfile=(_data$profile=data.profile)!==null&&_data$profile!==void 0?_data$profile:data;const uiProfile=normalizeProfile(serverProfile);if(isMounted){setProfile(uiProfile);reset(uiProfile);}}catch(error){console.error('Error fetching profile:',error);if(isMounted)setProfile(null);}finally{if(isMounted)setLoading(false);}})();return()=>{isMounted=false;};},[reset]);const onSubmit=async data=>{try{var _updatedData$profile;setSaving(true);const payload=formatForSubmit(data);const updatedData=await profileAPI.updateMe(payload);const updatedProfile=normalizeProfile((_updatedData$profile=updatedData.profile)!==null&&_updatedData$profile!==void 0?_updatedData$profile:updatedData);// Update local form/profile\nsetProfile(updatedProfile);reset(updatedProfile);setEditing(false);// Update header immediately\nif(typeof updateUser==='function'){const[first,...rest]=(updatedProfile.fullName||'').trim().split(/\\s+/);const last=rest.join(' ');updateUser({name:updatedProfile.fullName,fullName:updatedProfile.fullName,firstName:first||'',lastName:last||'',role:updatedProfile.role,userType:updatedProfile.role,avatarUrl:updatedProfile.avatarUrl,email:updatedProfile.email});}toast.success('Profile saved');}catch(error){console.error('Error updating profile:',error);toast.error((error===null||error===void 0?void 0:error.message)||'Failed to save profile');}finally{setSaving(false);}};const handleCancelEdit=()=>{reset(profile);setEditing(false);};const handleEditPicture=async e=>{var _e$target$files;const file=(_e$target$files=e.target.files)===null||_e$target$files===void 0?void 0:_e$target$files[0];if(!file)return;try{var _data$profile2;const formData=new FormData();formData.append('profilePicture',file);const{data}=await http.post('/profile/picture',formData,{headers:{'Content-Type':'multipart/form-data'}});const updatedProfile=normalizeProfile((_data$profile2=data.profile)!==null&&_data$profile2!==void 0?_data$profile2:data);setProfile(updatedProfile);reset(updatedProfile);if(typeof updateUser==='function'){updateUser({avatarUrl:updatedProfile.avatarUrl});}toast.success('Profile photo updated');}catch(error){console.error('Error updating profile picture:',error);toast.error((error===null||error===void 0?void 0:error.message)||'Failed to update photo');}finally{if(photoInputRef.current)photoInputRef.current.value='';}};if(loading)return/*#__PURE__*/_jsx(LoadingSpinner,{text:\"Loading profile...\"});if(!profile)return/*#__PURE__*/_jsx(\"div\",{children:\"Profile not found\"});const ProfileField=_ref=>{let{icon:Icon,label,value,editable=true,children}=_ref;return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3 py-3 border-b border-gray-200 last:border-b-0\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 bg-primary-100 rounded-lg flex items-center justify-center flex-shrink-0\",children:/*#__PURE__*/_jsx(Icon,{className:\"w-4 h-4 text-primary-600\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:label}),editing&&editable?children:/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-900\",children:value||'Not provided'})]})]});};return/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-8\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-heading font-bold text-gray-900\",children:\"Profile\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mt-1\",children:\"Manage your personal information and preferences\"})]}),!editing?/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setEditing(true),className:\"btn btn-primary flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(Edit3,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Edit Profile\"})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:handleCancelEdit,className:\"btn btn-outline flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(X,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Cancel\"})]}),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:()=>{var _document$getElementB;return(_document$getElementB=document.getElementById('profile-form'))===null||_document$getElementB===void 0?void 0:_document$getElementB.requestSubmit();}// ✅ always triggers submit\n,disabled:saving,className:\"btn btn-primary flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(Save,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsx(\"span\",{children:saving?'Saving...':'Save Changes'})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-3 gap-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"lg:col-span-1\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card p-6 text-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative inline-block mb-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-32 h-32 bg-primary-100 rounded-full flex items-center justify-center mx-auto overflow-hidden\",children:profile.avatarUrl?/*#__PURE__*/_jsx(\"img\",{src:profile.avatarUrl,alt:\"Profile\",className:\"w-32 h-32 rounded-full object-cover\"}):/*#__PURE__*/_jsx(User,{className:\"w-16 h-16 text-primary-600\"})}),editing&&/*#__PURE__*/_jsxs(\"label\",{className:\"absolute bottom-2 right-2 bg-white rounded-full p-2 shadow-md cursor-pointer hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(Camera,{className:\"w-4 h-4 text-gray-600\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:handleEditPicture,className:\"hidden\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-center\",children:[/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:()=>{var _photoInputRef$curren;return(_photoInputRef$curren=photoInputRef.current)===null||_photoInputRef$curren===void 0?void 0:_photoInputRef$curren.click();},className:\"btn btn-outline flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(Camera,{className:\"w-4 h-4\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Change Photo\"})]}),/*#__PURE__*/_jsx(\"input\",{ref:photoInputRef,type:\"file\",accept:\"image/*\",onChange:handleEditPicture,className:\"hidden\"})]}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-900 mt-4\",children:profile.fullName||\"\".concat(profile.firstName||'',\" \").concat(profile.lastName||'').trim()}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 capitalize\",children:profile.role})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"lg:col-span-2\",children:/*#__PURE__*/_jsxs(\"form\",{id:\"profile-form\",onSubmit:handleSubmit(onSubmit),className:\"card p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 mb-6\",children:\"Personal Information\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(ProfileField,{icon:User,label:\"First Name\",value:profile.firstName,editable:true,children:[/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"text\"},register('firstName',{required:'First name is required',minLength:{value:2,message:'First name must be at least 2 characters'}})),{},{className:\"input\",disabled:!editing,defaultValue:profile.firstName})),errors.firstName&&/*#__PURE__*/_jsx(\"p\",{className:\"form-error\",children:errors.firstName.message})]}),/*#__PURE__*/_jsxs(ProfileField,{icon:User,label:\"Last Name\",value:profile.lastName,editable:true,children:[/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"text\"},register('lastName',{required:'Last name is required',minLength:{value:2,message:'Last name must be at least 2 characters'}})),{},{className:\"input\",disabled:!editing,defaultValue:profile.lastName})),errors.lastName&&/*#__PURE__*/_jsx(\"p\",{className:\"form-error\",children:errors.lastName.message})]})]}),/*#__PURE__*/_jsx(ProfileField,{icon:Mail,label:\"Email\",value:profile.email,editable:false,children:/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:profile.email||'',className:\"input bg-gray-100\",disabled:true,readOnly:true})}),/*#__PURE__*/_jsx(ProfileField,{icon:Phone,label:\"Phone\",value:profile.contactNumber,editable:true,children:/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"tel\"},register('contactNumber')),{},{className:\"input\",placeholder:\"Enter your phone number\",disabled:!editing,defaultValue:profile.contactNumber}))}),/*#__PURE__*/_jsx(ProfileField,{icon:MapPin,label:\"Address\",value:profile.address,editable:true,children:/*#__PURE__*/_jsx(\"textarea\",_objectSpread(_objectSpread({},register('address')),{},{className:\"input\",rows:3,placeholder:\"Enter your address\",disabled:!editing,defaultValue:profile.address}))}),(profile.role==='student'||profile.role==='alumni')&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ProfileField,{icon:BookOpen,label:\"Student ID\",value:profile.studentId,editable:true,children:/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"text\"},register('studentId')),{},{className:\"input\",placeholder:\"Enter your student ID\",disabled:!editing,defaultValue:profile.studentId}))}),/*#__PURE__*/_jsx(ProfileField,{icon:GraduationCap,label:\"Course\",value:profile.course,editable:true,children:/*#__PURE__*/_jsxs(\"select\",_objectSpread(_objectSpread({},register('course')),{},{className:\"input\",defaultValue:profile.course||'',disabled:!editing,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select your course\"}),/*#__PURE__*/_jsxs(\"optgroup\",{label:\"INSTITUTE OF ENGINEERING AND TECHNOLOGY\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"BS in Aeronautical Engineering\",children:\"BS in Aeronautical Engineering\"}),/*#__PURE__*/_jsx(\"option\",{value:\"BS in Air Transportation Major in Advance Flying\",children:\"BS in Air Transportation Major in Advance Flying\"}),/*#__PURE__*/_jsx(\"option\",{value:\"BS in Aircraft Maintenance Technology\",children:\"BS in Aircraft Maintenance Technology\"}),/*#__PURE__*/_jsx(\"option\",{value:\"BS in Aviation Electronics Technology\",children:\"BS in Aviation Electronics Technology\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Associate in Aircraft Maintenance Technology\",children:\"Associate in Aircraft Maintenance Technology\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Associate in Aviation Electronics Technology\",children:\"Associate in Aviation Electronics Technology\"})]}),/*#__PURE__*/_jsxs(\"optgroup\",{label:\"INSTITUTE OF LIBERAL ARTS AND SCIENCES\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"BS in Aviation Communication Major in Flight Operations\",children:\"BS in Aviation Communication Major in Flight Operations\"}),/*#__PURE__*/_jsx(\"option\",{value:\"BS in Aviation Tourism Major in Travel Management\",children:\"BS in Aviation Tourism Major in Travel Management\"}),/*#__PURE__*/_jsx(\"option\",{value:\"BS in Supply Management with Specialization in Aviation Logistics\",children:\"BS in Supply Management with Specialization in Aviation Logistics\"}),/*#__PURE__*/_jsx(\"option\",{value:\"BS in Aviation Safety and Security Management\",children:\"BS in Aviation Safety and Security Management\"})]}),/*#__PURE__*/_jsxs(\"optgroup\",{label:\"INSTITUTE OF COMPUTER STUDIES\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"BS in Information Technology with Specialization in Aviation Information Technology\",children:\"BS in Information Technology with Specialization in Aviation Information Technology\"}),/*#__PURE__*/_jsx(\"option\",{value:\"BS in Information System with Specialization in Aviation Information System\",children:\"BS in Information System with Specialization in Aviation Information System\"})]}),/*#__PURE__*/_jsxs(\"optgroup\",{label:\"INSTITUTE OF GRADUATE STUDIES\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"Master of Education in Aeronautical Management\",children:\"Master of Education in Aeronautical Management\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Master in Public Administration Major in Government and Airport Administration\",children:\"Master in Public Administration Major in Government and Airport Administration\"})]})]}))}),/*#__PURE__*/_jsx(ProfileField,{icon:GraduationCap,label:\"Year Level\",value:profile.yearLevel,editable:true,children:/*#__PURE__*/_jsxs(\"select\",_objectSpread(_objectSpread({},register('yearLevel')),{},{className:\"input\",defaultValue:profile.yearLevel||'',disabled:!editing,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select year level\"}),/*#__PURE__*/_jsx(\"option\",{value:\"1st Year\",children:\"1st Year\"}),/*#__PURE__*/_jsx(\"option\",{value:\"2nd Year\",children:\"2nd Year\"}),/*#__PURE__*/_jsx(\"option\",{value:\"3rd Year\",children:\"3rd Year\"}),/*#__PURE__*/_jsx(\"option\",{value:\"4th Year\",children:\"4th Year\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Graduate\",children:\"Graduate\"})]}))})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Bio\"}),editing?/*#__PURE__*/_jsx(\"textarea\",_objectSpread(_objectSpread({},register('bio')),{},{className:\"input\",rows:4,placeholder:\"Tell us about yourself...\",defaultValue:profile.bio})):/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-900\",children:profile.bio||'Not provided'})]})]})})]})]});};export default Profile;","map":{"version":3,"names":["React","useState","useEffect","useRef","useForm","User","Mail","Phone","MapPin","BookOpen","GraduationCap","Camera","Save","Edit3","X","useAuth","http","profileAPI","LoadingSpinner","toast","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Profile","loading","setLoading","saving","setSaving","editing","setEditing","profile","setProfile","updateUser","photoInputRef","register","handleSubmit","formState","errors","reset","splitName","fullName","arguments","length","undefined","parts","trim","split","firstName","lastName","slice","join","normalizeProfile","p","_objectSpread","formatForSubmit","data","payload","concat","allowed","Object","keys","forEach","k","includes","isMounted","_data$profile","getMe","serverProfile","uiProfile","error","console","onSubmit","_updatedData$profile","updatedData","updateMe","updatedProfile","first","rest","last","name","role","userType","avatarUrl","email","success","message","handleCancelEdit","handleEditPicture","e","_e$target$files","file","target","files","_data$profile2","formData","FormData","append","post","headers","current","value","text","children","ProfileField","_ref","icon","Icon","label","editable","className","onClick","type","_document$getElementB","document","getElementById","requestSubmit","disabled","src","alt","accept","onChange","_photoInputRef$curren","click","ref","id","required","minLength","defaultValue","readOnly","contactNumber","placeholder","address","rows","studentId","course","yearLevel","bio"],"sources":["/Users/macbookair/Desktop/AeroJobs/AeroJob/frontend/src/pages/Profile.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport {\r\n  User,\r\n  Mail,\r\n  Phone,\r\n  MapPin,\r\n  BookOpen,\r\n  GraduationCap,\r\n  Camera,\r\n  Save,\r\n  Edit3,\r\n  X\r\n} from 'lucide-react';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport http, { profileAPI } from '../utils/api';\r\nimport LoadingSpinner from '../components/LoadingSpinner';\r\nimport toast from 'react-hot-toast';\r\n\r\nconst Profile = () => {\r\n  const [loading, setLoading] = useState(true);\r\n  const [saving, setSaving] = useState(false);\r\n  const [editing, setEditing] = useState(false);\r\n  const [profile, setProfile] = useState(null);\r\n  const { updateUser } = useAuth() || {};\r\n  const photoInputRef = useRef(null);\r\n\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    formState: { errors },\r\n    reset\r\n  } = useForm();\r\n\r\n  const splitName = (fullName = '') => {\r\n    const parts = fullName.trim().split(/\\s+/);\r\n    if (!parts.length) return { firstName: '', lastName: '' };\r\n    if (parts.length === 1) return { firstName: parts[0], lastName: '' };\r\n    return { firstName: parts[0], lastName: parts.slice(1).join(' ') };\r\n  };\r\n\r\n  const normalizeProfile = (p) => {\r\n    if (!p) return p;\r\n    const { firstName, lastName } = splitName(p.fullName || '');\r\n    return { ...p, firstName, lastName };\r\n  };\r\n\r\n  const formatForSubmit = (data) => {\r\n    const payload = { ...data };\r\n\r\n    // combine first/last into fullName (your schema)\r\n    payload.fullName = `${data.firstName || ''} ${data.lastName || ''}`.trim();\r\n\r\n    // only send fields your Profile schema supports\r\n    const allowed = [\r\n      'fullName',\r\n      'email',\r\n      'role',\r\n      'avatarUrl',\r\n      'bio',\r\n      'course',\r\n      'yearLevel',\r\n      'contactNumber',\r\n      'address',\r\n      'studentId'\r\n    ];\r\n    Object.keys(payload).forEach((k) => {\r\n      if (!allowed.includes(k)) delete payload[k];\r\n    });\r\n\r\n    return payload;\r\n  };\r\n\r\n  useEffect(() => {\r\n    let isMounted = true;\r\n    (async () => {\r\n      try {\r\n        setLoading(true);\r\n        const data = await profileAPI.getMe(); // { user, profile } or profile\r\n        const serverProfile = data.profile ?? data;\r\n        const uiProfile = normalizeProfile(serverProfile);\r\n        if (isMounted) {\r\n          setProfile(uiProfile);\r\n          reset(uiProfile);\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching profile:', error);\r\n        if (isMounted) setProfile(null);\r\n      } finally {\r\n        if (isMounted) setLoading(false);\r\n      }\r\n    })();\r\n    return () => { isMounted = false; };\r\n  }, [reset]);\r\n\r\n  const onSubmit = async (data) => {\r\n    try {\r\n      setSaving(true);\r\n      const payload = formatForSubmit(data);\r\n      const updatedData = await profileAPI.updateMe(payload);\r\n      const updatedProfile = normalizeProfile(updatedData.profile ?? updatedData);\r\n\r\n      // Update local form/profile\r\n      setProfile(updatedProfile);\r\n      reset(updatedProfile);\r\n      setEditing(false);\r\n\r\n      // Update header immediately\r\n      if (typeof updateUser === 'function') {\r\n        const [first, ...rest] = (updatedProfile.fullName || '').trim().split(/\\s+/);\r\n        const last = rest.join(' ');\r\n        updateUser({\r\n          name: updatedProfile.fullName,\r\n          fullName: updatedProfile.fullName,\r\n          firstName: first || '',\r\n          lastName: last || '',\r\n          role: updatedProfile.role,\r\n          userType: updatedProfile.role,\r\n          avatarUrl: updatedProfile.avatarUrl,\r\n          email: updatedProfile.email,\r\n        });\r\n      }\r\n\r\n      toast.success('Profile saved');\r\n    } catch (error) {\r\n      console.error('Error updating profile:', error);\r\n      toast.error(error?.message || 'Failed to save profile');\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  const handleCancelEdit = () => {\r\n    reset(profile);\r\n    setEditing(false);\r\n  };\r\n\r\n  const handleEditPicture = async (e) => {\r\n    const file = e.target.files?.[0];\r\n    if (!file) return;\r\n    try {\r\n      const formData = new FormData();\r\n      formData.append('profilePicture', file);\r\n\r\n      const { data } = await http.post('/profile/picture', formData, {\r\n        headers: { 'Content-Type': 'multipart/form-data' },\r\n      });\r\n\r\n      const updatedProfile = normalizeProfile(data.profile ?? data);\r\n      setProfile(updatedProfile);\r\n      reset(updatedProfile);\r\n\r\n      if (typeof updateUser === 'function') {\r\n        updateUser({ avatarUrl: updatedProfile.avatarUrl });\r\n      }\r\n\r\n      toast.success('Profile photo updated');\r\n    } catch (error) {\r\n      console.error('Error updating profile picture:', error);\r\n      toast.error(error?.message || 'Failed to update photo');\r\n    } finally {\r\n      if (photoInputRef.current) photoInputRef.current.value = '';\r\n    }\r\n  };\r\n\r\n  if (loading) return <LoadingSpinner text=\"Loading profile...\" />;\r\n  if (!profile) return <div>Profile not found</div>;\r\n\r\n  const ProfileField = ({ icon: Icon, label, value, editable = true, children }) => (\r\n    <div className=\"flex items-center space-x-3 py-3 border-b border-gray-200 last:border-b-0\">\r\n      <div className=\"w-8 h-8 bg-primary-100 rounded-lg flex items-center justify-center flex-shrink-0\">\r\n        <Icon className=\"w-4 h-4 text-primary-600\" />\r\n      </div>\r\n      <div className=\"flex-1\">\r\n        <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n          {label}\r\n        </label>\r\n        {editing && editable ? children : (\r\n          <p className=\"text-gray-900\">{value || 'Not provided'}</p>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between mb-8\">\r\n        <div>\r\n          <h1 className=\"text-3xl font-heading font-bold text-gray-900\">\r\n            Profile\r\n          </h1>\r\n          <p className=\"text-gray-600 mt-1\">\r\n            Manage your personal information and preferences\r\n          </p>\r\n        </div>\r\n\r\n        {!editing ? (\r\n          <button\r\n            onClick={() => setEditing(true)}\r\n            className=\"btn btn-primary flex items-center space-x-2\"\r\n          >\r\n            <Edit3 className=\"w-4 h-4\" />\r\n            <span>Edit Profile</span>\r\n          </button>\r\n        ) : (\r\n          <div className=\"flex space-x-2\">\r\n            <button\r\n              onClick={handleCancelEdit}\r\n              className=\"btn btn-outline flex items-center space-x-2\"\r\n            >\r\n              <X className=\"w-4 h-4\" />\r\n              <span>Cancel</span>\r\n            </button>\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => document.getElementById('profile-form')?.requestSubmit()} // ✅ always triggers submit\r\n              disabled={saving}\r\n              className=\"btn btn-primary flex items-center space-x-2\"\r\n            >\r\n              <Save className=\"w-4 h-4\" />\r\n              <span>{saving ? 'Saving...' : 'Save Changes'}</span>\r\n            </button>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\r\n        {/* Profile Picture */}\r\n        <div className=\"lg:col-span-1\">\r\n          <div className=\"card p-6 text-center\">\r\n            <div className=\"relative inline-block mb-4\">\r\n              <div className=\"w-32 h-32 bg-primary-100 rounded-full flex items-center justify-center mx-auto overflow-hidden\">\r\n                {profile.avatarUrl ? (\r\n                  <img\r\n                    src={profile.avatarUrl}\r\n                    alt=\"Profile\"\r\n                    className=\"w-32 h-32 rounded-full object-cover\"\r\n                  />\r\n                ) : (\r\n                  <User className=\"w-16 h-16 text-primary-600\" />\r\n                )}\r\n              </div>\r\n\r\n              {editing && (\r\n                <label className=\"absolute bottom-2 right-2 bg-white rounded-full p-2 shadow-md cursor-pointer hover:bg-gray-50\">\r\n                  <Camera className=\"w-4 h-4 text-gray-600\" />\r\n                  <input\r\n                    type=\"file\"\r\n                    accept=\"image/*\"\r\n                    onChange={handleEditPicture}\r\n                    className=\"hidden\"\r\n                  />\r\n                </label>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"flex justify-center\">\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => photoInputRef.current?.click()}\r\n                className=\"btn btn-outline flex items-center space-x-2\"\r\n              >\r\n                <Camera className=\"w-4 h-4\" />\r\n                <span>Change Photo</span>\r\n              </button>\r\n              <input\r\n                ref={photoInputRef}\r\n                type=\"file\"\r\n                accept=\"image/*\"\r\n                onChange={handleEditPicture}\r\n                className=\"hidden\"\r\n              />\r\n            </div>\r\n\r\n            <h2 className=\"text-xl font-semibold text-gray-900 mt-4\">\r\n              {profile.fullName || `${profile.firstName || ''} ${profile.lastName || ''}`.trim()}\r\n            </h2>\r\n            <p className=\"text-gray-600 capitalize\">{profile.role}</p>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Profile Form */}\r\n        <div className=\"lg:col-span-2\">\r\n          <form id=\"profile-form\" onSubmit={handleSubmit(onSubmit)} className=\"card p-6\">\r\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-6\">\r\n              Personal Information\r\n            </h3>\r\n\r\n            <div className=\"space-y-4\">\r\n              {/* Basic Information */}\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                <ProfileField icon={User} label=\"First Name\" value={profile.firstName} editable>\r\n                  <input\r\n                    type=\"text\"\r\n                    {...register('firstName', {\r\n                      required: 'First name is required',\r\n                      minLength: { value: 2, message: 'First name must be at least 2 characters' }\r\n                    })}\r\n                    className=\"input\"\r\n                    disabled={!editing}\r\n                    defaultValue={profile.firstName}\r\n                  />\r\n                  {errors.firstName && <p className=\"form-error\">{errors.firstName.message}</p>}\r\n                </ProfileField>\r\n\r\n                <ProfileField icon={User} label=\"Last Name\" value={profile.lastName} editable>\r\n                  <input\r\n                    type=\"text\"\r\n                    {...register('lastName', {\r\n                      required: 'Last name is required',\r\n                      minLength: { value: 2, message: 'Last name must be at least 2 characters' }\r\n                    })}\r\n                    className=\"input\"\r\n                    disabled={!editing}\r\n                    defaultValue={profile.lastName}\r\n                  />\r\n                  {errors.lastName && <p className=\"form-error\">{errors.lastName.message}</p>}\r\n                </ProfileField>\r\n              </div>\r\n\r\n              <ProfileField icon={Mail} label=\"Email\" value={profile.email} editable={false}>\r\n                <input\r\n                  type=\"email\"\r\n                  value={profile.email || ''}\r\n                  className=\"input bg-gray-100\"\r\n                  disabled\r\n                  readOnly\r\n                />\r\n              </ProfileField>\r\n\r\n              <ProfileField icon={Phone} label=\"Phone\" value={profile.contactNumber} editable>\r\n                <input\r\n                  type=\"tel\"\r\n                  {...register('contactNumber')}\r\n                  className=\"input\"\r\n                  placeholder=\"Enter your phone number\"\r\n                  disabled={!editing}\r\n                  defaultValue={profile.contactNumber}\r\n                />\r\n              </ProfileField>\r\n\r\n              <ProfileField icon={MapPin} label=\"Address\" value={profile.address} editable>\r\n                <textarea\r\n                  {...register('address')}\r\n                  className=\"input\"\r\n                  rows={3}\r\n                  placeholder=\"Enter your address\"\r\n                  disabled={!editing}\r\n                  defaultValue={profile.address}\r\n                />\r\n              </ProfileField>\r\n\r\n              {(profile.role === 'student' || profile.role === 'alumni') && (\r\n                <>\r\n                  <ProfileField icon={BookOpen} label=\"Student ID\" value={profile.studentId} editable>\r\n                    <input\r\n                      type=\"text\"\r\n                      {...register('studentId')}\r\n                      className=\"input\"\r\n                      placeholder=\"Enter your student ID\"\r\n                      disabled={!editing}\r\n                      defaultValue={profile.studentId}\r\n                    />\r\n                  </ProfileField>\r\n\r\n                  <ProfileField icon={GraduationCap} label=\"Course\" value={profile.course} editable>\r\n                    <select\r\n                      {...register('course')}\r\n                      className=\"input\"\r\n                      defaultValue={profile.course || ''}\r\n                      disabled={!editing}\r\n                    >\r\n                      <option value=\"\">Select your course</option>\r\n\r\n                      <optgroup label=\"INSTITUTE OF ENGINEERING AND TECHNOLOGY\">\r\n                        <option value=\"BS in Aeronautical Engineering\">BS in Aeronautical Engineering</option>\r\n                        <option value=\"BS in Air Transportation Major in Advance Flying\">BS in Air Transportation Major in Advance Flying</option>\r\n                        <option value=\"BS in Aircraft Maintenance Technology\">BS in Aircraft Maintenance Technology</option>\r\n                        <option value=\"BS in Aviation Electronics Technology\">BS in Aviation Electronics Technology</option>\r\n                        <option value=\"Associate in Aircraft Maintenance Technology\">Associate in Aircraft Maintenance Technology</option>\r\n                        <option value=\"Associate in Aviation Electronics Technology\">Associate in Aviation Electronics Technology</option>\r\n                      </optgroup>\r\n\r\n                      <optgroup label=\"INSTITUTE OF LIBERAL ARTS AND SCIENCES\">\r\n                        <option value=\"BS in Aviation Communication Major in Flight Operations\">BS in Aviation Communication Major in Flight Operations</option>\r\n                        <option value=\"BS in Aviation Tourism Major in Travel Management\">BS in Aviation Tourism Major in Travel Management</option>\r\n                        <option value=\"BS in Supply Management with Specialization in Aviation Logistics\">BS in Supply Management with Specialization in Aviation Logistics</option>\r\n                        <option value=\"BS in Aviation Safety and Security Management\">BS in Aviation Safety and Security Management</option>\r\n                      </optgroup>\r\n\r\n                      <optgroup label=\"INSTITUTE OF COMPUTER STUDIES\">\r\n                        <option value=\"BS in Information Technology with Specialization in Aviation Information Technology\">\r\n                          BS in Information Technology with Specialization in Aviation Information Technology\r\n                        </option>\r\n                        <option value=\"BS in Information System with Specialization in Aviation Information System\">\r\n                          BS in Information System with Specialization in Aviation Information System\r\n                        </option>\r\n                      </optgroup>\r\n\r\n                      <optgroup label=\"INSTITUTE OF GRADUATE STUDIES\">\r\n                        <option value=\"Master of Education in Aeronautical Management\">Master of Education in Aeronautical Management</option>\r\n                        <option value=\"Master in Public Administration Major in Government and Airport Administration\">\r\n                          Master in Public Administration Major in Government and Airport Administration\r\n                        </option>\r\n                      </optgroup>\r\n                    </select>\r\n                  </ProfileField>\r\n\r\n                  <ProfileField icon={GraduationCap} label=\"Year Level\" value={profile.yearLevel} editable>\r\n                    <select\r\n                      {...register('yearLevel')}\r\n                      className=\"input\"\r\n                      defaultValue={profile.yearLevel || ''}\r\n                      disabled={!editing}\r\n                    >\r\n                      <option value=\"\">Select year level</option>\r\n                      <option value=\"1st Year\">1st Year</option>\r\n                      <option value=\"2nd Year\">2nd Year</option>\r\n                      <option value=\"3rd Year\">3rd Year</option>\r\n                      <option value=\"4th Year\">4th Year</option>\r\n                      <option value=\"Graduate\">Graduate</option>\r\n                    </select>\r\n                  </ProfileField>\r\n                </>\r\n              )}\r\n            </div>\r\n\r\n            {/* Bio */}\r\n            <div className=\"mt-6\">\r\n              <label className=\"form-label\">Bio</label>\r\n              {editing ? (\r\n                <textarea\r\n                  {...register('bio')}\r\n                  className=\"input\"\r\n                  rows={4}\r\n                  placeholder=\"Tell us about yourself...\"\r\n                  defaultValue={profile.bio}\r\n                />\r\n              ) : (\r\n                <p className=\"text-gray-900\">{profile.bio || 'Not provided'}</p>\r\n              )}\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Profile;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}