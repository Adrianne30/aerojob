{"ast":null,"code":"import _objectSpread from\"/Users/macbookair/Desktop/AeroJobs/AeroJob/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useMemo,useState}from'react';import{Link,useLocation,useNavigate}from'react-router-dom';import{Users,UserPlus,Search,ShieldCheck,GraduationCap,User as UserIcon,Mail,ToggleLeft,ToggleRight,Trash2,RefreshCw}from'lucide-react';import{usersAPI}from'../utils/api';import LoadingSpinner from'../components/LoadingSpinner';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const PAGE_SIZE_OPTIONS=[10,25,50];const RoleBadge=_ref=>{let{role}=_ref;const classMap={admin:'bg-purple-100 text-purple-700',student:'bg-blue-100 text-blue-700',alumni:'bg-amber-100 text-amber-700'};const Icon=role==='admin'?ShieldCheck:role==='student'?GraduationCap:UserIcon;return/*#__PURE__*/_jsxs(\"span\",{className:\"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium \".concat(classMap[role]||'bg-gray-100 text-gray-700'),children:[/*#__PURE__*/_jsx(Icon,{className:\"w-3.5 h-3.5\"}),(role===null||role===void 0?void 0:role.charAt(0).toUpperCase())+(role===null||role===void 0?void 0:role.slice(1))]});};const StatusBadge=_ref2=>{let{active}=_ref2;return/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium \".concat(active?'bg-green-100 text-green-700':'bg-red-100 text-red-700'),children:active?'Active':'Inactive'});};export default function ManageUsers(){const location=useLocation();const navigate=useNavigate();const[banner,setBanner]=useState(()=>{var _location$state;return(_location$state=location.state)!==null&&_location$state!==void 0&&_location$state.message?{type:location.state.success?'success':'error',text:location.state.message}:{type:null,text:''};});const[serverError,setServerError]=useState('');// raw + ui state\nconst[loading,setLoading]=useState(true);const[usersAll,setUsersAll]=useState([]);const[search,setSearch]=useState('');const[role,setRole]=useState('');const[status,setStatus]=useState('');const[selectedCourse,setSelectedCourse]=useState('all');const[courseOptions,setCourseOptions]=useState([]);const[page,setPage]=useState(1);const[limit,setLimit]=useState(PAGE_SIZE_OPTIONS[0]);useEffect(()=>{(async()=>{try{setLoading(true);setServerError('');const arr=await usersAPI.list();setUsersAll(Array.isArray(arr)?arr:[]);}catch(err){console.error('Failed to fetch users',err);setServerError('Failed to fetch users');}finally{setLoading(false);}})();},[]);useEffect(()=>{var _location$state2;if((_location$state2=location.state)!==null&&_location$state2!==void 0&&_location$state2.message)navigate(location.pathname,{replace:true});},[location,navigate]);/* ---------- Course derivation (from current users) ---------- */const getCourseOf=u=>{var _u$course;if(!u||u.userType!=='student'&&u.userType!=='alumni')return'';if((_u$course=u.course)!==null&&_u$course!==void 0&&_u$course.name)return String(u.course.name).trim();if(typeof u.course==='string'&&u.course.trim())return u.course.trim();if(typeof u.yearCourse==='string'&&u.yearCourse.includes('•')){const right=u.yearCourse.split('•')[1];return right?right.trim():'';}return'';};useEffect(()=>{const uniq=Array.from(new Set(usersAll.map(getCourseOf).filter(Boolean))).sort((a,b)=>a.localeCompare(b));setCourseOptions(uniq);if(selectedCourse!=='all'&&!uniq.includes(selectedCourse)){setSelectedCourse('all');}},[usersAll]);/* ---------- Filtering + pagination (client-side) ---------- */const filtered=useMemo(()=>{const q=search.trim().toLowerCase();return usersAll.filter(u=>{const matchSearch=!q||\"\".concat(u.firstName||'',\" \").concat(u.lastName||'').toLowerCase().includes(q)||(u.email||'').toLowerCase().includes(q);const matchRole=!role||u.userType===role;const matchStatus=!status||(status==='active'?!!u.isActive:!u.isActive);const course=getCourseOf(u);const matchCourse=selectedCourse==='all'||selectedCourse===''||course===selectedCourse;return matchSearch&&matchRole&&matchStatus&&matchCourse;});},[usersAll,search,role,status,selectedCourse]);// eslint-disable-line\nconst total=filtered.length;const totalPages=Math.max(1,Math.ceil(total/limit));const pageSafe=Math.min(page,totalPages);const start=(pageSafe-1)*limit;const paginated=filtered.slice(start,start+limit);/* ---------- Actions ---------- */const handleToggleActive=async user=>{const want=!user.isActive;if(!window.confirm(\"\".concat(want?'Activate':'Deactivate',\" \").concat(user.firstName,\" \").concat(user.lastName,\"?\")))return;try{setServerError('');// optimistic update\nsetUsersAll(prev=>prev.map(u=>u._id===user._id?_objectSpread(_objectSpread({},u),{},{isActive:want}):u));await usersAPI.update(user._id,{isActive:want});setBanner({type:'success',text:\"User has been \".concat(want?'activated':'deactivated',\" successfully\")});}catch(err){console.error('Toggle active failed',err);// revert\nsetUsersAll(prev=>prev.map(u=>u._id===user._id?_objectSpread(_objectSpread({},u),{},{isActive:user.isActive}):u));setBanner({type:'error',text:'Error updating user status'});setServerError('Failed to update user status');}};const handleDelete=async user=>{if(!window.confirm(\"Delete \".concat(user.firstName,\" \").concat(user.lastName,\"? This cannot be undone.\")))return;try{setServerError('');const before=usersAll;setUsersAll(prev=>prev.filter(u=>u._id!==user._id));// optimistic\nawait usersAPI.remove(user._id);setBanner({type:'success',text:'User deleted successfully'});}catch(err){console.error('Delete user failed',err);setServerError('Failed to delete user');setBanner({type:'error',text:'Error deleting user'});}};const handleReset=()=>{setSearch('');setRole('');setStatus('');setSelectedCourse('all');// NEW\nsetPage(1);};/* ---------- Render ---------- */return/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6 flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-2xl font-heading font-bold text-gray-900 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Users,{className:\"w-6 h-6 text-primary-600\"}),\"Manage Users\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"View, search, and manage all users in the platform\"})]}),/*#__PURE__*/_jsxs(Link,{to:\"/admin/create-user\",className:\"btn btn-primary inline-flex items-center gap-2\",children:[/*#__PURE__*/_jsx(UserPlus,{className:\"w-4 h-4\"}),\"Create User\"]})]}),banner.type&&banner.text&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-4 rounded-md p-3 text-sm \".concat(banner.type==='success'?'bg-green-50 text-green-700 border border-green-200':'bg-red-50 text-red-700 border border-red-200'),children:banner.text}),serverError&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-4 rounded-md border border-red-300 bg-red-50 p-3 text-sm text-red-700\",children:serverError}),/*#__PURE__*/_jsxs(\"div\",{className:\"card p-4 mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-4 gap-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Search\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\",children:/*#__PURE__*/_jsx(Search,{className:\"h-4 w-4 text-gray-400\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"input pl-10\",placeholder:\"Search by name or email\",value:search,onChange:e=>{setSearch(e.target.value);setPage(1);}})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Role\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"input\",value:role,onChange:e=>{setRole(e.target.value);setPage(1);},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"All roles\"}),/*#__PURE__*/_jsx(\"option\",{value:\"student\",children:\"Student\"}),/*#__PURE__*/_jsx(\"option\",{value:\"alumni\",children:\"Alumni\"}),/*#__PURE__*/_jsx(\"option\",{value:\"admin\",children:\"Admin\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Status\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"input\",value:status,onChange:e=>{setStatus(e.target.value);setPage(1);},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"All\"}),/*#__PURE__*/_jsx(\"option\",{value:\"active\",children:\"Active\"}),/*#__PURE__*/_jsx(\"option\",{value:\"inactive\",children:\"Inactive\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 grid grid-cols-1 md:grid-cols-4 gap-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Course\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"input\",value:selectedCourse,onChange:e=>{setSelectedCourse(e.target.value);setPage(1);},children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"All\"}),courseOptions.map(c=>/*#__PURE__*/_jsx(\"option\",{value:c,children:c},c))]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Rows per page\"}),/*#__PURE__*/_jsx(\"select\",{className:\"input\",value:limit,onChange:e=>{setLimit(Number(e.target.value));setPage(1);},children:PAGE_SIZE_OPTIONS.map(n=>/*#__PURE__*/_jsx(\"option\",{value:n,children:n},n))})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-end\",children:/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"btn btn-outline inline-flex items-center gap-2\",onClick:handleReset,title:\"Reset filters\",children:[/*#__PURE__*/_jsx(RefreshCw,{className:\"w-4 h-4\"}),\"Reset\"]})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card overflow-hidden\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full divide-y divide-gray-200 text-base\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-8 py-4 text-left text-sm font-semibold text-gray-600 uppercase\",children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-8 py-4 text-left text-sm font-semibold text-gray-600 uppercase\",children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-8 py-4 text-left text-sm font-semibold text-gray-600 uppercase\",children:\"Role\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-8 py-4 text-left text-sm font-semibold text-gray-600 uppercase\",children:\"Year/Course\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-8 py-4 text-left text-sm font-semibold text-gray-600 uppercase\",children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-8 py-4 text-left text-sm font-semibold text-gray-600 uppercase\",children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"bg-white divide-y divide-gray-200\",children:loading?/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"6\",className:\"px-8 py-8\",children:/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center\",children:/*#__PURE__*/_jsx(LoadingSpinner,{text:\"Loading users...\"})})})}):paginated.length===0?/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"6\",className:\"px-8 py-8 text-center text-sm text-gray-500\",children:\"No users found\"})}):paginated.map(u=>{var _u$course2;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-8 py-5 whitespace-nowrap\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0 w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center text-gray-600\",children:/*#__PURE__*/_jsx(Users,{className:\"w-4 h-4\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-gray-900\",children:\"\".concat(u.firstName||'',\" \").concat(u.lastName||'').trim()||'—'})})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-8 py-5 whitespace-nowrap text-gray-700\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"inline-flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Mail,{className:\"w-4 h-4 text-gray-400\"}),u.email||'—']})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-8 py-5 whitespace-nowrap\",children:/*#__PURE__*/_jsx(RoleBadge,{role:u.userType})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-8 py-5 whitespace-nowrap text-gray-700\",children:u.userType==='student'||u.userType==='alumni'?[u.yearLevel,((_u$course2=u.course)===null||_u$course2===void 0?void 0:_u$course2.name)||u.course||getCourseOf(u)].filter(Boolean).join(' • '):'—'}),/*#__PURE__*/_jsx(\"td\",{className:\"px-8 py-5 whitespace-nowrap\",children:/*#__PURE__*/_jsx(StatusBadge,{active:!!u.isActive})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-8 py-5 whitespace-nowrap font-medium\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleToggleActive(u),className:\"text-gray-600 hover:text-primary-600 inline-flex items-center gap-1\",title:u.isActive?'Deactivate':'Activate',children:u.isActive?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ToggleRight,{className:\"w-4 h-4\"}),\" Deactivate\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ToggleLeft,{className:\"w-4 h-4\"}),\" Activate\"]})}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleDelete(u),className:\"text-red-600 hover:text-red-700 inline-flex items-center gap-1\",title:\"Delete\",children:[/*#__PURE__*/_jsx(Trash2,{className:\"w-4 h-4\"}),\" Delete\"]})]})})]},u._id);})})]})}),!loading&&/*#__PURE__*/_jsxs(\"div\",{className:\"px-6 py-4 bg-gray-50 flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-600\",children:[\"Page \",pageSafe,\" of \",totalPages,\" \\u2022 \",total,\" total\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline btn-sm\",disabled:pageSafe<=1,onClick:()=>setPage(p=>Math.max(1,p-1)),children:\"Previous\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline btn-sm\",disabled:pageSafe>=totalPages,onClick:()=>setPage(p=>Math.min(totalPages,p+1)),children:\"Next\"})]})]})]})]});}","map":{"version":3,"names":["React","useEffect","useMemo","useState","Link","useLocation","useNavigate","Users","UserPlus","Search","ShieldCheck","GraduationCap","User","UserIcon","Mail","ToggleLeft","ToggleRight","Trash2","RefreshCw","usersAPI","LoadingSpinner","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","PAGE_SIZE_OPTIONS","RoleBadge","_ref","role","classMap","admin","student","alumni","Icon","className","concat","children","charAt","toUpperCase","slice","StatusBadge","_ref2","active","ManageUsers","location","navigate","banner","setBanner","_location$state","state","message","type","success","text","serverError","setServerError","loading","setLoading","usersAll","setUsersAll","search","setSearch","setRole","status","setStatus","selectedCourse","setSelectedCourse","courseOptions","setCourseOptions","page","setPage","limit","setLimit","arr","list","Array","isArray","err","console","error","_location$state2","pathname","replace","getCourseOf","u","_u$course","userType","course","name","String","trim","yearCourse","includes","right","split","uniq","from","Set","map","filter","Boolean","sort","a","b","localeCompare","filtered","q","toLowerCase","matchSearch","firstName","lastName","email","matchRole","matchStatus","isActive","matchCourse","total","length","totalPages","Math","max","ceil","pageSafe","min","start","paginated","handleToggleActive","user","want","window","confirm","prev","_id","_objectSpread","update","handleDelete","before","remove","handleReset","to","placeholder","value","onChange","e","target","c","Number","n","onClick","title","colSpan","_u$course2","yearLevel","join","disabled","p"],"sources":["/Users/macbookair/Desktop/AeroJobs/AeroJob/frontend/src/pages/ManageUsers.js"],"sourcesContent":["import React, { useEffect, useMemo, useState } from 'react';\r\nimport { Link, useLocation, useNavigate } from 'react-router-dom';\r\nimport {\r\n  Users, UserPlus, Search, ShieldCheck, GraduationCap, User as UserIcon,\r\n  Mail, ToggleLeft, ToggleRight, Trash2, RefreshCw\r\n} from 'lucide-react';\r\nimport { usersAPI } from '../utils/api';\r\nimport LoadingSpinner from '../components/LoadingSpinner';\r\n\r\nconst PAGE_SIZE_OPTIONS = [10, 25, 50];\r\nconst RoleBadge = ({ role }) => {\r\n  const classMap = {\r\n    admin: 'bg-purple-100 text-purple-700',\r\n    student: 'bg-blue-100 text-blue-700',\r\n    alumni: 'bg-amber-100 text-amber-700'\r\n  };\r\n  const Icon = role === 'admin' ? ShieldCheck : role === 'student' ? GraduationCap : UserIcon;\r\n  return (\r\n    <span className={`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${classMap[role] || 'bg-gray-100 text-gray-700'}`}>\r\n      <Icon className=\"w-3.5 h-3.5\" />\r\n      {role?.charAt(0).toUpperCase() + role?.slice(1)}\r\n    </span>\r\n  );\r\n};\r\n\r\nconst StatusBadge = ({ active }) => (\r\n  <span className={`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${active ? 'bg-green-100 text-green-700' : 'bg-red-100 text-red-700'}`}>\r\n    {active ? 'Active' : 'Inactive'}\r\n  </span>\r\n);\r\n\r\nexport default function ManageUsers() {\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n\r\n  \r\n  const [banner, setBanner] = useState(() =>\r\n    location.state?.message\r\n      ? { type: location.state.success ? 'success' : 'error', text: location.state.message }\r\n      : { type: null, text: '' }\r\n  );\r\n  const [serverError, setServerError] = useState('');\r\n\r\n  // raw + ui state\r\n  const [loading, setLoading] = useState(true);\r\n  const [usersAll, setUsersAll] = useState([]);\r\n  const [search, setSearch] = useState('');\r\n  const [role, setRole] = useState('');\r\n  const [status, setStatus] = useState('');    \r\n  const [selectedCourse, setSelectedCourse] = useState('all'); \r\n  const [courseOptions, setCourseOptions] = useState([]);     \r\n\r\n  const [page, setPage] = useState(1);\r\n  const [limit, setLimit] = useState(PAGE_SIZE_OPTIONS[0]);\r\n\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      try {\r\n        setLoading(true);\r\n        setServerError('');\r\n        const arr = await usersAPI.list();\r\n        setUsersAll(Array.isArray(arr) ? arr:[]);\r\n      } catch (err) {\r\n        console.error('Failed to fetch users', err);\r\n        setServerError('Failed to fetch users');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    })();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (location.state?.message) navigate(location.pathname, { replace: true });\r\n  }, [location, navigate]);\r\n\r\n  /* ---------- Course derivation (from current users) ---------- */\r\n  const getCourseOf = (u) => {\r\n    if (!u || (u.userType !== 'student' && u.userType !== 'alumni')) return '';\r\n    if (u.course?.name) return String(u.course.name).trim();\r\n    if (typeof u.course === 'string' && u.course.trim()) return u.course.trim();\r\n    if (typeof u.yearCourse === 'string' && u.yearCourse.includes('•')) {\r\n  \r\n      const right = u.yearCourse.split('•')[1];\r\n      return right ? right.trim() : '';\r\n    }\r\n    return '';\r\n  };\r\n\r\n  useEffect(() => {\r\n    const uniq = Array.from(new Set(usersAll.map(getCourseOf).filter(Boolean)))\r\n      .sort((a, b) => a.localeCompare(b));\r\n    setCourseOptions(uniq);\r\n\r\n    if (selectedCourse !== 'all' && !uniq.includes(selectedCourse)) {\r\n      setSelectedCourse('all');\r\n    }\r\n  }, [usersAll]); \r\n\r\n  /* ---------- Filtering + pagination (client-side) ---------- */\r\n  const filtered = useMemo(() => {\r\n    const q = search.trim().toLowerCase();\r\n    return usersAll.filter(u => {\r\n      const matchSearch =\r\n        !q ||\r\n        `${u.firstName || ''} ${u.lastName || ''}`.toLowerCase().includes(q) ||\r\n        (u.email || '').toLowerCase().includes(q);\r\n\r\n      const matchRole = !role || u.userType === role;\r\n\r\n      const matchStatus =\r\n        !status ||\r\n        (status === 'active' ? !!u.isActive : !u.isActive);\r\n\r\n      const course = getCourseOf(u);\r\n      const matchCourse =\r\n        selectedCourse === 'all' || selectedCourse === '' || course === selectedCourse;\r\n\r\n      return matchSearch && matchRole && matchStatus && matchCourse;\r\n    });\r\n  }, [usersAll, search, role, status, selectedCourse]); // eslint-disable-line\r\n\r\n  const total = filtered.length;\r\n  const totalPages = Math.max(1, Math.ceil(total / limit));\r\n  const pageSafe = Math.min(page, totalPages);\r\n  const start = (pageSafe - 1) * limit;\r\n  const paginated = filtered.slice(start, start + limit);\r\n\r\n  /* ---------- Actions ---------- */\r\n  const handleToggleActive = async (user) => {\r\n    const want = !user.isActive;\r\n    if (!window.confirm(`${want ? 'Activate' : 'Deactivate'} ${user.firstName} ${user.lastName}?`)) return;\r\n\r\n    try {\r\n      setServerError('');\r\n      // optimistic update\r\n      setUsersAll(prev => prev.map(u => (u._id === user._id ? { ...u, isActive: want } : u)));\r\n      await usersAPI.update(user._id, { isActive: want });\r\n      setBanner({ type: 'success', text: `User has been ${want ? 'activated' : 'deactivated'} successfully` });\r\n    } catch (err) {\r\n      console.error('Toggle active failed', err);\r\n      // revert\r\n      setUsersAll(prev => prev.map(u => (u._id === user._id ? { ...u, isActive: user.isActive } : u)));\r\n      setBanner({ type: 'error', text: 'Error updating user status' });\r\n      setServerError('Failed to update user status');\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (user) => {\r\n    if (!window.confirm(`Delete ${user.firstName} ${user.lastName}? This cannot be undone.`)) return;\r\n    try {\r\n      setServerError('');\r\n      const before = usersAll;\r\n      setUsersAll(prev => prev.filter(u => u._id !== user._id)); // optimistic\r\n      await usersAPI.remove(user._id);\r\n      setBanner({ type: 'success', text: 'User deleted successfully' });\r\n    } catch (err) {\r\n      console.error('Delete user failed', err);\r\n      setServerError('Failed to delete user');\r\n      setBanner({ type: 'error', text: 'Error deleting user' });\r\n    }\r\n  };\r\n\r\n  const handleReset = () => {\r\n    setSearch('');\r\n    setRole('');\r\n    setStatus('');\r\n    setSelectedCourse('all'); // NEW\r\n    setPage(1);\r\n  };\r\n\r\n  /* ---------- Render ---------- */\r\n  return (\r\n    <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\">\r\n      {/* Header */}\r\n      <div className=\"mb-6 flex items-center justify-between\">\r\n        <div>\r\n          <h1 className=\"text-2xl font-heading font-bold text-gray-900 flex items-center gap-2\">\r\n            <Users className=\"w-6 h-6 text-primary-600\" />\r\n            Manage Users\r\n          </h1>\r\n          <p className=\"text-sm text-gray-600\">\r\n            View, search, and manage all users in the platform\r\n          </p>\r\n        </div>\r\n        <Link to=\"/admin/create-user\" className=\"btn btn-primary inline-flex items-center gap-2\">\r\n          <UserPlus className=\"w-4 h-4\" />\r\n          Create User\r\n        </Link>\r\n      </div>\r\n\r\n      {/* Banner */}\r\n      {banner.type && banner.text && (\r\n        <div\r\n          className={`mb-4 rounded-md p-3 text-sm ${\r\n            banner.type === 'success'\r\n              ? 'bg-green-50 text-green-700 border border-green-200'\r\n              : 'bg-red-50 text-red-700 border border-red-200'\r\n          }`}\r\n        >\r\n          {banner.text}\r\n        </div>\r\n      )}\r\n      {serverError && (\r\n        <div className=\"mb-4 rounded-md border border-red-300 bg-red-50 p-3 text-sm text-red-700\">\r\n          {serverError}\r\n        </div>\r\n      )}\r\n\r\n      {/* Filters */}\r\n      <div className=\"card p-4 mb-6\">\r\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-3\">\r\n          {/* Search */}\r\n          <div className=\"md:col-span-2\">\r\n            <label className=\"form-label\">Search</label>\r\n            <div className=\"relative\">\r\n              <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\r\n                <Search className=\"h-4 w-4 text-gray-400\" />\r\n              </div>\r\n              <input\r\n                type=\"text\"\r\n                className=\"input pl-10\"\r\n                placeholder=\"Search by name or email\"\r\n                value={search}\r\n                onChange={(e) => { setSearch(e.target.value); setPage(1); }}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {/* Role */}\r\n          <div>\r\n            <label className=\"form-label\">Role</label>\r\n            <select\r\n              className=\"input\"\r\n              value={role}\r\n              onChange={(e) => { setRole(e.target.value); setPage(1); }}\r\n            >\r\n              <option value=\"\">All roles</option>\r\n              <option value=\"student\">Student</option>\r\n              <option value=\"alumni\">Alumni</option>\r\n              <option value=\"admin\">Admin</option>\r\n            </select>\r\n          </div>\r\n\r\n          {/* Status */}\r\n          <div>\r\n            <label className=\"form-label\">Status</label>\r\n            <select\r\n              className=\"input\"\r\n              value={status}\r\n              onChange={(e) => { setStatus(e.target.value); setPage(1); }}\r\n            >\r\n              <option value=\"\">All</option>\r\n              <option value=\"active\">Active</option>\r\n              <option value=\"inactive\">Inactive</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n\r\n        {/* NEW row: Course + rows per page + reset */}\r\n        <div className=\"mt-3 grid grid-cols-1 md:grid-cols-4 gap-3\">\r\n          {/* Course */}\r\n          <div className=\"md:col-span-2\">\r\n            <label className=\"form-label\">Course</label>\r\n            <select\r\n              className=\"input\"\r\n              value={selectedCourse}\r\n              onChange={(e) => { setSelectedCourse(e.target.value); setPage(1); }}\r\n            >\r\n              <option value=\"all\">All</option>\r\n              {courseOptions.map(c => (\r\n                <option key={c} value={c}>{c}</option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n\r\n          {/* Rows per page */}\r\n          <div>\r\n            <label className=\"form-label\">Rows per page</label>\r\n            <select\r\n              className=\"input\"\r\n              value={limit}\r\n              onChange={(e) => { setLimit(Number(e.target.value)); setPage(1); }}\r\n            >\r\n              {PAGE_SIZE_OPTIONS.map(n => <option key={n} value={n}>{n}</option>)}\r\n            </select>\r\n          </div>\r\n\r\n          {/* Reset */}\r\n          <div className=\"flex items-end\">\r\n            <button\r\n              type=\"button\"\r\n              className=\"btn btn-outline inline-flex items-center gap-2\"\r\n              onClick={handleReset}\r\n              title=\"Reset filters\"\r\n            >\r\n              <RefreshCw className=\"w-4 h-4\" />\r\n              Reset\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Table */}\r\n      <div className=\"card overflow-hidden\">\r\n        <div className=\"overflow-x-auto\">\r\n          <table className=\"min-w-full divide-y divide-gray-200 text-base\">\r\n            <thead className=\"bg-gray-50\">\r\n              <tr>\r\n                <th className=\"px-8 py-4 text-left text-sm font-semibold text-gray-600 uppercase\">Name</th>\r\n                <th className=\"px-8 py-4 text-left text-sm font-semibold text-gray-600 uppercase\">Email</th>\r\n                <th className=\"px-8 py-4 text-left text-sm font-semibold text-gray-600 uppercase\">Role</th>\r\n                <th className=\"px-8 py-4 text-left text-sm font-semibold text-gray-600 uppercase\">Year/Course</th>\r\n                <th className=\"px-8 py-4 text-left text-sm font-semibold text-gray-600 uppercase\">Status</th>\r\n                <th className=\"px-8 py-4 text-left text-sm font-semibold text-gray-600 uppercase\">Actions</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody className=\"bg-white divide-y divide-gray-200\">\r\n              {loading ? (\r\n                <tr>\r\n                  <td colSpan=\"6\" className=\"px-8 py-8\">\r\n                    <div className=\"flex items-center justify-center\">\r\n                      <LoadingSpinner text=\"Loading users...\" />\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              ) : paginated.length === 0 ? (\r\n                <tr>\r\n                  <td colSpan=\"6\" className=\"px-8 py-8 text-center text-sm text-gray-500\">\r\n                    No users found\r\n                  </td>\r\n                </tr>\r\n              ) : (\r\n                paginated.map((u) => (\r\n                  <tr key={u._id}>\r\n                    <td className=\"px-8 py-5 whitespace-nowrap\">\r\n                      <div className=\"flex items-center gap-3\">\r\n                        <div className=\"flex-shrink-0 w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center text-gray-600\">\r\n                          <Users className=\"w-4 h-4\" />\r\n                        </div>\r\n                        <div>\r\n                          <div className=\"font-medium text-gray-900\">\r\n                            {`${u.firstName || ''} ${u.lastName || ''}`.trim() || '—'}\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"px-8 py-5 whitespace-nowrap text-gray-700\">\r\n                      <span className=\"inline-flex items-center gap-2\">\r\n                        <Mail className=\"w-4 h-4 text-gray-400\" />\r\n                        {u.email || '—'}\r\n                      </span>\r\n                    </td>\r\n                    <td className=\"px-8 py-5 whitespace-nowrap\">\r\n                      <RoleBadge role={u.userType} />\r\n                    </td>\r\n                    <td className=\"px-8 py-5 whitespace-nowrap text-gray-700\">\r\n                      {u.userType === 'student' || u.userType === 'alumni'\r\n                        ? [u.yearLevel, u.course?.name || u.course || getCourseOf(u)].filter(Boolean).join(' • ')\r\n                        : '—'}\r\n                    </td>\r\n                    <td className=\"px-8 py-5 whitespace-nowrap\">\r\n                      <StatusBadge active={!!u.isActive} />\r\n                    </td>\r\n                    <td className=\"px-8 py-5 whitespace-nowrap font-medium\">\r\n                      <div className=\"flex items-center gap-3\">\r\n                        <button\r\n                          onClick={() => handleToggleActive(u)}\r\n                          className=\"text-gray-600 hover:text-primary-600 inline-flex items-center gap-1\"\r\n                          title={u.isActive ? 'Deactivate' : 'Activate'}\r\n                        >\r\n                          {u.isActive ? (\r\n                            <>\r\n                              <ToggleRight className=\"w-4 h-4\" /> Deactivate\r\n                            </>\r\n                          ) : (\r\n                            <>\r\n                              <ToggleLeft className=\"w-4 h-4\" /> Activate\r\n                            </>\r\n                          )}\r\n                        </button>\r\n                        <button\r\n                          onClick={() => handleDelete(u)}\r\n                          className=\"text-red-600 hover:text-red-700 inline-flex items-center gap-1\"\r\n                          title=\"Delete\"\r\n                        >\r\n                          <Trash2 className=\"w-4 h-4\" /> Delete\r\n                        </button>\r\n                      </div>\r\n                    </td>\r\n                  </tr>\r\n                ))\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n\r\n        {/* Footer / Pagination */}\r\n        {!loading && (\r\n          <div className=\"px-6 py-4 bg-gray-50 flex items-center justify-between\">\r\n            <div className=\"text-sm text-gray-600\">\r\n              Page {pageSafe} of {totalPages} • {total} total\r\n            </div>\r\n            <div className=\"flex items-center gap-2\">\r\n              <button\r\n                className=\"btn btn-outline btn-sm\"\r\n                disabled={pageSafe <= 1}\r\n                onClick={() => setPage(p => Math.max(1, p - 1))}\r\n              >\r\n                Previous\r\n              </button>\r\n              <button\r\n                className=\"btn btn-outline btn-sm\"\r\n                disabled={pageSafe >= totalPages}\r\n                onClick={() => setPage(p => Math.min(totalPages, p + 1))}\r\n              >\r\n                Next\r\n              </button>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}