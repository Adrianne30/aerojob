{"ast":null,"code":"import _objectSpread from\"/Users/macbookair/Desktop/AeroJobs/AeroJob/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// src/components/SurveyPrompt.js\nimport React,{useEffect,useMemo,useState}from'react';import{surveysAPI}from'../utils/api';import{X,Star}from'lucide-react';import toast from'react-hot-toast';/**\n * Props (optional; if omitted, it auto-fetches one eligible survey and opens)\n * - open?: boolean\n * - onClose?: () => void\n * - survey?: object\n * - onSubmitted?: () => void\n */import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function SurveyPrompt(props){const controlled=typeof props.open==='boolean'||!!props.survey;const[internalOpen,setInternalOpen]=useState(false);const[internalSurvey,setInternalSurvey]=useState(null);const open=controlled?props.open:internalOpen;const survey=controlled?props.survey:internalSurvey;const[answers,setAnswers]=useState({});const[saving,setSaving]=useState(false);// Auto-prompt mode: fetch first eligible survey\nuseEffect(()=>{if(controlled)return;(async()=>{try{var _surveysAPI$eligibleA;const result=((_surveysAPI$eligibleA=surveysAPI.eligibleActive)===null||_surveysAPI$eligibleA===void 0?void 0:_surveysAPI$eligibleA.call(surveysAPI))||surveysAPI.forMe();const data=await result;const s=Array.isArray(data)?data[0]:data;if(s){setInternalSurvey(s);setInternalOpen(true);}}catch(_unused){/* ignore */}})();},[controlled]);const questions=useMemo(()=>{const arr=Array.isArray(survey===null||survey===void 0?void 0:survey.questions)?survey.questions:[];const sorted=[...arr].sort((a,b)=>(a.order||0)-(b.order||0));return sorted.map((q,idx)=>_objectSpread(_objectSpread({},q),{},{_qid:q._id||q.id||q.key||\"q\".concat(idx),type:String(q.type||'').toLowerCase(),text:q.text||q.label||\"Question \".concat(idx+1),options:Array.isArray(q.options)?q.options:[],scaleMax:Number(q.scaleMax)>0?Number(q.scaleMax):5}));},[survey]);// init/reset answers when survey/questions change\nuseEffect(()=>{const init={};questions.forEach(q=>{if(q.type==='checkbox'||q.type==='multi')init[q._qid]=[];else init[q._qid]='';});setAnswers(init);},[questions]);if(!survey||!open)return null;const close=()=>{var _props$onClose;if(controlled)(_props$onClose=props.onClose)===null||_props$onClose===void 0?void 0:_props$onClose.call(props);else setInternalOpen(false);};const setAnswer=(qid,val)=>setAnswers(a=>_objectSpread(_objectSpread({},a),{},{[qid]:val}));const requiredMissing=()=>{for(const q of questions){if(!q.required)continue;const v=answers[q._qid];if((q.type==='checkbox'||q.type==='multi')&&(!Array.isArray(v)||v.length===0))return q;if(q.type==='rating'&&(!v||Number(v)<=0))return q;if(!(q.type==='checkbox'||q.type==='multi'||q.type==='rating')&&(v===''||v==null))return q;}return null;};const submit=async()=>{const miss=requiredMissing();if(miss){toast.error(\"Please answer: \".concat(miss.text));return;}setSaving(true);try{var _props$onSubmitted;const payload={answers:questions.map(q=>({questionId:q._id||q.id||q._qid,type:q.type,label:q.text,value:answers[q._qid]}))};const submitFn=surveysAPI.submit||surveysAPI.submitResponse;await submitFn(survey._id,payload);toast.success('Thanks! Your response has been submitted.');(_props$onSubmitted=props.onSubmitted)===null||_props$onSubmitted===void 0?void 0:_props$onSubmitted.call(props);close();}catch(e){var _e$response,_e$response$data;toast.error((e===null||e===void 0?void 0:(_e$response=e.response)===null||_e$response===void 0?void 0:(_e$response$data=_e$response.data)===null||_e$response$data===void 0?void 0:_e$response$data.error)||(e===null||e===void 0?void 0:e.message)||'Submission failed');}finally{setSaving(false);}};// ---------- Renderers ----------\nconst Rating=_ref=>{let{q}=_ref;const val=Number(answers[q._qid]||0);const max=q.scaleMax||5;return/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[Array.from({length:max}).map((_,i)=>{const n=i+1;const active=val>=n;return/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setAnswer(q._qid,n),className:\"p-2 rounded-md border transition \".concat(active?'border-yellow-400 bg-yellow-50':'border-gray-200'),children:/*#__PURE__*/_jsx(Star,{className:\"w-5 h-5 \".concat(active?'fill-yellow-400':'')})},n);}),val?/*#__PURE__*/_jsxs(\"span\",{className:\"ml-2 text-sm opacity-70\",children:[val,\"/\",max]}):null]});};const Question=_ref2=>{let{q}=_ref2;const t=q.type;const val=answers[q._qid];if(t==='text'||t==='short'||t==='short_text'){return/*#__PURE__*/_jsx(\"input\",{className:\"input w-full\",type:\"text\",value:val!==null&&val!==void 0?val:'',onChange:e=>setAnswer(q._qid,e.target.value),onKeyDownCapture:e=>e.stopPropagation()});}if(t==='textarea'||t==='essay'||t==='paragraph'||t==='short_essay'||t==='long_text'){return/*#__PURE__*/_jsx(\"textarea\",{className:\"textarea w-full\",rows:3,value:val!==null&&val!==void 0?val:'',onChange:e=>setAnswer(q._qid,e.target.value),onKeyDownCapture:e=>e.stopPropagation()});}if(t==='radio'||t==='choice'||t==='single'||t==='multiple_choice'){return/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-col gap-2\",onKeyDownCapture:e=>e.stopPropagation(),children:q.options.map(opt=>{const id=\"\".concat(q._qid,\"-\").concat(opt);return/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center gap-2 cursor-pointer\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:q._qid,checked:val===opt,onChange:()=>setAnswer(q._qid,opt)}),/*#__PURE__*/_jsx(\"span\",{children:opt})]},id);})});}if(t==='checkbox'||t==='multi'){const arr=Array.isArray(val)?val:[];const toggle=opt=>{if(arr.includes(opt))setAnswer(q._qid,arr.filter(x=>x!==opt));else setAnswer(q._qid,[...arr,opt]);};return/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-col gap-2\",onKeyDownCapture:e=>e.stopPropagation(),children:q.options.map(opt=>{const id=\"\".concat(q._qid,\"-\").concat(opt);const checked=arr.includes(opt);return/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center gap-2 cursor-pointer\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:checked,onChange:()=>toggle(opt)}),/*#__PURE__*/_jsx(\"span\",{children:opt})]},id);})});}if(t==='rating'){return/*#__PURE__*/_jsx(Rating,{q:q});}// default -> text\nreturn/*#__PURE__*/_jsx(\"input\",{className:\"input w-full\",type:\"text\",value:val!==null&&val!==void 0?val:'',onChange:e=>setAnswer(q._qid,e.target.value),onKeyDownCapture:e=>e.stopPropagation()});};return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4\",role:\"dialog\",\"aria-modal\":\"true\",onClick:e=>{if(e.target===e.currentTarget)close();},onKeyDownCapture:e=>{// prevent backdrop/global listeners from eating Space/Enter\ne.stopPropagation();},children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl w-full max-w-2xl max-h-[90vh] overflow-auto shadow-xl\",onKeyDownCapture:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 border-b flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold\",children:survey.title}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:close,className:\"btn btn-ghost\",\"aria-label\":\"Close\",children:/*#__PURE__*/_jsx(X,{})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4\",children:[survey.description&&/*#__PURE__*/_jsx(\"p\",{className:\"mb-3 opacity-80\",children:survey.description}),/*#__PURE__*/_jsx(\"div\",{className:\"grid gap-4\",children:questions.map((q,idx)=>/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"font-medium mb-1\",children:[\"Q\",idx+1,\". \",q.text,\" \",q.required&&/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500\",children:\"*\"})]}),/*#__PURE__*/_jsx(Question,{q:q})]},q._qid))})]}),/*#__PURE__*/_jsx(\"div\",{className:\"p-4 border-t flex justify-end\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-primary\",disabled:saving,onClick:submit,children:saving?'Submittingâ€¦':'Submit'})})]})});}","map":{"version":3,"names":["React","useEffect","useMemo","useState","surveysAPI","X","Star","toast","jsx","_jsx","jsxs","_jsxs","SurveyPrompt","props","controlled","open","survey","internalOpen","setInternalOpen","internalSurvey","setInternalSurvey","answers","setAnswers","saving","setSaving","_surveysAPI$eligibleA","result","eligibleActive","call","forMe","data","s","Array","isArray","_unused","questions","arr","sorted","sort","a","b","order","map","q","idx","_objectSpread","_qid","_id","id","key","concat","type","String","toLowerCase","text","label","options","scaleMax","Number","init","forEach","close","_props$onClose","onClose","setAnswer","qid","val","requiredMissing","required","v","length","submit","miss","error","_props$onSubmitted","payload","questionId","value","submitFn","submitResponse","success","onSubmitted","e","_e$response","_e$response$data","response","message","Rating","_ref","max","className","children","from","_","i","n","active","onClick","Question","_ref2","t","onChange","target","onKeyDownCapture","stopPropagation","rows","opt","name","checked","toggle","includes","filter","x","role","currentTarget","title","description","disabled"],"sources":["/Users/macbookair/Desktop/AeroJobs/AeroJob/frontend/src/components/SurveyPrompt.js"],"sourcesContent":["// src/components/SurveyPrompt.js\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { surveysAPI } from '../utils/api';\nimport { X, Star } from 'lucide-react';\nimport toast from 'react-hot-toast';\n\n/**\n * Props (optional; if omitted, it auto-fetches one eligible survey and opens)\n * - open?: boolean\n * - onClose?: () => void\n * - survey?: object\n * - onSubmitted?: () => void\n */\nexport default function SurveyPrompt(props) {\n  const controlled = typeof props.open === 'boolean' || !!props.survey;\n\n  const [internalOpen, setInternalOpen] = useState(false);\n  const [internalSurvey, setInternalSurvey] = useState(null);\n\n  const open = controlled ? props.open : internalOpen;\n  const survey = controlled ? props.survey : internalSurvey;\n\n  const [answers, setAnswers] = useState({});\n  const [saving, setSaving] = useState(false);\n\n  // Auto-prompt mode: fetch first eligible survey\n  useEffect(() => {\n    if (controlled) return;\n    (async () => {\n      try {\n        const result = (surveysAPI.eligibleActive?.() || surveysAPI.forMe());\n        const data = await result;\n        const s = Array.isArray(data) ? data[0] : data;\n        if (s) {\n          setInternalSurvey(s);\n          setInternalOpen(true);\n        }\n      } catch {/* ignore */}\n    })();\n  }, [controlled]);\n\n  const questions = useMemo(() => {\n    const arr = Array.isArray(survey?.questions) ? survey.questions : [];\n    const sorted = [...arr].sort((a, b) => (a.order || 0) - (b.order || 0));\n    return sorted.map((q, idx) => ({\n      ...q,\n      _qid: q._id || q.id || q.key || `q${idx}`,\n      type: String(q.type || '').toLowerCase(),\n      text: q.text || q.label || `Question ${idx + 1}`,\n      options: Array.isArray(q.options) ? q.options : [],\n      scaleMax: Number(q.scaleMax) > 0 ? Number(q.scaleMax) : 5,\n    }));\n  }, [survey]);\n\n  // init/reset answers when survey/questions change\n  useEffect(() => {\n    const init = {};\n    questions.forEach((q) => {\n      if (q.type === 'checkbox' || q.type === 'multi') init[q._qid] = [];\n      else init[q._qid] = '';\n    });\n    setAnswers(init);\n  }, [questions]);\n\n  if (!survey || !open) return null;\n\n  const close = () => {\n    if (controlled) props.onClose?.();\n    else setInternalOpen(false);\n  };\n\n  const setAnswer = (qid, val) => setAnswers((a) => ({ ...a, [qid]: val }));\n\n  const requiredMissing = () => {\n    for (const q of questions) {\n      if (!q.required) continue;\n      const v = answers[q._qid];\n      if ((q.type === 'checkbox' || q.type === 'multi') && (!Array.isArray(v) || v.length === 0)) return q;\n      if (q.type === 'rating' && (!v || Number(v) <= 0)) return q;\n      if (!(q.type === 'checkbox' || q.type === 'multi' || q.type === 'rating') && (v === '' || v == null)) return q;\n    }\n    return null;\n  };\n\n  const submit = async () => {\n    const miss = requiredMissing();\n    if (miss) {\n      toast.error(`Please answer: ${miss.text}`);\n      return;\n    }\n    setSaving(true);\n    try {\n      const payload = {\n        answers: questions.map((q) => ({\n          questionId: q._id || q.id || q._qid,\n          type: q.type,\n          label: q.text,\n          value: answers[q._qid],\n        })),\n      };\n      const submitFn = surveysAPI.submit || surveysAPI.submitResponse;\n      await submitFn(survey._id, payload);\n      toast.success('Thanks! Your response has been submitted.');\n      props.onSubmitted?.();\n      close();\n    } catch (e) {\n      toast.error(e?.response?.data?.error || e?.message || 'Submission failed');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  // ---------- Renderers ----------\n  const Rating = ({ q }) => {\n    const val = Number(answers[q._qid] || 0);\n    const max = q.scaleMax || 5;\n    return (\n      <div className=\"flex items-center gap-2\">\n        {Array.from({ length: max }).map((_, i) => {\n          const n = i + 1;\n          const active = val >= n;\n          return (\n            <button\n              key={n}\n              type=\"button\"\n              onClick={() => setAnswer(q._qid, n)}\n              className={`p-2 rounded-md border transition ${active ? 'border-yellow-400 bg-yellow-50' : 'border-gray-200'}`}\n            >\n              <Star className={`w-5 h-5 ${active ? 'fill-yellow-400' : ''}`} />\n            </button>\n          );\n        })}\n        {val ? <span className=\"ml-2 text-sm opacity-70\">{val}/{max}</span> : null}\n      </div>\n    );\n  };\n\n  const Question = ({ q }) => {\n    const t = q.type;\n    const val = answers[q._qid];\n\n    if (t === 'text' || t === 'short' || t === 'short_text') {\n      return (\n        <input\n          className=\"input w-full\"\n          type=\"text\"\n          value={val ?? ''}\n          onChange={(e) => setAnswer(q._qid, e.target.value)}\n          onKeyDownCapture={(e) => e.stopPropagation()}\n        />\n      );\n    }\n    if (t === 'textarea' || t === 'essay' || t === 'paragraph' || t === 'short_essay' || t === 'long_text') {\n      return (\n        <textarea\n          className=\"textarea w-full\"\n          rows={3}\n          value={val ?? ''}\n          onChange={(e) => setAnswer(q._qid, e.target.value)}\n          onKeyDownCapture={(e) => e.stopPropagation()}\n        />\n      );\n    }\n    if (t === 'radio' || t === 'choice' || t === 'single' || t === 'multiple_choice') {\n      return (\n        <div className=\"flex flex-col gap-2\" onKeyDownCapture={(e) => e.stopPropagation()}>\n          {q.options.map((opt) => {\n            const id = `${q._qid}-${opt}`;\n            return (\n              <label key={id} className=\"flex items-center gap-2 cursor-pointer\">\n                <input\n                  type=\"radio\"\n                  name={q._qid}\n                  checked={val === opt}\n                  onChange={() => setAnswer(q._qid, opt)}\n                />\n                <span>{opt}</span>\n              </label>\n            );\n          })}\n        </div>\n      );\n    }\n    if (t === 'checkbox' || t === 'multi') {\n      const arr = Array.isArray(val) ? val : [];\n      const toggle = (opt) => {\n        if (arr.includes(opt)) setAnswer(q._qid, arr.filter((x) => x !== opt));\n        else setAnswer(q._qid, [...arr, opt]);\n      };\n      return (\n        <div className=\"flex flex-col gap-2\" onKeyDownCapture={(e) => e.stopPropagation()}>\n          {q.options.map((opt) => {\n            const id = `${q._qid}-${opt}`;\n            const checked = arr.includes(opt);\n            return (\n              <label key={id} className=\"flex items-center gap-2 cursor-pointer\">\n                <input type=\"checkbox\" checked={checked} onChange={() => toggle(opt)} />\n                <span>{opt}</span>\n              </label>\n            );\n          })}\n        </div>\n      );\n    }\n    if (t === 'rating') {\n      return <Rating q={q} />;\n    }\n    // default -> text\n    return (\n      <input\n        className=\"input w-full\"\n        type=\"text\"\n        value={val ?? ''}\n        onChange={(e) => setAnswer(q._qid, e.target.value)}\n        onKeyDownCapture={(e) => e.stopPropagation()}\n      />\n    );\n  };\n\n  return (\n    <div\n      className=\"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4\"\n      role=\"dialog\"\n      aria-modal=\"true\"\n      onClick={(e) => { if (e.target === e.currentTarget) close(); }}\n      onKeyDownCapture={(e) => {\n        // prevent backdrop/global listeners from eating Space/Enter\n        e.stopPropagation();\n      }}\n    >\n      {/* Panel */}\n      <div\n        className=\"bg-white rounded-xl w-full max-w-2xl max-h-[90vh] overflow-auto shadow-xl\"\n        onKeyDownCapture={(e) => e.stopPropagation()}\n      >\n        <div className=\"p-4 border-b flex items-center justify-between\">\n          <h3 className=\"text-lg font-semibold\">{survey.title}</h3>\n          <button type=\"button\" onClick={close} className=\"btn btn-ghost\" aria-label=\"Close\">\n            <X />\n          </button>\n        </div>\n\n        <div className=\"p-4\">\n          {survey.description && <p className=\"mb-3 opacity-80\">{survey.description}</p>}\n\n          <div className=\"grid gap-4\">\n            {questions.map((q, idx) => (\n              <div key={q._qid}>\n                <div className=\"font-medium mb-1\">\n                  Q{idx + 1}. {q.text} {q.required && <span className=\"text-red-500\">*</span>}\n                </div>\n                <Question q={q} />\n              </div>\n            ))}\n          </div>\n        </div>\n\n        <div className=\"p-4 border-t flex justify-end\">\n          <button type=\"button\" className=\"btn btn-primary\" disabled={saving} onClick={submit}>\n            {saving ? 'Submittingâ€¦' : 'Submit'}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}